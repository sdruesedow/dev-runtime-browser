!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.core=e()}}(function(){var t;return function n(e,t,r){function o(s,a){if(!t[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,n,e,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,r){(function(e){!function(e,o){"object"==typeof r&&"undefined"!=typeof n?n.exports=o():"function"==typeof t&&t.amd?t(o):e.Dexie=o()}(this,function(){"use strict";function t(e,t){return"object"!=typeof t?e:(Oe(t).forEach(function(n){e[n]=t[n]}),e)}function n(e,t){return Ce.call(e,t)}function r(e,t){"function"==typeof t&&(t=t(Se(e))),Oe(t).forEach(function(n){o(e,n,t[n])})}function o(e,r,o,i){Object.defineProperty(e,r,t(o&&n(o,"get")&&"function"==typeof o.get?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},i))}function i(e){return{from:function(t){return e.prototype=Object.create(t.prototype),o(e.prototype,"constructor",e),{extend:r.bind(null,e.prototype)}}}}function s(e,t){var n,r=Me(e,t);return r||(n=Se(e))&&s(n,t)}function a(e,t,n){return Ie.call(e,t,n)}function u(e,t){return t(e)}function c(e){var t=setTimeout(e,1e3);clearTimeout(t)}function l(e){if(!e)throw new Error("Assertion Failed")}function f(e){Pe.setImmediate?setImmediate(e):setTimeout(e,0)}function d(e,t){return e.reduce(function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function p(e,t){return function(){try{e.apply(this,arguments)}catch(n){t(n)}}}function h(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function y(e,t){if(n(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],o=0,i=t.length;o<i;++o){var s=y(e,t[o]);r.push(s)}return r}var a=t.indexOf(".");if(a!==-1){var u=e[t.substr(0,a)];return void 0===u?void 0:y(u,t.substr(a+1))}}function g(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){l("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)g(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var s=t.substr(0,i),a=t.substr(i+1);if(""===a)void 0===n?delete e[s]:e[s]=n;else{var u=e[s];u||(u=e[s]={}),g(u,a,n)}}else void 0===n?delete e[t]:e[t]=n}}function m(e,t){"string"==typeof t?g(e,t,void 0):"length"in t&&[].map.call(t,function(t){g(e,t,void 0)})}function _(e){var t={};for(var r in e)n(e,r)&&(t[r]=e[r]);return t}function b(e){if(!e||"object"!=typeof e)return e;var t;if(Ee(e)){t=[];for(var r=0,o=e.length;r<o;++r)t.push(b(e[r]))}else if(e instanceof Date)t=new Date,t.setTime(e.getTime());else{t=e.constructor?Object.create(e.constructor.prototype):{};for(var i in e)n(e,i)&&(t[i]=b(e[i]))}return t}function v(e,t,r,o){return r=r||{},o=o||"",Oe(e).forEach(function(i){if(n(t,i)){var s=e[i],a=t[i];"object"==typeof s&&"object"==typeof a&&s&&a&&s.constructor===a.constructor?v(s,a,r,o+i+"."):s!==a&&(r[o+i]=t[i])}else r[o+i]=void 0}),Oe(t).forEach(function(i){n(e,i)||(r[o+i]=t[i])}),r}function w(e){var t,n,r,o;if(1===arguments.length){if(Ee(e))return e.slice();if(this===Ae&&"string"==typeof e)return[e];if(o=Te(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(null==e)return[e];if(t=e.length,"number"==typeof t){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}function k(e){return Ne.apply([],e)}function j(){}function x(e){return e}function O(e,t){return null==e||e===x?t:function(n){return t(e(n))}}function E(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function P(e,t){return e===j?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?E(r,this.onsuccess):r),o&&(this.onerror=this.onerror?E(o,this.onerror):o),void 0!==i?i:n}}function S(e,t){return e===j?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?E(n,this.onsuccess):n),r&&(this.onerror=this.onerror?E(r,this.onerror):r)}}function C(e,n){return e===j?n:function(r){var o=e.apply(this,arguments);t(r,o);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?E(i,this.onsuccess):i),s&&(this.onerror=this.onerror?E(s,this.onerror):s),void 0===o?void 0===a?void 0:a:t(o,a)}}function M(e,t){return e===j?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function I(e,t){return e===j?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}function R(e,t){De=e,Ue=t}function T(){if(Fe)try{throw T.arguments,new Error}catch(e){return e}return new Error}function A(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Ue).map(function(e){return"\n"+e}).join("")):""}function N(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+A(T(),1)),t.apply(this,arguments)}}function D(e,t){this._e=T(),this.name=e,this.message=t}function U(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function F(e,t,n,r){this._e=T(),this.failures=t,this.failedKeys=r,this.successCount=n}function L(e,t){this._e=T(),this.name="BulkError",this.failures=t,this.message=U(e,t)}function G(e,t){if(!e||e instanceof D||e instanceof TypeError||e instanceof SyntaxError||!e.name||!qe[e.name])return e;var n=new qe[e.name](t||e.message,e);return"stack"in e&&o(n,"stack",{get:function(){return this.inner.stack}}),n}function B(e){function t(e,t,i){if("object"==typeof e)return n(e);t||(t=M),i||(i=j);var s={subscribers:[],fire:i,subscribe:function(e){s.subscribers.indexOf(e)===-1&&(s.subscribers.push(e),s.fire=t(s.fire,e))},unsubscribe:function(e){s.subscribers=s.subscribers.filter(function(t){return t!==e}),s.fire=s.subscribers.reduce(t,i)}};return r[e]=o[e]=s,s}function n(e){Oe(e).forEach(function(n){var r=e[n];if(Ee(r))t(n,e[n][0],e[n][1]);else{if("asap"!==r)throw new Ve.InvalidArgument("Invalid event config");var o=t(n,x,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];o.subscribers.forEach(function(e){f(function(){e.apply(null,t)})})})}})}var r={},o=function(t,n){if(n){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return r[t].subscribe.apply(null,i),e}if("string"==typeof t)return r[t]};o.addEventType=t;for(var i=1,s=arguments.length;i<s;++i)t(arguments[i]);return o}function $(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=j,this._lib=!1;var t=this._PSD=at;if(De&&(this._stackHolder=T(),this._prev=null,this._numPrev=0,Y(this,ot)),"function"!=typeof e){if(e!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&V(this,this._value))}this._state=null,this._value=null,++t.ref,H(this,e)}function z(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=at}function H(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Z();t&&"function"==typeof t.then?H(e,function(e,n){t instanceof $?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,q(e)),n&&X()}},V.bind(null,e))}catch(n){V(e,n)}}function V(e,t){if(rt.push(t),null===e._state){var n=e._lib&&Z();t=it(t),e._state=!1,e._value=t,De&&null!==t&&"object"==typeof t&&!t._promise&&h(function(){var n=s(t,"stack");t._promise=e,o(t,"stack",{get:function(){return Je?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),ne(e),q(e),n&&X()}}function q(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)K(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===ct&&(++ct,Xe(function(){0===--ct&&ee()},[]))}function K(e,t){if(null===e._state)return void e._listeners.push(t);var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);var r=t.psd;++r.ref,++ct,Xe(W,[n,e,t])}function W(e,t,n){var r=at,o=n.psd;try{o!==r&&(at=o),ot=t;var i,s=t._value;t._state?i=e(s):(rt.length&&(rt=[]),i=e(s),rt.indexOf(s)===-1&&re(t)),n.resolve(i)}catch(a){n.reject(a)}finally{o!==r&&(at=r),ot=null,0===--ct&&ee(),--o.ref||o.finalize()}}function Q(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var o,i,s=e._value;null!=s?(o=s.name||"Error",i=s.message||s,r=A(s,0)):(o=s,i=""),t.push(o+(i?": "+i:"")+r)}return De&&(r=A(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Q(e._prev,t,n)),t}function Y(e,t){var n=t?t._numPrev+1:0;n<Qe&&(e._prev=t,e._numPrev=n)}function J(){Z()&&X()}function Z(){var e=et;return et=!1,tt=!1,e}function X(){var e,t,n;do for(;ut.length>0;)for(e=ut,ut=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(ut.length>0);et=!0,tt=!0}function ee(){var e=nt;nt=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=lt.slice(0),n=t.length;n;)t[--n]()}function te(e){function t(){e(),lt.splice(lt.indexOf(t),1)}lt.push(t),++ct,Xe(function(){0===--ct&&ee()},[])}function ne(e){nt.some(function(t){return t._value===e._value})||nt.push(e)}function re(e){for(var t=nt.length;t;)if(nt[--t]._value===e._value)return void nt.splice(t,1)}function oe(e){console.warn("Unhandled rejection: "+(e.stack||e))}function ie(e){return new $(We,(!1),e)}function se(e,t){var n=at;return function(){var r=Z(),o=at;try{return o!==n&&(at=n),e.apply(this,arguments)}catch(i){t&&t(i)}finally{o!==n&&(at=o),r&&X()}}}function ae(e,t,n,r){var o=at,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ue(i,e,t,n,r);return 0===i.ref&&i.finalize(),s}function ue(e,t,n,r,o){var i=at;try{return e!==i&&(at=e),t(n,r,o)}finally{e!==i&&(at=i)}}function ce(e,n){var r;try{r=n.onuncatched(e)}catch(o){}if(r!==!1)try{var i,s={promise:n,reason:e};if(Pe.document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(dt,!0,!0),t(i,s)):Pe.CustomEvent&&(i=new CustomEvent(dt,{detail:s}),t(i,s)),i&&Pe.dispatchEvent&&(dispatchEvent(i),!Pe.PromiseRejectionEvent&&Pe.onunhandledrejection))try{Pe.onunhandledrejection(i)}catch(a){}i.defaultPrevented||$.on.error.fire(e,n)}catch(o){}}function le(e,t){var n=$.reject(e);return t?n.uncaught(t):n}function fe(e,s){function f(){rt.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+rt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+rt.name+"'. Closing db now to resume the delete request."),rt.close()}),rt.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+rt.name+"') was blocked"):console.warn("Upgrade '"+rt.name+"' blocked by other connection holding version "+e.oldVersion/10)})}function m(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function E(e,t,n){var r=rt._createTransaction(nt,Qe,Ke);r.create(t),r._completion["catch"](n);var o=r._reject.bind(r);ae(function(){at.trans=r,0===e?(Oe(Ke).forEach(function(e){A(t,e,Ke[e].primKey,Ke[e].indexes)}),$.follow(function(){return rt.on.populate.fire(r)})["catch"](o)):M(e,r,t)["catch"](o)})}function M(e,t,n){function r(){return o.length?$.resolve(o.shift()(t.idbtrans)).then(r):$.resolve()}var o=[],i=We.filter(function(t){return t._cfg.version===e})[0];if(!i)throw new Ve.Upgrade("Dexie specification of currently installed DB version is missing");Ke=rt._dbSchema=i._cfg.dbschema;var s=!1,a=We.filter(function(t){return t._cfg.version>e});return a.forEach(function(e){o.push(function(){var r=Ke,o=e._cfg.dbschema;Te(r,n),Te(o,n),Ke=rt._dbSchema=o;var i=R(r,o);if(i.add.forEach(function(e){A(n,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(function(e){if(e.recreate)throw new Ve.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){G(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),G(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return s=!0,$.follow(function(){e._cfg.contentUpgrade(t)})}),o.push(function(t){if(!s||!vt){var n=e._cfg.dbschema;U(n,t)}})}),r().then(function(){D(Ke,n)})}function R(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],i=t[r];if(o){var s={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)s.recreate=!0,n.change.push(s);else{var a=o.idxByName,u=i.idxByName;for(var c in a)u[c]||s.del.push(c);for(c in u){var l=a[c],f=u[c];l?l.src!==f.src&&s.change.push(f):s.add.push(f)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,i])}return n}function A(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){G(o,e)}),o}function D(e,t){Oe(e).forEach(function(n){t.db.objectStoreNames.contains(n)||A(t,n,e[n].primKey,e[n].indexes)})}function U(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function G(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function z(e){return rt.on.error.fire(e)}function H(e,t,n){if(et||at.letThrough){var r=rt._createTransaction(e,t,Ke);return r._promise(e,function(e,t){ae(function(){at.trans=r,n(e,t,r)})}).then(function(e){return r._completion.then(function(){return e})})}if(!Xe){if(!ze)return le(new Ve.DatabaseClosed,z);rt.open()["catch"](j)}return ot.then(function(){return H(e,t,n)})}function V(e,t,n){this.name=e,this.schema=t,this.hook=Ye[e]?Ye[e].hook:B(null,{creating:[P,j],reading:[O,x],updating:[C,j],deleting:[S,j]}),this._collClass=n||J}function q(e,t,n){V.call(this,e,t,n||X)}function K(e,t,n){return(n?me:ge)(function(n){e.push(n),t&&t()})}function W(e,t,n,r,o){return new $(function(i,s){var a=n.length,u=a-1;if(0===a)return i();if(r){var c,l=me(s),f=ye(null);h(function(){for(var r=0;r<a;++r){c={onsuccess:null,onerror:null};var s=n[r];o.call(c,s[0],s[1],t);var d=e["delete"](s[0]);d._hookCtx=c,d.onerror=l,r===u?d.onsuccess=ye(i):d.onsuccess=f}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var d=0;d<a;++d){var p=e["delete"](n[d]);p.onerror=se(ge(s)),d===u&&(p.onsuccess=se(function(){return i()}))}}).uncaught(z)}function Q(e,t,n,r){var o=this;this.db=rt,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=B(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=n,this._resolve=null,this._reject=null,this._completion=new $(function(e,t){o._resolve=e,o._reject=t}).uncaught(z),this._completion.then(function(){o.on.complete.fire()},function(e){return o.on.error.fire(e),o.parent?o.parent._reject(e):o.active&&o.idbtrans&&o.idbtrans.abort(),o.active=!1,le(e)})}function Y(e,t,n){this._ctx={table:e,index:":id"===t?null:t,collClass:e._collClass,or:n}}function J(e,t){var n=null,r=null;if(t)try{n=t()}catch(o){r=o}var i=e._ctx,s=i.table;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:s.hook.reading.fire}}function Z(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function X(){J.apply(this,arguments)}function ee(e,t){return e._cfg.version-t._cfg.version}function te(e,t,n,r){t.forEach(function(t){var o=rt._tableFactory(n,r[t]);e.forEach(function(e){t in e||(e[t]=o)})})}function ne(e){e.forEach(function(e){for(var t in e)e[t]instanceof V&&delete e[t]})}function re(e,t,n,r,o,i){var s=i?function(e,t,r){return n(i(e),t,r)}:n,a=se(s,o);e.onerror||(e.onerror=ge(o)),t?e.onsuccess=p(function(){var n=e.result;if(n){var i=function(){n["continue"]()};t(n,function(e){i=e},r,o)&&a(n.value,n,function(e){i=e}),i()}else r()},o):e.onsuccess=p(function(){var t=e.result;if(t){var n=function(){t["continue"]()};a(t.value,t,function(e){n=e}),n()}else r()},o)}function oe(e){var t=[];return e.split(",").forEach(function(e){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new we(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Ee(r),/\./.test(e)))}),t}function ie(e,t){return He.cmp(e,t)}function ce(e,t){return ie(e,t)<0?e:t}function de(e,t){return ie(e,t)>0?e:t}function Pe(e,t){return He.cmp(e,t)}function Se(e,t){return He.cmp(t,e)}function Ce(e,t){return e<t?-1:e===t?0:1}function Me(e,t){return e>t?-1:e===t?0:1}function Ie(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Re(){if(rt.verno=Je.version/10,rt._dbSchema=Ke={},Qe=a(Je.objectStoreNames,0),0!==Qe.length){var e=Je.transaction(je(Qe),"readonly");Qe.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,o=r&&"string"==typeof r&&r.indexOf(".")!==-1,i=new we(r,r||"",(!1),(!1),(!!n.autoIncrement),r&&"string"!=typeof r,o),s=[],a=0;a<n.indexNames.length;++a){var u=n.index(n.indexNames[a]);r=u.keyPath,o=r&&"string"==typeof r&&r.indexOf(".")!==-1;var c=new we(u.name,r,(!!u.unique),(!!u.multiEntry),(!1),r&&"string"!=typeof r,o);s.push(c)}Ke[t]=new ke(t,i,s,{})}),te([Ye,Q.prototype],Oe(Ke),nt,Ke)}}function Te(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],i=t.objectStore(o);Le="getAll"in i;for(var s=0;s<i.indexNames.length;++s){var u=i.indexNames[s],c=i.index(u).keyPath,l="string"==typeof c?c:"["+a(c).join("+")+"]";if(e[o]){var f=e[o].idxByName[l];f&&(f.name=u)}}}}function Ne(e){rt.on("blocked").fire(e),_t.filter(function(e){return e.name===rt.name&&e!==rt&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}var Ue,Fe,Le,Ge=fe.dependencies,Be=t({addons:fe.addons,autoOpen:!0,indexedDB:Ge.indexedDB,IDBKeyRange:Ge.IDBKeyRange},s),$e=Be.addons,ze=Be.autoOpen,He=Be.indexedDB,qe=Be.IDBKeyRange,Ke=this._dbSchema={},We=[],Qe=[],Ye={},Je=null,Ze=null,Xe=!1,et=!1,tt="readonly",nt="readwrite",rt=this,ot=new $(function(e){Ue=e}),it=new $(function(e,t){Fe=t}),st=!0,ut=!!xe(He);this.version=function(e){if(Je||Xe)throw new Ve.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=We.filter(function(t){return t._cfg.version===e})[0];return t?t:(t=new m(e),We.push(t),We.sort(ee),t)},t(m.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?t(this._cfg.storesSource,e):e;var n={};We.forEach(function(e){t(n,e._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(n,r),Ke=rt._dbSchema=r,ne([Ye,rt,Q.prototype]),te([Ye,rt,Q.prototype,this._cfg.tables],Oe(r),nt,r),Qe=Oe(r),this},upgrade:function(e){var t=this;return jt(function(){e(rt._createTransaction(nt,Oe(t._cfg.dbschema),t._cfg.dbschema))}),this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){Oe(e).forEach(function(n){if(null!==e[n]){var r={},o=oe(e[n]),i=o.shift();if(i.multi)throw new Ve.Schema("Primary key cannot be multi-valued");i.keyPath&&g(r,i.keyPath,i.auto?0:i.keyPath),o.forEach(function(e){if(e.auto)throw new Ve.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Ve.Schema("Index must have a name and cannot be an empty string");g(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new ke(n,i,o,r)}})}}),this._allTables=Ye,this._tableFactory=function(e,t){return e===tt?new V(t.name,t,J):new q(t.name,t)},this._createTransaction=function(e,t,n,r){return new Q(e,t,n,r)},this._whenReady=function(e){return new $(xt||et||at.letThrough?e:function(t,n){if(!Xe){if(!ze)return void n(new Ve.DatabaseClosed);rt.open()["catch"](j)}ot.then(function(){e(t,n)})}).uncaught(z)},this.verno=0,this.open=function(){if(Xe||Je)return ot.then(function(){return Ze?le(Ze,z):rt});De&&(it._stackHolder=T()),Xe=!0,Ze=null,et=!1;var t=Ue,n=null;return $.race([it,new $(function(t,r){if(c(function(){return t()}),We.length>0&&(st=!1),!He)throw new Ve.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=st?He.open(e):He.open(e,Math.round(10*rt.verno));if(!o)throw new Ve.MissingAPI("IndexedDB API not available");o.onerror=se(ge(r)),o.onblocked=se(Ne),o.onupgradeneeded=se(function(t){if(n=o.transaction,st&&!rt._allowEmptyDB){o.onerror=_e,n.abort(),o.result.close();var i=He.deleteDatabase(e);i.onsuccess=i.onerror=se(function(){r(new Ve.NoSuchDatabase("Database "+e+" doesnt exist"))})}else{n.onerror=se(ge(r));var s=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;E(s/10,n,r,o)}},r),o.onsuccess=se(function(){if(n=null,Je=o.result,_t.push(rt),st)Re();else if(Je.objectStoreNames.length>0)try{Te(Ke,Je.transaction(je(Je.objectStoreNames),tt))}catch(r){}Je.onversionchange=se(function(e){rt._vcFired=!0,rt.on("versionchange").fire(e)}),ut||be(function(t){if(t.indexOf(e)===-1)return t.push(e)}),t()},r)})]).then(function(){return fe.vip(rt.on.ready.fire)}).then(function(){return Xe=!1,rt})["catch"](function(e){try{n&&n.abort()}catch(t){}return Xe=!1,rt.close(),Ze=e,le(Ze,z)})["finally"](function(){et=!0,t()})},this.close=function(){var e=_t.indexOf(rt);if(e>=0&&_t.splice(e,1),Je){try{Je.close()}catch(t){}Je=null}ze=!1,Ze=new Ve.DatabaseClosed,Xe&&Fe(Ze),ot=new $(function(e){Ue=e}),it=new $(function(e,t){Fe=t})},this["delete"]=function(){var t=arguments.length>0;return new $(function(n,r){function o(){rt.close();var t=He.deleteDatabase(e);t.onsuccess=se(function(){ut||be(function(t){var n=t.indexOf(e);if(n>=0)return t.splice(n,1)}),n()}),t.onerror=se(ge(r)),t.onblocked=Ne}if(t)throw new Ve.InvalidArgument("Arguments not allowed in db.delete()");Xe?ot.then(o):o()}).uncaught(z)},this.backendDB=function(){return Je},this.isOpen=function(){return null!==Je},this.hasFailed=function(){return null!==Ze},this.dynamicallyOpened=function(){return st},this.name=e,o(this,"tables",{get:function(){return Oe(Ye).map(function(e){return Ye[e]})}}),this.on=B(this,"error","populate","blocked","versionchange",{ready:[I,j]}),this.on.error.subscribe=N("Dexie.on.error",this.on.error.subscribe),this.on.error.unsubscribe=N("Dexie.on.error.unsubscribe",this.on.error.unsubscribe),this.on.ready.subscribe=u(this.on.ready.subscribe,function(e){return function(t,n){fe.vip(function(){et?(Ze||$.resolve().then(t),n&&e(t)):(e(t),n||e(function r(){rt.on.ready.unsubscribe(t),rt.on.ready.unsubscribe(r)}))})}}),jt(function(){rt.on("populate").fire(rt._createTransaction(nt,Qe,Ke)),rt.on("error").fire(new Error)}),this.transaction=function(e,t,r){function o(t){var o=at;t($.resolve().then(function(){return ae(function(){at.transless=at.transless||o;var t=rt._createTransaction(e,l,Ke,u);at.trans=t,u?t.idbtrans=u.idbtrans:t.create();var i=l.map(function(e){return Ye[e]});i.push(t);var s;return $.follow(function(){if(s=r.apply(t,i))if("function"==typeof s.next&&"function"==typeof s["throw"])s=ve(s);else if("function"==typeof s.then&&!n(s,"_PSD"))throw new Ve.IncompatiblePromise("Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: "+r.toString())}).uncaught(z).then(function(){return u&&t._resolve(),t._completion}).then(function(){return s})["catch"](function(e){return t._reject(e),le(e)})})}))}var i=arguments.length;if(i<2)throw new Ve.InvalidArgument("Too few arguments");for(var s=new Array(i-1);--i;)s[i-1]=arguments[i];r=s.pop();var a=k(s),u=at.trans;u&&u.db===rt&&e.indexOf("!")===-1||(u=null);var c=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{var l=a.map(function(e){var t=e instanceof V?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||e==tt)e=tt;else{if("rw"!=e&&e!=nt)throw new Ve.InvalidArgument("Invalid transaction mode: "+e);e=nt}if(u){if(u.mode===tt&&e===nt){if(!c)throw new Ve.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&l.forEach(function(e){if(u&&u.storeNames.indexOf(e)===-1){if(!c)throw new Ve.SubTransaction("Table "+e+" not included in parent transaction.");u=null}})}}catch(f){return u?u._promise(null,function(e,t){t(f)}):le(f,z)}return u?u._promise(e,o,"lock"):rt._whenReady(o)},this.table=function(e){if(xt&&st)return new q(e);if(!n(Ye,e))throw new Ve.InvalidTable("Table "+e+" does not exist");return Ye[e]},r(V.prototype,{_trans:function(e,t,n){var r=at.trans;return r&&r.db===rt?r._promise(e,t,n):H(e,[this.name],t)},_idbstore:function(e,t,n){function r(e,n,r){t(e,n,r.idbtrans.objectStore(i),r)}if(xt)return new $(t);var o=at.trans,i=this.name;return o&&o.db===rt?o._promise(e,r,n):H(e,[this.name],r)},get:function(e,t){var n=this;return this._idbstore(tt,function(t,r,o){xt&&t(n.schema.instanceTemplate);var i=o.get(e);i.onerror=ge(r),i.onsuccess=se(function(){t(n.hook.reading.fire(i.result))},r)}).then(t)},where:function(e){return new Y(this,e)},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new this._collClass(new Y(this,e))},toCollection:function(){return new this._collClass(new Y(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var r=Object.create(e.prototype);t&&pe(r,t),this.schema.instanceTemplate=r;var o=function(t){if(!t)return t;var r=Object.create(e.prototype);for(var o in t)if(n(t,o))try{r[o]=t[o]}catch(i){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),e},defineClass:function(e){return this.mapToClass(fe.defineClass(e),e)}}),i(q).from(V).extend({bulkDelete:function(e){return this.hook.deleting.fire===j?this._idbstore(nt,function(t,n,r,o){t(W(r,o,e,!1,j))}):this.where(":id").anyOf(e)["delete"]().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(nt,function(r,o,i){if(!i.keyPath&&!n.schema.primKey.auto&&!t)throw new Ve.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&t)throw new Ve.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Ve.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var s,a,u=function(e){0===c.length?r(e):o(new L(n.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,f=n;if(n.hook.creating.fire===j&&n.hook.updating.fire===j){a=K(c);for(var p=0,h=e.length;p<h;++p)s=t?i.put(e[p],t[p]):i.put(e[p]),s.onerror=a;s.onerror=K(c,u),s.onsuccess=he(u)}else{var g=t||i.keyPath&&e.map(function(e){return y(e,i.keyPath)}),m=g&&d(g,function(t,n){return null!=t&&[t,e[n]]}),_=g?f.where(":id").anyOf(g.filter(function(e){return null!=e})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null})["catch"](F,function(e){c=e.failures}).then(function(){for(var n=[],r=t&&[],o=g.length-1;o>=0;--o){var i=g[o];(null==i||m[i])&&(n.push(e[o]),t&&r.push(i),null!=i&&(m[i]=null))}return n.reverse(),t&&r.reverse(),f.bulkAdd(n,r)}).then(function(e){var t=g[g.length-1];return null!=t?t:e}):f.bulkAdd(e);_.then(u)["catch"](L,function(e){c=c.concat(e.failures),u()})["catch"](o)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(nt,function(o,i,s,a){function u(e){0===d.length?o(e):i(new L(n.name+".bulkAdd(): "+d.length+" of "+p+" operations failed",d))}if(!s.keyPath&&!n.schema.primKey.auto&&!t)throw new Ve.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new Ve.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Ve.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return o();var c,l,f,d=[],p=e.length;if(r!==j){var m,_=s.keyPath;l=K(d,null,!0),f=ye(null),h(function(){for(var n=0,o=e.length;n<o;++n){m={onerror:null,onsuccess:null};var i=t&&t[n],u=e[n],d=t?i:_?y(u,_):void 0,p=r.call(m,d,u,a);null==d&&null!=p&&(_?(u=b(u),g(u,_,p)):i=p),c=null!=i?s.add(u,i):s.add(u),c._hookCtx=m,n<o-1&&(c.onerror=l,m.onsuccess&&(c.onsuccess=f))}},function(e){throw m.onerror&&m.onerror(e),e}),c.onerror=K(d,u,!0),c.onsuccess=ye(u)}else{l=K(d);for(var v=0,w=e.length;v<w;++v)c=t?s.add(e[v],t[v]):s.add(e[v]),c.onerror=l;c.onerror=K(d,u),c.onsuccess=he(u)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(nt,function(r,o,i,s){var a={onsuccess:null,onerror:null};if(n!==j){var u=null!=t?t:i.keyPath?y(e,i.keyPath):void 0,c=n.call(a,u,e,s);null==u&&null!=c&&(i.keyPath?g(e,i.keyPath,c):t=c)}try{var l=null!=t?i.add(e,t):i.add(e);l._hookCtx=a,l.onerror=me(o),l.onsuccess=ye(function(t){var n=i.keyPath;n&&g(e,n,t),r(t)})}catch(f){throw a.onerror&&a.onerror(f),f}})},put:function(e,t){var n=this,r=this.hook.creating.fire,o=this.hook.updating.fire;return r!==j||o!==j?this._trans(nt,function(r,o,i){var s=void 0!==t?t:n.schema.primKey.keyPath&&y(e,n.schema.primKey.keyPath);null==s?n.add(e).then(r,o):(i._lock(),e=b(e),n.where(":id").equals(s).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):s})["finally"](function(){i._unlock()}).then(r,o))}):this._idbstore(nt,function(n,r,o){var i=void 0!==t?o.put(e,t):o.put(e);i.onerror=ge(r),i.onsuccess=function(t){var r=o.keyPath;r&&g(e,r,t.target.result),n(i.result)}})},"delete":function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e)["delete"]():this._idbstore(nt,function(t,n,r){var o=r["delete"](e);o.onerror=ge(n),o.onsuccess=function(){t(o.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection()["delete"]():this._idbstore(nt,function(e,t,n){var r=n.clear();r.onerror=ge(t),r.onsuccess=function(){e(r.result)}})},update:function(e,t){if("object"!=typeof t||Ee(t))throw new Ve.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||Ee(e))return this.where(":id").equals(e).modify(t);Oe(t).forEach(function(n){g(e,n,t[n])});var n=y(e,this.schema.primKey.keyPath);return void 0===n?le(new Ve.InvalidArgument("Given object does not contain its primary key"),z):this.where(":id").equals(n).modify(t)}}),r(Q.prototype,{_lock:function(){return l(!at.global),++this._reculock,1!==this._reculock||at.global||(at.lockOwnerFor=this),this},_unlock:function(){if(l(!at.global),0===--this._reculock)for(at.global||(at.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ue(e[1],e[0])}catch(t){}}return this},_locked:function(){return this._reculock&&at.lockOwnerFor!==this},create:function(e){var t=this;if(l(!this.idbtrans),!e&&!Je)switch(Ze&&Ze.name){case"DatabaseClosedError":throw new Ve.DatabaseClosed(Ze);
case"MissingAPIError":throw new Ve.MissingAPI(Ze.message,Ze);default:throw new Ve.OpenFailed(Ze)}if(!this.active)throw new Ve.TransactionInactive;return l(null===this._completion._state),e=this.idbtrans=e||Je.transaction(je(this.storeNames),this.mode),e.onerror=se(function(n){_e(n),t._reject(e.error)}),e.onabort=se(function(e){_e(e),t.active&&t._reject(new Ve.Abort),t.active=!1,t.on("abort").fire(e)}),e.oncomplete=se(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this,o=r._locked()?new $(function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},at])}):ae(function(){var o=r.active?new $(function(o,i){if(e===nt&&r.mode!==nt)throw new Ve.ReadOnly("Transaction is readonly");!r.idbtrans&&e&&r.create(),n&&r._lock(),t(o,i,r)}):le(new Ve.TransactionInactive);return r.active&&n&&o["finally"](function(){r._unlock()}),o});return o._lib=!0,o.uncaught(z)},abort:function(){this.active&&this._reject(new Ve.Abort),this.active=!1},tables:{get:N("Transaction.tables",function(){return d(this.storeNames,function(e){return[e,Ye[e]]})},"Use db.tables()")},complete:N("Transaction.complete()",function(e){return this.on("complete",e)}),error:N("Transaction.error()",function(e){return this.on("error",e)}),table:N("Transaction.table()",function(e){if(this.storeNames.indexOf(e)===-1)throw new Ve.InvalidTable("Table "+e+" not in transaction");return Ye[e]})}),r(Y.prototype,function(){function e(e,t,n){var r=e instanceof Y?new e._ctx.collClass(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new e._ctx.collClass(e,function(){return qe.only("")}).limit(0)}function n(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function o(e,t,n,r,o,i){for(var s=Math.min(e.length,r.length),a=-1,u=0;u<s;++u){var c=t[u];if(c!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;o(e[u],c)<0&&(a=u)}return s<r.length&&"next"===i?e+n.substr(e.length):s<e.length&&"prev"===i?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function i(t,i,s,a){function u(e){c=n(e),l=r(e),f="next"===e?Ce:Me;var t=s.map(function(e){return{lower:l(e),upper:c(e)}}).sort(function(e,t){return f(e.lower,t.lower)});d=t.map(function(e){return e.upper}),p=t.map(function(e){return e.lower}),h=e,y="next"===e?"":a}var c,l,f,d,p,h,y,g=s.length;if(!s.every(function(e){return"string"==typeof e}))return e(t,mt);u("next");var m=new t._ctx.collClass(t,function(){return qe.bound(d[0],p[g-1]+a)});m._ondirectionchange=function(e){u(e)};var _=0;return m._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var s=l(r);if(i(s,p,_))return!0;for(var a=null,u=_;u<g;++u){var c=o(r,s,d[u],p[u],f,h);null===c&&null===a?_=u+1:(null===a||f(a,c)>0)&&(a=c)}return t(null!==a?function(){e["continue"](a+y)}:n),!1}),m}return{between:function(n,r,o,i){o=o!==!1,i=i===!0;try{return ie(n,r)>0||0===ie(n,r)&&(o||i)&&(!o||!i)?t(this):new this._ctx.collClass(this,function(){return qe.bound(n,r,!o,!i)})}catch(s){return e(this,gt)}},equals:function(e){return new this._ctx.collClass(this,function(){return qe.only(e)})},above:function(e){return new this._ctx.collClass(this,function(){return qe.lowerBound(e,!0)})},aboveOrEqual:function(e){return new this._ctx.collClass(this,function(){return qe.lowerBound(e)})},below:function(e){return new this._ctx.collClass(this,function(){return qe.upperBound(e,!0)})},belowOrEqual:function(e){return new this._ctx.collClass(this,function(){return qe.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,mt):this.between(t,t+ht,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):i(this,function(e,t){return 0===e.indexOf(t[0])},[e],ht)},equalsIgnoreCase:function(e){return i(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=w.apply(Ae,arguments);return 0===e.length?t(this):i(this,function(e,t){return t.indexOf(e)!==-1},e,"")},startsWithAnyOfIgnoreCase:function(){var e=w.apply(Ae,arguments);return 0===e.length?t(this):i(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,ht)},anyOf:function(){var n=w.apply(Ae,arguments),r=Pe;try{n.sort(r)}catch(o){return e(this,gt)}if(0===n.length)return t(this);var i=new this._ctx.collClass(this,function(){return qe.bound(n[0],n[n.length-1])});i._ondirectionchange=function(e){r="next"===e?Pe:Se,n.sort(r)};var s=0;return i._addAlgorithm(function(e,t,o){for(var i=e.key;r(i,n[s])>0;)if(++s,s===n.length)return t(o),!1;return 0===r(i,n[s])||(t(function(){e["continue"](n[s])}),!1)}),i},notEqual:function(e){return this.inAnyRange([[-(1/0),e],[e,yt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=w.apply(Ae,arguments);if(0===t.length)return new this._ctx.collClass(this);try{t.sort(Pe)}catch(n){return e(this,gt)}var r=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]},null);return r.push([t[t.length-1],yt]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function o(e,t){for(var n=0,r=e.length;n<r;++n){var o=e[n];if(ie(t[0],o[1])<0&&ie(t[1],o[0])>0){o[0]=ce(o[0],t[0]),o[1]=de(o[1],t[1]);break}}return n===r&&e.push(t),e}function i(e,t){return f(e[0],t[0])}function s(e){return!h(e)&&!y(e)}var a=this._ctx;if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&Pe(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ve.InvalidArgument);var u,c=!r||r.includeLowers!==!1,l=r&&r.includeUppers===!0,f=Pe;try{u=n.reduce(o,[]),u.sort(i)}catch(d){return e(this,gt)}var p=0,h=l?function(e){return Pe(e,u[p][1])>0}:function(e){return Pe(e,u[p][1])>=0},y=c?function(e){return Se(e,u[p][0])>0}:function(e){return Se(e,u[p][0])>=0},g=h,m=new a.collClass(this,function(){return qe.bound(u[0][0],u[u.length-1][1],!c,!l)});return m._ondirectionchange=function(e){"next"===e?(g=h,f=Pe):(g=y,f=Se),u.sort(i)},m._addAlgorithm(function(e,t,n){for(var r=e.key;g(r);)if(++p,p===u.length)return t(n),!1;return!!s(r)||0!==ie(r,u[p][1])&&0!==ie(r,u[p][0])&&(t(function(){f===Pe?e["continue"](u[p][0]):e["continue"](u[p][1])}),!1)}),m},startsWithAnyOf:function(){var n=w.apply(Ae,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+ht]})):e(this,"startsWithAnyOf() only works with strings")}}}),r(J.prototype,function(){function e(e,t){e.filter=Ie(e.filter,t)}function r(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ie(r(),t())}:t,e.justLimit=n&&!r}function o(e,t){e.isMatch=Ie(e.isMatch,t)}function i(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new Ve.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function s(e,t){var n=i(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function a(e,t,r,o,i){var a=e.replayFilter?Ie(e.filter,e.replayFilter()):e.filter;e.or?function(){function u(){2===++f&&r()}function c(e,r,i){if(!a||a(r,i,u,o)){var s=r.primaryKey.toString();n(l,s)||(l[s]=!0,t(e,r,i))}}var l={},f=0;e.or._iterate(c,u,o,i),re(s(e,i),e.algorithm,c,u,o,!e.keysOnly&&e.valueMapper)}():re(s(e,i),Ie(e.algorithm,a),t,r,o,!e.keysOnly&&e.valueMapper)}function u(e){return e.table.schema.instanceTemplate}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,function(e,t){t(n.error)}):n.table._idbstore(tt,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,function(e,n){n(t.error)}):t.table._idbstore(nt,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Ie(t.algorithm,e)},_iterate:function(e,t,n,r){return a(this._ctx,e,t,n,r)},clone:function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&t(r,e),n._ctx=r,n},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;if(xt){var n=u(t),r=t.table.schema.primKey.keyPath,o=y(n,t.index?t.table.schema.idxByName[t.index].keyPath:r),i=y(n,r);e(n,{key:o,primaryKey:i})}return this._read(function(n,r,o){a(t,e,n,r,o)})},count:function(e){if(xt)return $.resolve(0).then(e);var t=this._ctx;if(Z(t,!0))return this._read(function(e,n,r){var o=i(t,r),s=t.range?o.count(t.range):o.count();s.onerror=ge(n),s.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,o){a(t,function(){return++n,!1},function(){e(n)},r,o)},e)},sortBy:function(e,t){function n(e,t){return t?n(e[o[t]],t-1):e[i]}function r(e,t){var r=n(e,s),o=n(t,s);return r<o?-a:r>o?a:0}var o=e.split(".").reverse(),i=o[0],s=o.length-1,a="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,r){if(xt&&e([u(t)]),Le&&"next"===t.dir&&Z(t,!0)&&t.limit>0){var o=t.table.hook.reading.fire,s=i(t,r),c=t.limit<1/0?s.getAll(t.range,t.limit):s.getAll(t.range);c.onerror=ge(n),c.onsuccess=o===x?he(e):se(he(function(t){try{e(t.map(o))}catch(r){n(r)}}))}else{var l=[];a(t,function(e){l.push(e)},function(){e(l)},n,r)}},e)},offset:function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,Z(t)?r(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):r(t,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),r(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(t,n){var r=this._ctx;return xt&&t(u(r)),e(this._ctx,function(e,r,o){return!t(e.value)||(r(o),n)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){return xt&&t(u(this._ctx)),e(this._ctx,function(e){return t(e.value)}),o(this._ctx,t),this},and:function(e){return this.filter(e)},or:function(e){return new Y(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(Le&&"next"===t.dir&&Z(t,!0)&&t.limit>0)return this._read(function(e,n,r){var o=i(t,r),s=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);s.onerror=ge(n),s.onsuccess=he(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var o={};return e(this._ctx,function(e){var t=e.primaryKey.toString(),r=n(o,t);return o[t]=!0,!r}),this}}}),i(X).from(J).extend({modify:function(e){var r=this,o=this._ctx,i=o.table.hook,s=i.updating.fire,a=i.deleting.fire;return xt&&"function"==typeof e&&e.call({value:o.table.schema.instanceTemplate},o.table.schema.instanceTemplate),this._write(function(o,i,u,c){function l(e,t){function r(e){return P.push(e),S.push(o.primKey),d(),!0}C=t.primaryKey;var o={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};if(p.call(o,e,o)!==!1){var i=!n(o,"value");++x,h(function(){var e=i?t["delete"]():t.update(o.value);e._hookCtx=o,e.onerror=me(r),e.onsuccess=ye(function(){++O,d()})},r)}else o.onsuccess&&o.onsuccess(o.value)}function f(e){return e&&(P.push(e),S.push(C)),i(new F("Error modifying one or more objects",P,O,S))}function d(){E&&O+P.length===x&&(P.length>0?f():o(O))}var p;if("function"==typeof e)p=s===j&&a===j?e:function(t){var r=b(t);if(e.call(this,t,this)===!1)return!1;if(n(this,"value")){var o=v(r,this.value),i=s.call(this,o,this.primKey,r,c);i&&(t=this.value,Oe(i).forEach(function(e){g(t,e,i[e])}))}else a.call(this,this.primKey,t,c)};else if(s===j){var m=Oe(e),w=m.length;p=function(t){for(var n=!1,r=0;r<w;++r){var o=m[r],i=e[o];y(t,o)!==i&&(g(t,o,i),n=!0)}return n}}else{var k=e;e=_(k),p=function(n){var r=!1,o=s.call(this,e,this.primKey,b(n),c);return o&&t(e,o),Oe(e).forEach(function(t){var o=e[t];y(n,t)!==o&&(g(n,t,o),r=!0)}),o&&(e=_(k)),r}}var x=0,O=0,E=!1,P=[],S=[],C=null;r.clone().raw()._iterate(l,function(){E=!0,d()},f,u)})},"delete":function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,o=r!==j;if(!o&&Z(t)&&(t.isPrimKey&&!wt||!n))return this._write(function(e,t,r){var o=ge(t),i=n?r.count(n):r.count();i.onerror=o,i.onsuccess=function(){var s=i.result;h(function(){var t=n?r["delete"](n):r.clear();t.onerror=o,t.onsuccess=function(){return e(s)}},function(e){return t(e)})}});var i=o?2e3:1e4;return this._write(function(n,s,a,u){var c=0,l=e.clone({keysOnly:!t.isMatch&&!o}).distinct().limit(i).raw(),f=[],d=function(){return l.each(o?function(e,t){f.push([t.primaryKey,t.value])}:function(e,t){f.push(t.primaryKey)}).then(function(){return o?f.sort(function(e,t){return Pe(e[0],t[0])}):f.sort(Pe),W(a,u,f,o,r)}).then(function(){var e=f.length;return c+=e,f=[],e<i?c:d()})};n(d())})}}),t(this,{Collection:J,Table:V,Transaction:Q,Version:m,WhereClause:Y,WriteableCollection:X,WriteableTable:q}),f(),$e.forEach(function(e){e(rt)})}function de(e){if("function"==typeof e)return new e;if(Ee(e))return[de(e[0])];if(e&&"object"==typeof e){var t={};return pe(t,e),t}return e}function pe(e,t){return Oe(t).forEach(function(n){var r=de(t[n]);e[n]=r}),e}function he(e){return function(t){e(t.target.result)}}function ye(e){return se(function(t){var n=t.target,r=n.result,o=n._hookCtx,i=o&&o.onsuccess;i&&i(r),e&&e(r)},e)}function ge(e){return function(t){return _e(t),e(t.target.error),!1}}function me(e){return se(function(t){var n=t.target,r=n.error,o=n._hookCtx,i=o&&o.onerror;return i&&i(r),_e(t),e(r),!1})}function _e(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function be(e){var t,n=fe.dependencies.localStorage;if(!n)return e([]);try{t=JSON.parse(n.getItem("Dexie.DatabaseNames")||"[]")}catch(r){t=[]}e(t)&&n.setItem("Dexie.DatabaseNames",JSON.stringify(t))}function ve(e){function t(e){return function(t){var n=e(t),r=n.value;return n.done?r:r&&"function"==typeof r.then?r.then(o,i):Ee(r)?$.all(r).then(o,i):o(r)}}var n=function(t){return e.next(t)},r=function(t){return e["throw"](t)},o=t(n),i=t(r);return t(n)()}function we(e,t,n,r,o,i,s){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=o,this.compound=i,this.dotted=s;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(o?"++":"")+a}function ke(e,t,n,r){this.name=e,this.primKey=t||new we,this.indexes=n||[new we],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=d(n,function(e){return[e.name,e]})}function je(e){return 1===e.length?e[0]:e}function xe(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}var Oe=Object.keys,Ee=Array.isArray,Pe="undefined"!=typeof self?self:"undefined"!=typeof window?window:e,Se=Object.getPrototypeOf,Ce={}.hasOwnProperty,Me=Object.getOwnPropertyDescriptor,Ie=[].slice,Re="undefined"!=typeof Symbol&&Symbol.iterator,Te=Re?function(e){var t;return null!=e&&(t=e[Re])&&t.apply(e)}:function(){return null},Ae={},Ne=[].concat,De="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Ue=function(){return!0},Fe=!new Error("").stack,Le=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"],Ge=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Be=Le.concat(Ge),$e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};i(D).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+A(this._e,2))}},toString:function(){return this.name+": "+this.message}}),i(F).from(D),i(L).from(D);var ze=Be.reduce(function(e,t){return e[t]=t+"Error",e},{}),He=D,Ve=Be.reduce(function(e,t){function n(e,n){this._e=T(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=$e[t]||r,this.inner=null)}var r=t+"Error";return i(n).from(He),e[t]=n,e},{});Ve.Syntax=SyntaxError,Ve.Type=TypeError,Ve.Range=RangeError;var qe=Ge.reduce(function(e,t){return e[t+"Error"]=Ve[t],e},{}),Ke=Be.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Ve[t]),e},{});Ke.ModifyError=F,Ke.DexieError=D,Ke.BulkError=L;var We={},Qe=100,Ye=20,Je=!1,Ze=Pe.setImmediate?setImmediate.bind(null,J):Pe.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){J(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(J,0)},Xe=function(e,t){ut.push([e,t]),tt&&(Ze(),tt=!1)},et=!0,tt=!0,nt=[],rt=[],ot=null,it=x,st={global:!0,ref:0,unhandleds:[],onunhandled:ce,finalize:function(){this.unhandleds.forEach(function(e){try{ce(e[0],e[1])}catch(t){}})}},at=st,ut=[],ct=0,lt=[];r($.prototype,{then:function(e,t){var n=this,r=new $(function(r,o){K(n,new z(e,t,r,o))});return De&&(!this._prev||null===this._state)&&Y(r,this),r},_then:function(e,t){K(this,new z(null,null,e,t))},"catch":function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):ie(e)}):this.then(null,function(e){return e&&e.name===t?n(e):ie(e)})},"finally":function(e){return this.then(function(t){return e(),t},function(t){return e(),ie(t)})},uncaught:function(e){var t=this;return this.onuncatched=M(this.onuncatched,e),this._state===!1&&nt.indexOf(this)===-1&&nt.some(function(e,n,r){return e._value===t._value&&(r[n]=t)}),this},stack:{get:function(){if(this._stack)return this._stack;try{Je=!0;var e=Q(this,[],Ye),t=e.join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{Je=!1}}}}),r($,{all:function(){var e=w.apply(null,arguments);return new $(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(o,i){return $.resolve(o).then(function(n){e[i]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof $?e:e&&"function"==typeof e.then?new $(function(t,n){e.then(t,n)}):new $(We,(!0),e)},reject:ie,race:function(){var e=w.apply(null,arguments);return new $(function(t,n){e.map(function(e){return $.resolve(e).then(t,n)})})},PSD:{get:function(){return at},set:function(e){return at=e}},newPSD:ae,usePSD:ue,scheduler:{get:function(){return Xe},set:function(e){Xe=e}},rejectionMapper:{get:function(){return it},set:function(e){it=e}},follow:function(e){return new $(function(t,n){return ae(function(t,n){var r=at;r.unhandleds=[],r.onunhandled=n,r.finalize=E(function(){var e=this;te(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n)})},on:B(null,{error:[M,oe]})});var ft=$.on.error;ft.subscribe=N("Promise.on('error')",ft.subscribe),ft.unsubscribe=N("Promise.on('error').unsubscribe",ft.unsubscribe);var dt="unhandledrejection";c(function(){Xe=function(e,t){setTimeout(function(){e.apply(null,t)},0)}});var pt="1.5.1",ht=String.fromCharCode(65535),yt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return ht}}(),gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mt="String expected.",_t=[],bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vt=bt,wt=bt,kt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};R(De,kt);var jt=function(){},xt=!1,Ot=Pe.idbModules&&Pe.idbModules.shimIndexedDB?Pe.idbModules:{};return r(fe,Ke),r(fe,{"delete":function(e){var t=new fe(e),n=t["delete"]();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new fe(e).open().then(function(e){return e.close(),!0})["catch"](fe.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){return new $(function(e,t){var n=xe(indexedDB);if(n){var r=n();r.onsuccess=function(t){e(a(t.target.result,0))},r.onerror=ge(t)}else be(function(t){return e(t),!1})}).then(e)},defineClass:function(e){function n(n){n?t(this,n):xt&&pe(this,e)}return n},applyStructure:pe,ignoreTransaction:function(e){return at.trans?ue(at.transless,e):e()},vip:function(e){return ae(function(){return at.letThrough=!0,e()})},async:function(e){return function(){try{var t=ve(e.apply(this,arguments));return t&&"function"==typeof t.then?t:$.resolve(t)}catch(n){return le(n)}}},spawn:function(e,t,n){try{var r=ve(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:$.resolve(r)}catch(o){return le(o)}},currentTransaction:{get:function(){return at.trans||null}},Promise:$,debug:{get:function(){return De},set:function(e){R(e,"dexie"===e?function(){return!0}:kt)}},derive:i,extend:t,props:r,override:u,Events:B,events:{get:N(function(){return B})},getByKeyPath:y,setByKeyPath:g,delByKeyPath:m,shallowClone:_,deepClone:b,getObjectDiff:v,asap:f,maxKey:yt,addons:[],connections:_t,MultiModifyError:Ve.Modify,errnames:ze,IndexSpec:we,TableSchema:ke,dependencies:{indexedDB:Ot.shimIndexedDB||Pe.indexedDB||Pe.mozIndexedDB||Pe.webkitIndexedDB||Pe.msIndexedDB,IDBKeyRange:Ot.IDBKeyRange||Pe.IDBKeyRange||Pe.webkitIDBKeyRange},semVer:pt,version:pt.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),fakeAutoComplete:jt,"default":fe}),h(function(){fe.dependencies.localStorage=null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:Pe.localStorage}),$.rejectionMapper=G,c(function(){fe.fakeAutoComplete=jt=c,fe.fake=xt=!0}),fe})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,r){(function(o){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.minibus=e()}}(function(){return function t(n,r,o){function i(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return i(t?t:e)},f,f.exports,t,n,r,o)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":12}],2:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":13}],3:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":14}],4:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":15}],5:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":16}],6:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":17}],7:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/define-property"),i=r(o);n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":2}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=r(o),s=e("../core-js/object/create"),a=r(s),u=e("../helpers/typeof"),c=r(u);n["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,a["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},{"../core-js/object/create":1,"../core-js/object/set-prototype-of":4,"../helpers/typeof":11}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../helpers/typeof"),i=r(o);n["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":11}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/symbol/iterator"),i=r(o),s=e("../core-js/symbol"),a=r(s),u="function"==typeof a["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":typeof e};n["default"]="function"==typeof a["default"]&&"symbol"===u(i["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},{"../core-js/symbol":5,"../core-js/symbol/iterator":6}],12:[function(e,t,n){e("../../modules/es6.object.create");var r=e("../../modules/_core").Object;t.exports=function(e,t){return r.create(e,t)}},{"../../modules/_core":23,"../../modules/es6.object.create":77}],13:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":23,"../../modules/es6.object.define-property":78}],14:[function(e,t,n){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":23,"../../modules/es6.object.get-prototype-of":79}],15:[function(e,t,n){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":23,"../../modules/es6.object.set-prototype-of":80}],16:[function(e,t,n){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":23,"../../modules/es6.object.to-string":81,"../../modules/es6.symbol":83,"../../modules/es7.symbol.async-iterator":84,"../../modules/es7.symbol.observable":85}],17:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":74,"../../modules/es6.string.iterator":82,"../../modules/web.dom.iterable":86}],18:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],19:[function(e,t,n){t.exports=function(){}},{}],20:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":39}],21:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,n,s){var a,u=r(t),c=o(u.length),l=i(s,c);if(e&&n!=n){for(;c>l;)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},{"./_to-index":66,"./_to-iobject":68,"./_to-length":69}],22:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],23:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],24:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":18}],25:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],26:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":31}],27:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":32,"./_is-object":39}],28:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],29:[function(e,t,n){var r=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=r(e),n=o.f;if(n)for(var s,a=n(e),u=i.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":53,"./_object-keys":56,"./_object-pie":57}],30:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),s=e("./_hide"),a="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,g=e&u.B,m=e&u.W,_=p?o:o[t]||(o[t]={}),b=_[a],v=p?r:h?r[t]:(r[t]||{})[a];p&&(n=t);for(c in n)l=!d&&v&&void 0!==v[c],l&&c in _||(f=l?v[c]:n[c],_[c]=p&&"function"!=typeof v[c]?n[c]:g&&l?i(f,r):m&&v[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((_.virtual||(_.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&s(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":23,"./_ctx":24,"./_global":32,"./_hide":34}],31:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],32:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],33:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],34:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":26,"./_object-dp":48,"./_property-desc":59}],35:[function(e,t,n){t.exports=e("./_global").document&&document.documentElement},{"./_global":32}],36:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){
return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":26,"./_dom-create":27,"./_fails":31}],37:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":22}],38:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":22}],39:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],40:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(s,{next:o(1,n)}),i(e,t+" Iterator")}},{"./_hide":34,"./_object-create":47,"./_property-desc":59,"./_set-to-string-tag":62,"./_wks":75}],41:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),i=e("./_redefine"),s=e("./_hide"),a=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",g="values",m=function(){return this};t.exports=function(e,t,n,_,b,v,w){c(n,t,_);var k,j,x,O=function(e){if(!p&&e in C)return C[e];switch(e){case y:return function(){return new n(this,e)};case g:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",P=b==g,S=!1,C=e.prototype,M=C[d]||C[h]||b&&C[b],I=M||O(b),R=b?P?O("entries"):I:void 0,T="Array"==t?C.entries||M:M;if(T&&(x=f(T.call(new e)),x!==Object.prototype&&(l(x,E,!0),r||a(x,d)||s(x,d,m))),P&&M&&M.name!==g&&(S=!0,I=function(){return M.call(this)}),r&&!w||!p&&!S&&C[d]||s(C,d,I),u[t]=I,u[E]=m,b)if(k={values:P?I:O(g),keys:v?I:O(y),entries:R},w)for(j in k)j in C||i(C,j,k[j]);else o(o.P+o.F*(p||S),t,k);return k}},{"./_export":30,"./_has":33,"./_hide":34,"./_iter-create":40,"./_iterators":43,"./_library":45,"./_object-gpo":54,"./_redefine":60,"./_set-to-string-tag":62,"./_wks":75}],42:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],43:[function(e,t,n){t.exports={}},{}],44:[function(e,t,n){var r=e("./_object-keys"),o=e("./_to-iobject");t.exports=function(e,t){for(var n,i=o(e),s=r(i),a=s.length,u=0;a>u;)if(i[n=s[u++]]===t)return n}},{"./_object-keys":56,"./_to-iobject":68}],45:[function(e,t,n){t.exports=!0},{}],46:[function(e,t,n){var r=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),s=e("./_object-dp").f,a=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return c&&h.NEED&&u(e)&&!i(e,r)&&l(e),e},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},{"./_fails":31,"./_has":33,"./_is-object":39,"./_object-dp":48,"./_uid":72}],47:[function(e,t,n){var r=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,n=e("./_dom-create")("iframe"),r=i.length,o="<",s=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),c=t.F;r--;)delete c[u][i[r]];return c()};t.exports=Object.create||function(e,t){var n;return null!==e?(a[u]=r(e),n=new a,a[u]=null,n[s]=e):n=c(),void 0===t?n:o(n,t)}},{"./_an-object":20,"./_dom-create":27,"./_enum-bug-keys":28,"./_html":35,"./_object-dps":49,"./_shared-key":63}],48:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),s=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":20,"./_descriptors":26,"./_ie8-dom-define":36,"./_to-primitive":71}],49:[function(e,t,n){var r=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,s=i(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},{"./_an-object":20,"./_descriptors":26,"./_object-dp":48,"./_object-keys":56}],50:[function(e,t,n){var r=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?c:function(e,t){if(e=i(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(a(e,t))return o(!r.f.call(e,t),e[t])}},{"./_descriptors":26,"./_has":33,"./_ie8-dom-define":36,"./_object-pie":57,"./_property-desc":59,"./_to-iobject":68,"./_to-primitive":71}],51:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(e){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==i.call(e)?a(e):o(r(e))}},{"./_object-gopn":52,"./_to-iobject":68}],52:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},{"./_enum-bug-keys":28,"./_object-keys-internal":55}],53:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],54:[function(e,t,n){var r=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":33,"./_shared-key":63,"./_to-object":70}],55:[function(e,t,n){var r=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,a=o(e),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~i(c,n)||c.push(n));return c}},{"./_array-includes":21,"./_has":33,"./_shared-key":63,"./_to-iobject":68}],56:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":28,"./_object-keys-internal":55}],57:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],58:[function(e,t,n){var r=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",s)}},{"./_core":23,"./_export":30,"./_fails":31}],59:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],60:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":34}],61:[function(e,t,n){var r=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r("./_ctx")(Function.call,r("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},{"./_an-object":20,"./_ctx":24,"./_is-object":39,"./_object-gopd":50}],62:[function(e,t,n){var r=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"./_has":33,"./_object-dp":48,"./_wks":75}],63:[function(e,t,n){var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":64,"./_uid":72}],64:[function(e,t,n){var r=e("./_global"),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":32}],65:[function(e,t,n){var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var i,s,a=String(o(t)),u=r(n),c=a.length;return u<0||u>=c?e?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},{"./_defined":25,"./_to-integer":67}],66:[function(e,t,n){var r=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":67}],67:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],68:[function(e,t,n){var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":25,"./_iobject":37}],69:[function(e,t,n){var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":67}],70:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":25}],71:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":39}],72:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],73:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":23,"./_global":32,"./_library":45,"./_object-dp":48,"./_wks-ext":74}],74:[function(e,t,n){n.f=e("./_wks")},{"./_wks":75}],75:[function(e,t,n){var r=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,s="function"==typeof i,a=t.exports=function(e){return r[e]||(r[e]=s&&i[e]||(s?i:o)("Symbol."+e))};a.store=r},{"./_global":32,"./_shared":64,"./_uid":72}],76:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":19,"./_iter-define":41,"./_iter-step":42,"./_iterators":43,"./_to-iobject":68}],77:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":30,"./_object-create":47}],78:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":26,"./_export":30,"./_object-dp":48}],79:[function(e,t,n){var r=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(r(e))}})},{"./_object-gpo":54,"./_object-sap":58,"./_to-object":70}],80:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":30,"./_set-proto":61}],81:[function(e,t,n){},{}],82:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":41,"./_string-at":65}],83:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_has"),i=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),d=e("./_uid"),p=e("./_wks"),h=e("./_wks-ext"),y=e("./_wks-define"),g=e("./_keyof"),m=e("./_enum-keys"),_=e("./_is-array"),b=e("./_an-object"),v=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),j=e("./_object-create"),x=e("./_object-gopn-ext"),O=e("./_object-gopd"),E=e("./_object-dp"),P=e("./_object-keys"),S=O.f,C=E.f,M=x.f,I=r.Symbol,R=r.JSON,T=R&&R.stringify,A="prototype",N=p("_hidden"),D=p("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),L=l("symbols"),G=l("op-symbols"),B=Object[A],$="function"==typeof I,z=r.QObject,H=!z||!z[A]||!z[A].findChild,V=i&&c(function(){return 7!=j(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=S(B,t);r&&delete B[t],C(e,t,n),r&&e!==B&&C(B,t,r)}:C,q=function(e){var t=L[e]=j(I[A]);return t._k=e,t},K=$&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},W=function(e,t,n){return e===B&&W(G,t,n),b(e),t=w(t,!0),b(n),o(L,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=j(n,{enumerable:k(0,!1)})):(o(e,N)||C(e,N,k(1,{})),e[N][t]=!0),V(e,t,n)):C(e,t,n)},Q=function(e,t){b(e);for(var n,r=m(t=v(t)),o=0,i=r.length;i>o;)W(e,n=r[o++],t[n]);return e},Y=function(e,t){return void 0===t?j(e):Q(j(e),t)},J=function(e){var t=U.call(this,e=w(e,!0));return!(this===B&&o(L,e)&&!o(G,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,N)&&this[N][e])||t)},Z=function(e,t){if(e=v(e),t=w(t,!0),e!==B||!o(L,t)||o(G,t)){var n=S(e,t);return!n||!o(L,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=M(v(e)),r=[],i=0;n.length>i;)o(L,t=n[i++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===B,r=M(n?G:v(e)),i=[],s=0;r.length>s;)!o(L,t=r[s++])||n&&!o(B,t)||i.push(L[t]);return i};$||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(G,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),V(this,e,k(1,n))};return i&&H&&V(B,e,{configurable:!0,set:t}),q(e)},a(I[A],"toString",function(){return this._k}),O.f=Z,E.f=W,e("./_object-gopn").f=x.f=X,e("./_object-pie").f=J,e("./_object-gops").f=ee,i&&!e("./_library")&&a(B,"propertyIsEnumerable",J,!0),h.f=function(e){return q(p(e))}),s(s.G+s.W+s.F*!$,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var te=P(p.store),ne=0;te.length>ne;)y(te[ne++]);s(s.S+s.F*!$,"Symbol",{"for":function(e){return o(F,e+="")?F[e]:F[e]=I(e)},keyFor:function(e){if(K(e))return g(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!$,"Object",{create:Y,defineProperty:W,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:ee}),R&&s(s.S+s.F*(!$||c(function(){var e=I();return"[null]"!=T([e])||"{}"!=T({a:e})||"{}"!=T(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!K(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&_(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,T.apply(R,r)}}}),I[A][D]||e("./_hide")(I[A],D,I[A].valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},{"./_an-object":20,"./_descriptors":26,"./_enum-keys":29,"./_export":30,"./_fails":31,"./_global":32,"./_has":33,"./_hide":34,"./_is-array":38,"./_keyof":44,"./_library":45,"./_meta":46,"./_object-create":47,"./_object-dp":48,"./_object-gopd":50,"./_object-gopn":52,"./_object-gopn-ext":51,"./_object-gops":53,"./_object-keys":56,"./_object-pie":57,"./_property-desc":59,"./_redefine":60,"./_set-to-string-tag":62,"./_shared":64,"./_to-iobject":68,"./_to-primitive":71,"./_uid":72,"./_wks":75,"./_wks-define":73,"./_wks-ext":74}],84:[function(e,t,n){e("./_wks-define")("asyncIterator")},{"./_wks-define":73}],85:[function(e,t,n){e("./_wks-define")("observable")},{"./_wks-define":73}],86:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),o=e("./_hide"),i=e("./_iterators"),s=e("./_wks")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=r[c],f=l&&l.prototype;f&&!f[s]&&o(f,s,c),i[c]=i.Array}},{"./_global":32,"./_hide":34,"./_iterators":43,"./_wks":75,"./es6.array.iterator":76}],87:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),s=e("babel-runtime/helpers/createClass"),a=r(s),u=function(){function e(){(0,i["default"])(this,e);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=5e3,t._responseCallbacks={},t._registerExternalListener()}return(0,a["default"])(e,[{key:"addListener",value:function(e,t){var n=this,r=new c(n._subscriptions,e,t),o=n._subscriptions[e];return o||(o=[],n._subscriptions[e]=o),o.push(r),r}},{key:"addResponseListener",value:function(e,t,n){this._responseCallbacks[e+t]=n}},{key:"removeResponseListener",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:"removeAllListenersOf",value:function(e){delete this._subscriptions[e]}},{key:"bind",value:function(e,t,n){var r=this,o=this,i=o.addListener(e,function(e){n.postMessage(e)}),s=n.addListener(t,function(e){o.postMessage(e)});return{thisListener:i,targetListener:s,unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:"_publishOnDefault",value:function(e){var t=this._subscriptions["*"];t&&this._publishOn(t,e)}},{key:"_publishOn",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:"_responseCallback",value:function(e,t){var n=this;t&&!function(){var r=e.from+e.id;n._responseCallbacks[r]=t,setTimeout(function(){var t=n._responseCallbacks[r];if(delete n._responseCallbacks[r],t){var o={id:e.id,type:"response",body:{code:408,desc:"Response timeout!",value:e}};t(o)}},n._responseTimeOut)}()}},{key:"_onResponse",value:function(e){var t=this;if("response"===e.type){var n=e.to+e.id,r=t._responseCallbacks[n];if(e.body.code>=200&&delete t._responseCallbacks[n],r)return r(e),!0}return!1}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?t._publishOn(n,e):t._publishOnDefault(e)}}},{key:"_genId",value:function(e){e.id&&0!==e.id||(this._msgId++,e.id=this._msgId)}},{key:"postMessage",value:function(e,t){}},{key:"_onPostMessage",value:function(e){}},{key:"_registerExternalListener",value:function(){}}]),e}(),c=function(){function e(t,n,r){(0,i["default"])(this,e);var o=this;o._subscriptions=t,o._url=n,o._callback=r}return(0,a["default"])(e,[{key:"remove",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var n=t.indexOf(e);t.splice(n,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:"url",get:function(){return this._url}}]),e}();n["default"]=u,t.exports=n["default"]},{"babel-runtime/helpers/classCallCheck":7,"babel-runtime/helpers/createClass":8}],88:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(l),d=e("babel-runtime/helpers/inherits"),p=r(d),h=e("./Bus"),y=r(h),g=function(e){function t(){return(0,a["default"])(this,t),(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"postMessage",value:function(e,t){var n=this;return n._genId(e),n._responseCallback(e,t),n._onPostMessage(e),e.id}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?(t._publishOn(n,e),e.to.startsWith("hyperty")||t._publishOnDefault(e)):t._publishOnDefault(e)}}}]),t}(y["default"]);n["default"]=g,t.exports=n["default"]},{"./Bus":87,"babel-runtime/core-js/object/get-prototype-of":3,"babel-runtime/helpers/classCallCheck":7,"babel-runtime/helpers/createClass":8,"babel-runtime/helpers/inherits":9,"babel-runtime/helpers/possibleConstructorReturn":10}],89:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./bus/MiniBus"),i=r(o);n["default"]=i["default"],t.exports=n["default"]},{"./bus/MiniBus":88}]},{},[89])(89)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,r){(function(o){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.sandbox=e()}}(function(){return function t(n,r,o){function i(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return i(t?t:e)},f,f.exports,t,n,r,o)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":13}],2:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":14}],3:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":15}],4:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":16}],5:[function(e,t,n){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":17}],6:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":18}],7:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":19}],8:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/define-property"),i=r(o);n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":2}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=r(o),s=e("../core-js/object/create"),a=r(s),u=e("../helpers/typeof"),c=r(u);n["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,a["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},{"../core-js/object/create":1,"../core-js/object/set-prototype-of":4,"../helpers/typeof":12}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../helpers/typeof"),i=r(o);n["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":12}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/symbol/iterator"),i=r(o),s=e("../core-js/symbol"),a=r(s),u="function"==typeof a["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":typeof e};n["default"]="function"==typeof a["default"]&&"symbol"===u(i["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},{"../core-js/symbol":6,"../core-js/symbol/iterator":7}],13:[function(e,t,n){e("../../modules/es6.object.create");var r=e("../../modules/_core").Object;t.exports=function(e,t){return r.create(e,t)}},{"../../modules/_core":27,"../../modules/es6.object.create":92}],14:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":27,"../../modules/es6.object.define-property":93}],15:[function(e,t,n){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":27,"../../modules/es6.object.get-prototype-of":94}],16:[function(e,t,n){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":27,"../../modules/es6.object.set-prototype-of":95}],17:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":27,"../modules/es6.object.to-string":96,"../modules/es6.promise":97,"../modules/es6.string.iterator":98,"../modules/web.dom.iterable":102}],18:[function(e,t,n){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":27,"../../modules/es6.object.to-string":96,"../../modules/es6.symbol":99,"../../modules/es7.symbol.async-iterator":100,"../../modules/es7.symbol.observable":101}],19:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":88,"../../modules/es6.string.iterator":98,"../../modules/web.dom.iterable":102}],20:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],21:[function(e,t,n){t.exports=function(){}},{}],22:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],23:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":46}],24:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,n,s){var a,u=r(t),c=o(u.length),l=i(s,c);if(e&&n!=n){for(;c>l;)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},{"./_to-index":80,"./_to-iobject":82,"./_to-length":83}],25:[function(e,t,n){var r=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":26,"./_wks":89}],26:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],27:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],28:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":20}],29:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],30:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":35}],31:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":37,"./_is-object":46}],32:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],33:[function(e,t,n){var r=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=r(e),n=o.f;if(n)for(var s,a=n(e),u=i.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":63,"./_object-keys":66,"./_object-pie":67}],34:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),s=e("./_hide"),a="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,g=e&u.B,m=e&u.W,_=p?o:o[t]||(o[t]={}),b=_[a],v=p?r:h?r[t]:(r[t]||{})[a];p&&(n=t);for(c in n)l=!d&&v&&void 0!==v[c],l&&c in _||(f=l?v[c]:n[c],_[c]=p&&"function"!=typeof v[c]?n[c]:g&&l?i(f,r):m&&v[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((_.virtual||(_.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&s(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":27,"./_ctx":28,"./_global":37,"./_hide":39}],35:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],36:[function(e,t,n){var r=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={},n=t.exports=function(e,t,n,f,d){var p,h,y,g,m=d?function(){return e}:u(e),_=r(n,f,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(i(m)){for(p=a(e.length);p>b;b++)if(g=t?_(s(h=e[b])[0],h[1]):_(e[b]),g===c||g===l)return g}else for(y=m.call(e);!(h=y.next()).done;)if(g=o(y,_,h.value,t),g===c||g===l)return g};n.BREAK=c,n.RETURN=l},{"./_an-object":23,"./_ctx":28,"./_is-array-iter":44,"./_iter-call":47,"./_to-length":83,"./core.get-iterator-method":90}],37:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],38:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],39:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":30,"./_object-dp":58,"./_property-desc":69}],40:[function(e,t,n){t.exports=e("./_global").document&&document.documentElement},{"./_global":37}],41:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":30,"./_dom-create":31,"./_fails":35}],42:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],43:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":26}],44:[function(e,t,n){var r=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},{"./_iterators":52,
"./_wks":89}],45:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":26}],46:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],47:[function(e,t,n){var r=e("./_an-object");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e["return"];throw void 0!==i&&r(i.call(e)),t}}},{"./_an-object":23}],48:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(s,{next:o(1,n)}),i(e,t+" Iterator")}},{"./_hide":39,"./_object-create":57,"./_property-desc":69,"./_set-to-string-tag":74,"./_wks":89}],49:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),i=e("./_redefine"),s=e("./_hide"),a=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",g="values",m=function(){return this};t.exports=function(e,t,n,_,b,v,w){c(n,t,_);var k,j,x,O=function(e){if(!p&&e in C)return C[e];switch(e){case y:return function(){return new n(this,e)};case g:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",P=b==g,S=!1,C=e.prototype,M=C[d]||C[h]||b&&C[b],I=M||O(b),R=b?P?O("entries"):I:void 0,T="Array"==t?C.entries||M:M;if(T&&(x=f(T.call(new e)),x!==Object.prototype&&(l(x,E,!0),r||a(x,d)||s(x,d,m))),P&&M&&M.name!==g&&(S=!0,I=function(){return M.call(this)}),r&&!w||!p&&!S&&C[d]||s(C,d,I),u[t]=I,u[E]=m,b)if(k={values:P?I:O(g),keys:v?I:O(y),entries:R},w)for(j in k)j in C||i(C,j,k[j]);else o(o.P+o.F*(p||S),t,k);return k}},{"./_export":34,"./_has":38,"./_hide":39,"./_iter-create":48,"./_iterators":52,"./_library":54,"./_object-gpo":64,"./_redefine":71,"./_set-to-string-tag":74,"./_wks":89}],50:[function(e,t,n){var r=e("./_wks")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],s=i[r]();s.next=function(){return{done:n=!0}},i[r]=function(){return s},e(i)}catch(e){}return n}},{"./_wks":89}],51:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],52:[function(e,t,n){t.exports={}},{}],53:[function(e,t,n){var r=e("./_object-keys"),o=e("./_to-iobject");t.exports=function(e,t){for(var n,i=o(e),s=r(i),a=s.length,u=0;a>u;)if(i[n=s[u++]]===t)return n}},{"./_object-keys":66,"./_to-iobject":82}],54:[function(e,t,n){t.exports=!0},{}],55:[function(e,t,n){var r=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),s=e("./_object-dp").f,a=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return c&&h.NEED&&u(e)&&!i(e,r)&&l(e),e},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},{"./_fails":35,"./_has":38,"./_is-object":46,"./_object-dp":58,"./_uid":86}],56:[function(e,t,n){var r=e("./_global"),o=e("./_task").set,i=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==e("./_cof")(s);t.exports=function(){var e,t,n,c=function(){var r,o;for(u&&(r=s.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(i){var l=!0,f=document.createTextNode("");new i(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(a&&a.resolve){var d=a.resolve();n=function(){d.then(c)}}else n=function(){o.call(r,c)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},{"./_cof":26,"./_global":37,"./_task":79}],57:[function(e,t,n){var r=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,n=e("./_dom-create")("iframe"),r=i.length,o="<",s=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),c=t.F;r--;)delete c[u][i[r]];return c()};t.exports=Object.create||function(e,t){var n;return null!==e?(a[u]=r(e),n=new a,a[u]=null,n[s]=e):n=c(),void 0===t?n:o(n,t)}},{"./_an-object":23,"./_dom-create":31,"./_enum-bug-keys":32,"./_html":40,"./_object-dps":59,"./_shared-key":75}],58:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),s=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":23,"./_descriptors":30,"./_ie8-dom-define":41,"./_to-primitive":85}],59:[function(e,t,n){var r=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,s=i(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},{"./_an-object":23,"./_descriptors":30,"./_object-dp":58,"./_object-keys":66}],60:[function(e,t,n){var r=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?c:function(e,t){if(e=i(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(a(e,t))return o(!r.f.call(e,t),e[t])}},{"./_descriptors":30,"./_has":38,"./_ie8-dom-define":41,"./_object-pie":67,"./_property-desc":69,"./_to-iobject":82,"./_to-primitive":85}],61:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(e){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==i.call(e)?a(e):o(r(e))}},{"./_object-gopn":62,"./_to-iobject":82}],62:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},{"./_enum-bug-keys":32,"./_object-keys-internal":65}],63:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],64:[function(e,t,n){var r=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":38,"./_shared-key":75,"./_to-object":84}],65:[function(e,t,n){var r=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,a=o(e),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~i(c,n)||c.push(n));return c}},{"./_array-includes":24,"./_has":38,"./_shared-key":75,"./_to-iobject":82}],66:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":32,"./_object-keys-internal":65}],67:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],68:[function(e,t,n){var r=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",s)}},{"./_core":27,"./_export":34,"./_fails":35}],69:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],70:[function(e,t,n){var r=e("./_hide");t.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},{"./_hide":39}],71:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":39}],72:[function(e,t,n){var r=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r("./_ctx")(Function.call,r("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},{"./_an-object":23,"./_ctx":28,"./_is-object":46,"./_object-gopd":60}],73:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_core"),i=e("./_object-dp"),s=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];s&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_core":27,"./_descriptors":30,"./_global":37,"./_object-dp":58,"./_wks":89}],74:[function(e,t,n){var r=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"./_has":38,"./_object-dp":58,"./_wks":89}],75:[function(e,t,n){var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":76,"./_uid":86}],76:[function(e,t,n){var r=e("./_global"),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":37}],77:[function(e,t,n){var r=e("./_an-object"),o=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[i])?t:o(n)}},{"./_a-function":20,"./_an-object":23,"./_wks":89}],78:[function(e,t,n){var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var i,s,a=String(o(t)),u=r(n),c=a.length;return u<0||u>=c?e?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},{"./_defined":29,"./_to-integer":81}],79:[function(e,t,n){var r,o,i,s=e("./_ctx"),a=e("./_invoke"),u=e("./_html"),c=e("./_dom-create"),l=e("./_global"),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,y=0,g={},m="onreadystatechange",_=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){_.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++y]=function(){a("function"==typeof e?e:Function(e),t)},r(y),y},p=function(e){delete g[e]},"process"==e("./_cof")(f)?r=function(e){f.nextTick(s(_,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=b,r=s(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r=m in c("script")?function(e){u.appendChild(c("script"))[m]=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(s(_,e,1),0)}),t.exports={set:d,clear:p}},{"./_cof":26,"./_ctx":28,"./_dom-create":31,"./_global":37,"./_html":40,"./_invoke":42}],80:[function(e,t,n){var r=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":81}],81:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],82:[function(e,t,n){var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":29,"./_iobject":43}],83:[function(e,t,n){var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":81}],84:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":29}],85:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":46}],86:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],87:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":27,"./_global":37,"./_library":54,"./_object-dp":58,"./_wks-ext":88}],88:[function(e,t,n){n.f=e("./_wks")},{"./_wks":89}],89:[function(e,t,n){var r=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,s="function"==typeof i,a=t.exports=function(e){return r[e]||(r[e]=s&&i[e]||(s?i:o)("Symbol."+e))};a.store=r},{"./_global":37,"./_shared":76,"./_uid":86}],90:[function(e,t,n){var r=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},{"./_classof":25,"./_core":27,"./_iterators":52,"./_wks":89}],91:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":21,"./_iter-define":49,"./_iter-step":51,"./_iterators":52,"./_to-iobject":82}],92:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":34,"./_object-create":57}],93:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":30,"./_export":34,"./_object-dp":58}],94:[function(e,t,n){var r=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(r(e))}})},{"./_object-gpo":64,"./_object-sap":68,"./_to-object":84}],95:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":34,"./_set-proto":72}],96:[function(e,t,n){},{}],97:[function(e,t,n){"use strict";var r,o,i,s=e("./_library"),a=e("./_global"),u=e("./_ctx"),c=e("./_classof"),l=e("./_export"),f=e("./_is-object"),d=e("./_a-function"),p=e("./_an-instance"),h=e("./_for-of"),y=e("./_species-constructor"),g=e("./_task").set,m=e("./_microtask")(),_="Promise",b=a.TypeError,v=a.process,w=a[_],v=a.process,k="process"==c(v),j=function(){},x=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n("./_wks")("species")]=function(e){e(j,j)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(j)instanceof t}catch(n){}}(),O=function(e,t){return e===t||e===w&&t===i},E=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return O(w,e)?new S(e):new o(e)},S=o=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},C=function(e){try{e()}catch(e){return{error:e}}},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,o=1==e._s,i=0,s=function(e){var t,n,i=o?e.ok:e.fail,s=e.resolve,a=e.reject,u=e.domain;try{i?(o||(2==c._h&&T(c),c._h=1),i===!0?t=r:(u&&u.enter(),t=i(r),u&&u.exit()),t===e.promise?a(b("Promise-chain cycle")):(n=E(t))?n.call(t,s,a):s(t)):a(r)}catch(c){a(c)}};n.length>i;)s(n[i++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(a,function(){var t,n,r,o=e._v;if(R(e)&&(t=C(function(){k?v.emit("unhandledRejection",o,e):(n=a.onunhandledrejection)?n({promise:e,reason:o}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=k||R(e)?2:1),e._a=void 0,t)throw t.error})},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!R(t.promise))return!1;return!0},T=function(e){g.call(a,function(){var t;k?v.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=E(e))?m(function(){var e={_w:n,_d:!1};try{t.call(r,u(N,e,1),u(A,e,1))}catch(r){A.call(e,r)}}):(n._v=e,n._s=1,M(n,!1))}catch(e){A.call({_w:n,_d:!1},e)}}};x||(w=function(e){p(this,w,_,"_h"),d(e),r.call(this);try{e(u(N,this,1),u(A,this,1))}catch(e){A.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e("./_redefine-all")(w.prototype,{then:function(e,t){var n=P(y(this,w));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?v.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),S=function(){var e=new r;this.promise=e,this.resolve=u(N,e,1),this.reject=u(A,e,1)}),l(l.G+l.W+l.F*!x,{Promise:w}),e("./_set-to-string-tag")(w,_),e("./_set-species")(_),i=e("./_core")[_],l(l.S+l.F*!x,_,{reject:function(e){var t=P(this),n=t.reject;return n(e),t.promise}}),l(l.S+l.F*(s||!x),_,{resolve:function(e){if(e instanceof w&&O(e.constructor,this))return e;var t=P(this),n=t.resolve;return n(e),t.promise}}),l(l.S+l.F*!(x&&e("./_iter-detect")(function(e){w.all(e)["catch"](j)})),_,{all:function(e){var t=this,n=P(t),r=n.resolve,o=n.reject,i=C(function(){var n=[],i=0,s=1;h(e,!1,function(e){var a=i++,u=!1;n.push(void 0),s++,t.resolve(e).then(function(e){u||(u=!0,n[a]=e,--s||r(n))},o)}),--s||r(n)});return i&&o(i.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,o=C(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},{"./_a-function":20,"./_an-instance":22,"./_classof":25,"./_core":27,"./_ctx":28,"./_export":34,"./_for-of":36,"./_global":37,"./_is-object":46,"./_iter-detect":50,"./_library":54,"./_microtask":56,"./_redefine-all":70,"./_set-species":73,"./_set-to-string-tag":74,"./_species-constructor":77,"./_task":79,"./_wks":89}],98:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":49,"./_string-at":78}],99:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_has"),i=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),d=e("./_uid"),p=e("./_wks"),h=e("./_wks-ext"),y=e("./_wks-define"),g=e("./_keyof"),m=e("./_enum-keys"),_=e("./_is-array"),b=e("./_an-object"),v=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),j=e("./_object-create"),x=e("./_object-gopn-ext"),O=e("./_object-gopd"),E=e("./_object-dp"),P=e("./_object-keys"),S=O.f,C=E.f,M=x.f,I=r.Symbol,R=r.JSON,T=R&&R.stringify,A="prototype",N=p("_hidden"),D=p("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),L=l("symbols"),G=l("op-symbols"),B=Object[A],$="function"==typeof I,z=r.QObject,H=!z||!z[A]||!z[A].findChild,V=i&&c(function(){return 7!=j(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=S(B,t);r&&delete B[t],C(e,t,n),r&&e!==B&&C(B,t,r)}:C,q=function(e){var t=L[e]=j(I[A]);return t._k=e,t},K=$&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},W=function(e,t,n){return e===B&&W(G,t,n),b(e),t=w(t,!0),b(n),o(L,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=j(n,{enumerable:k(0,!1)})):(o(e,N)||C(e,N,k(1,{})),e[N][t]=!0),V(e,t,n)):C(e,t,n)},Q=function(e,t){b(e);for(var n,r=m(t=v(t)),o=0,i=r.length;i>o;)W(e,n=r[o++],t[n]);return e},Y=function(e,t){return void 0===t?j(e):Q(j(e),t)},J=function(e){var t=U.call(this,e=w(e,!0));return!(this===B&&o(L,e)&&!o(G,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,N)&&this[N][e])||t)},Z=function(e,t){if(e=v(e),t=w(t,!0),e!==B||!o(L,t)||o(G,t)){var n=S(e,t);return!n||!o(L,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=M(v(e)),r=[],i=0;n.length>i;)o(L,t=n[i++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===B,r=M(n?G:v(e)),i=[],s=0;r.length>s;)!o(L,t=r[s++])||n&&!o(B,t)||i.push(L[t]);return i};$||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(G,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),V(this,e,k(1,n))};return i&&H&&V(B,e,{configurable:!0,set:t}),q(e)},a(I[A],"toString",function(){return this._k}),O.f=Z,E.f=W,e("./_object-gopn").f=x.f=X,e("./_object-pie").f=J,e("./_object-gops").f=ee,i&&!e("./_library")&&a(B,"propertyIsEnumerable",J,!0),h.f=function(e){return q(p(e))}),s(s.G+s.W+s.F*!$,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var te=P(p.store),ne=0;te.length>ne;)y(te[ne++]);s(s.S+s.F*!$,"Symbol",{"for":function(e){return o(F,e+="")?F[e]:F[e]=I(e)},keyFor:function(e){if(K(e))return g(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!$,"Object",{create:Y,defineProperty:W,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:ee}),R&&s(s.S+s.F*(!$||c(function(){var e=I();return"[null]"!=T([e])||"{}"!=T({a:e})||"{}"!=T(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!K(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&_(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,T.apply(R,r)}}}),I[A][D]||e("./_hide")(I[A],D,I[A].valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},{"./_an-object":23,"./_descriptors":30,"./_enum-keys":33,"./_export":34,"./_fails":35,"./_global":37,"./_has":38,"./_hide":39,"./_is-array":45,"./_keyof":53,"./_library":54,"./_meta":55,"./_object-create":57,"./_object-dp":58,"./_object-gopd":60,"./_object-gopn":62,"./_object-gopn-ext":61,"./_object-gops":63,"./_object-keys":66,"./_object-pie":67,"./_property-desc":69,"./_redefine":71,"./_set-to-string-tag":74,"./_shared":76,"./_to-iobject":82,"./_to-primitive":85,"./_uid":86,"./_wks":89,"./_wks-define":87,"./_wks-ext":88}],100:[function(e,t,n){e("./_wks-define")("asyncIterator")},{"./_wks-define":87}],101:[function(e,t,n){e("./_wks-define")("observable")},{"./_wks-define":87}],102:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),o=e("./_hide"),i=e("./_iterators"),s=e("./_wks")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=r[c],f=l&&l.prototype;f&&!f[s]&&o(f,s,c),i[c]=i.Array}},{"./_global":37,"./_hide":39,"./_iterators":52,"./_wks":89,"./es6.array.iterator":91}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),s=e("babel-runtime/helpers/createClass"),a=r(s),u=function(){function e(){(0,i["default"])(this,e);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=5e3,t._responseCallbacks={},t._registerExternalListener()}return(0,a["default"])(e,[{key:"addListener",value:function(e,t){var n=this,r=new c(n._subscriptions,e,t),o=n._subscriptions[e];return o||(o=[],n._subscriptions[e]=o),o.push(r),r}},{key:"addResponseListener",value:function(e,t,n){this._responseCallbacks[e+t]=n}},{key:"removeResponseListener",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:"removeAllListenersOf",value:function(e){delete this._subscriptions[e]}},{key:"bind",value:function(e,t,n){var r=this,o=this,i=o.addListener(e,function(e){n.postMessage(e)}),s=n.addListener(t,function(e){o.postMessage(e)});return{thisListener:i,targetListener:s,unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:"_publishOnDefault",value:function(e){var t=this._subscriptions["*"];t&&this._publishOn(t,e)}},{key:"_publishOn",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:"_responseCallback",value:function(e,t){var n=this;t&&!function(){var r=e.from+e.id;n._responseCallbacks[r]=t,setTimeout(function(){var t=n._responseCallbacks[r];if(delete n._responseCallbacks[r],t){var o={id:e.id,type:"response",body:{code:408,desc:"Response timeout!",value:e}};t(o)}},n._responseTimeOut)}()}},{key:"_onResponse",value:function(e){var t=this;if("response"===e.type){var n=e.to+e.id,r=t._responseCallbacks[n];if(e.body.code>=200&&delete t._responseCallbacks[n],r)return r(e),!0}return!1}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?t._publishOn(n,e):t._publishOnDefault(e)}}},{key:"_genId",value:function(e){e.id&&0!==e.id||(this._msgId++,e.id=this._msgId)}},{key:"postMessage",value:function(e,t){}},{key:"_onPostMessage",value:function(e){}},{key:"_registerExternalListener",value:function(){}}]),e}(),c=function(){function e(t,n,r){(0,i["default"])(this,e);var o=this;o._subscriptions=t,o._url=n,o._callback=r}return(0,a["default"])(e,[{key:"remove",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var n=t.indexOf(e);t.splice(n,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:"url",get:function(){return this._url}}]),e}();n["default"]=u,t.exports=n["default"]},{"babel-runtime/helpers/classCallCheck":8,"babel-runtime/helpers/createClass":9}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(l),d=e("babel-runtime/helpers/inherits"),p=r(d),h=e("./Bus"),y=r(h),g=function(e){function t(){return(0,a["default"])(this,t),(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"postMessage",value:function(e,t){var n=this;return n._genId(e),n._responseCallback(e,t),n._onPostMessage(e),e.id}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?(t._publishOn(n,e),e.to.startsWith("hyperty")||t._publishOnDefault(e)):t._publishOnDefault(e)}}}]),t}(y["default"]);n["default"]=g,t.exports=n["default"]},{"./Bus":103,"babel-runtime/core-js/object/get-prototype-of":3,"babel-runtime/helpers/classCallCheck":8,"babel-runtime/helpers/createClass":9,"babel-runtime/helpers/inherits":10,"babel-runtime/helpers/possibleConstructorReturn":11}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.SandboxRegistry=n.SandboxType=n.Sandbox=void 0;var o=e("./sandbox/Sandbox"),i=r(o),s=e("./sandbox/SandboxRegistry"),a=r(s);n.Sandbox=i["default"],n.SandboxType=o.SandboxType,n.SandboxRegistry=a["default"]},{"./sandbox/Sandbox":106,"./sandbox/SandboxRegistry":107}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.SandboxType=void 0;var o=e("babel-runtime/core-js/promise"),i=r(o),s=e("babel-runtime/core-js/object/get-prototype-of"),a=r(s),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),f=r(l),d=e("babel-runtime/helpers/possibleConstructorReturn"),p=r(d),h=e("babel-runtime/helpers/inherits"),y=r(h),g=e("../sandbox/SandboxRegistry"),m=r(g),_=e("../bus/MiniBus"),b=r(_),v=(n.SandboxType={APP:"app",NORMAL:"normal"},function(e){function t(){(0,c["default"])(this,t);var e=(0,p["default"])(this,(t.__proto__||(0,a["default"])(t)).call(this));return e}return(0,y["default"])(t,e),(0,f["default"])(t,[{key:"deployComponent",value:function(e,t,n){var r=this;return new i["default"](function(o,i){var s={type:"create",from:m["default"].ExternalDeployAddress,to:m["default"].InternalDeployAddress,body:{url:t,sourceCode:e,config:n}};r.postMessage(s,function(e){200===e.body.code?o("deployed"):i(e.body.desc)})})}},{key:"removeComponent",value:function(e){var t=this;return new i["default"](function(n,r){var o={type:"delete",from:m["default"].ExternalDeployAddress,to:m["default"].InternalDeployAddress,body:{url:e}};t.postMessage(o,function(e){200===e.body.code?n("undeployed"):r(e.body.desc)})})}}]),t}(b["default"]));n["default"]=v},{"../bus/MiniBus":104,"../sandbox/SandboxRegistry":107,"babel-runtime/core-js/object/get-prototype-of":3,"babel-runtime/core-js/promise":5,"babel-runtime/helpers/classCallCheck":8,"babel-runtime/helpers/createClass":9,"babel-runtime/helpers/inherits":10,"babel-runtime/helpers/possibleConstructorReturn":11}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),s=e("babel-runtime/helpers/createClass"),a=r(s),u=function(){function e(t){(0,i["default"])(this,e);var n=this;n._bus=t,n._components={},t.addListener(e.InternalDeployAddress,function(e){switch(e.type){case"create":n._onDeploy(e);break;case"delete":n._onRemove(e)}})}return(0,a["default"])(e,[{key:"_responseMsg",value:function(t,n,r){var o={id:t.id,type:"response",from:e.InternalDeployAddress,to:e.ExternalDeployAddress},i={};return n&&(i.code=n),r&&(i.desc=r),o.body=i,o}},{key:"_onDeploy",value:function(e){var t=this,n=e.body.config,r=e.body.url,o=e.body.sourceCode,i=void 0,s=void 0;if(t._components.hasOwnProperty(r))i=500,s="Instance "+r+" already exist!";else try{t._components[r]=t._create(r,o,n),i=200}catch(e){i=500,s=e}var a=t._responseMsg(e,i,s);t._bus.postMessage(a)}},{key:"_onRemove",value:function(e){var t=this,n=e.body.url,r=void 0,o=void 0;t._components.hasOwnProperty(n)?(delete t._components[n],t._bus.removeAllListenersOf(n),r=200):(r=500,o="Instance "+n+" doesn't exist!");var i=t._responseMsg(e,r,o);t._bus.postMessage(i)}},{key:"_create",value:function(e,t,n){}},{key:"components",get:function(){return this._components}}]),e}();u.ExternalDeployAddress="hyperty-runtime://sandbox/external",u.InternalDeployAddress="hyperty-runtime://sandbox/internal",n["default"]=u,t.exports=n["default"]},{"babel-runtime/helpers/classCallCheck":8,"babel-runtime/helpers/createClass":9}]},{},[105])(105)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,n,r){(function(o){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.PersistenceManager=e()}}(function(){return function t(n,r,o){function i(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return i(t?t:e)},f,f.exports,t,n,r,o)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){t.exports={"default":e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":5}],2:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":6}],3:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/define-property"),i=r(o);
n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":2}],5:[function(e,t,n){var r=e("../../modules/_core"),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(e){return o.stringify.apply(o,arguments)}},{"../../modules/_core":9}],6:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":9,"../../modules/es6.object.define-property":22}],7:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],8:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":18}],9:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],10:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":7}],11:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":14}],12:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":15,"./_is-object":18}],13:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),s=e("./_hide"),a="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,g=e&u.B,m=e&u.W,_=p?o:o[t]||(o[t]={}),b=_[a],v=p?r:h?r[t]:(r[t]||{})[a];p&&(n=t);for(c in n)l=!d&&v&&void 0!==v[c],l&&c in _||(f=l?v[c]:n[c],_[c]=p&&"function"!=typeof v[c]?n[c]:g&&l?i(f,r):m&&v[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((_.virtual||(_.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&s(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":9,"./_ctx":10,"./_global":15,"./_hide":16}],14:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],15:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],16:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":11,"./_object-dp":19,"./_property-desc":20}],17:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":11,"./_dom-create":12,"./_fails":14}],18:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],19:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),s=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":8,"./_descriptors":11,"./_ie8-dom-define":17,"./_to-primitive":21}],20:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],21:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":18}],22:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":11,"./_export":13,"./_object-dp":19}],23:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/core-js/json/stringify"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/createClass"),c=r(u),l=function(){function e(t){if((0,a["default"])(this,e),!t)throw Error("The Persistence Manager needs the localStorage");var n=this;n.localStorage=t}return(0,c["default"])(e,[{key:"set",value:function(e,t,n){var r=this;r.localStorage.setItem(e,(0,i["default"])({version:t,value:n}))}},{key:"get",value:function(e){var t=this;try{return JSON.parse(t.localStorage.getItem(e)).value}catch(n){}}},{key:"getVersion",value:function(e){var t=this;try{return JSON.parse(t.localStorage.getItem(e)).version}catch(n){}}},{key:"delete",value:function(e){var t=this;t.localStorage.removeItem(e)}}]),e}();n["default"]=l,t.exports=n["default"]},{"babel-runtime/core-js/json/stringify":1,"babel-runtime/helpers/classCallCheck":3,"babel-runtime/helpers/createClass":4}]},{},[23])(23)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,n,r){(function(o){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.RuntimeCatalogue=e()}}(function(){var t;return function n(t,r,o){function i(a,u){if(!r[a]){if(!t[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return i(n?n:e)},f,f.exports,n,t,r,o)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){t.exports={"default":e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":17}],2:[function(e,t,n){t.exports={"default":e("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":18}],3:[function(e,t,n){t.exports={"default":e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":19}],4:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":20}],5:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":21}],6:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":22}],7:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":23}],8:[function(e,t,n){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":24}],9:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":25}],10:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":26}],11:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/define-property"),i=r(o);n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":5}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=r(o),s=e("../core-js/object/create"),a=r(s),u=e("../helpers/typeof"),c=r(u);n["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,a["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},{"../core-js/object/create":4,"../core-js/object/set-prototype-of":7,"../helpers/typeof":16}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../helpers/typeof"),i=r(o);n["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":16}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/is-iterable"),i=r(o),s=e("../core-js/get-iterator"),a=r(s);n["default"]=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=(0,a["default"])(e);!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,i["default"])(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},{"../core-js/get-iterator":1,"../core-js/is-iterable":2}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/symbol/iterator"),i=r(o),s=e("../core-js/symbol"),a=r(s),u="function"==typeof a["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":typeof e};n["default"]="function"==typeof a["default"]&&"symbol"===u(i["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]&&e!==a["default"].prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},{"../core-js/symbol":9,"../core-js/symbol/iterator":10}],17:[function(e,t,n){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":98,"../modules/es6.string.iterator":107,"../modules/web.dom.iterable":111}],18:[function(e,t,n){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.is-iterable")},{"../modules/core.is-iterable":99,"../modules/es6.string.iterator":107,"../modules/web.dom.iterable":111}],19:[function(e,t,n){var r=e("../../modules/_core"),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(e){return o.stringify.apply(o,arguments)}},{"../../modules/_core":34}],20:[function(e,t,n){e("../../modules/es6.object.create");var r=e("../../modules/_core").Object;t.exports=function(e,t){return r.create(e,t)}},{"../../modules/_core":34,"../../modules/es6.object.create":101}],21:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":34,"../../modules/es6.object.define-property":102}],22:[function(e,t,n){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":34,"../../modules/es6.object.get-prototype-of":103}],23:[function(e,t,n){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":34,"../../modules/es6.object.set-prototype-of":104}],24:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":34,"../modules/es6.object.to-string":105,"../modules/es6.promise":106,"../modules/es6.string.iterator":107,"../modules/web.dom.iterable":111}],25:[function(e,t,n){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":34,"../../modules/es6.object.to-string":105,"../../modules/es6.symbol":108,"../../modules/es7.symbol.async-iterator":109,"../../modules/es7.symbol.observable":110}],26:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":95,"../../modules/es6.string.iterator":107,"../../modules/web.dom.iterable":111}],27:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],28:[function(e,t,n){t.exports=function(){}},{}],29:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],30:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":53}],31:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,n,s){var a,u=r(t),c=o(u.length),l=i(s,c);if(e&&n!=n){for(;c>l;)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},{"./_to-index":87,"./_to-iobject":89,"./_to-length":90}],32:[function(e,t,n){var r=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(n){}};t.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":33,"./_wks":96}],33:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],34:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],35:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":27}],36:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],37:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":42}],38:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":44,"./_is-object":53}],39:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],40:[function(e,t,n){var r=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=r(e),n=o.f;if(n)for(var s,a=n(e),u=i.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":70,"./_object-keys":73,"./_object-pie":74}],41:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),s=e("./_hide"),a="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,g=e&u.B,m=e&u.W,_=p?o:o[t]||(o[t]={}),b=_[a],v=p?r:h?r[t]:(r[t]||{})[a];p&&(n=t);for(c in n)l=!d&&v&&void 0!==v[c],l&&c in _||(f=l?v[c]:n[c],_[c]=p&&"function"!=typeof v[c]?n[c]:g&&l?i(f,r):m&&v[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((_.virtual||(_.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&s(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":34,"./_ctx":35,"./_global":44,"./_hide":46}],42:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],43:[function(e,t,n){var r=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={},n=t.exports=function(e,t,n,f,d){var p,h,y,g,m=d?function(){return e}:u(e),_=r(n,f,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(i(m)){for(p=a(e.length);p>b;b++)if(g=t?_(s(h=e[b])[0],h[1]):_(e[b]),g===c||g===l)return g}else for(y=m.call(e);!(h=y.next()).done;)if(g=o(y,_,h.value,t),g===c||g===l)return g};n.BREAK=c,n.RETURN=l},{"./_an-object":30,"./_ctx":35,"./_is-array-iter":51,"./_iter-call":54,"./_to-length":90,"./core.get-iterator-method":97}],44:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],45:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],46:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":37,"./_object-dp":65,"./_property-desc":76}],47:[function(e,t,n){t.exports=e("./_global").document&&document.documentElement},{"./_global":44}],48:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":37,"./_dom-create":38,"./_fails":42}],49:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],50:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":33}],51:[function(e,t,n){var r=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},{"./_iterators":59,"./_wks":96}],52:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":33}],53:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],54:[function(e,t,n){var r=e("./_an-object");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(i){var s=e["return"];throw void 0!==s&&r(s.call(e)),i}}},{"./_an-object":30}],55:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),s={};e("./_hide")(s,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(s,{next:o(1,n)}),i(e,t+" Iterator")}},{"./_hide":46,"./_object-create":64,"./_property-desc":76,"./_set-to-string-tag":81,"./_wks":96}],56:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),i=e("./_redefine"),s=e("./_hide"),a=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",g="values",m=function(){return this};t.exports=function(e,t,n,_,b,v,w){c(n,t,_);var k,j,x,O=function(e){if(!p&&e in C)return C[e];switch(e){case y:return function(){return new n(this,e)};case g:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",P=b==g,S=!1,C=e.prototype,M=C[d]||C[h]||b&&C[b],I=M||O(b),R=b?P?O("entries"):I:void 0,T="Array"==t?C.entries||M:M;if(T&&(x=f(T.call(new e)),x!==Object.prototype&&(l(x,E,!0),r||a(x,d)||s(x,d,m))),P&&M&&M.name!==g&&(S=!0,I=function(){return M.call(this)}),r&&!w||!p&&!S&&C[d]||s(C,d,I),u[t]=I,u[E]=m,b)if(k={values:P?I:O(g),keys:v?I:O(y),entries:R},w)for(j in k)j in C||i(C,j,k[j]);else o(o.P+o.F*(p||S),t,k);return k}},{"./_export":41,"./_has":45,"./_hide":46,"./_iter-create":55,"./_iterators":59,"./_library":61,"./_object-gpo":71,"./_redefine":78,"./_set-to-string-tag":81,"./_wks":96}],57:[function(e,t,n){var r=e("./_wks")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(s){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],s=i[r]();s.next=function(){return{done:n=!0}},i[r]=function(){return s},e(i)}catch(a){}return n}},{"./_wks":96}],58:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],59:[function(e,t,n){t.exports={}},{}],60:[function(e,t,n){var r=e("./_object-keys"),o=e("./_to-iobject");t.exports=function(e,t){for(var n,i=o(e),s=r(i),a=s.length,u=0;a>u;)if(i[n=s[u++]]===t)return n}},{"./_object-keys":73,"./_to-iobject":89}],61:[function(e,t,n){t.exports=!0},{}],62:[function(e,t,n){var r=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),s=e("./_object-dp").f,a=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return c&&h.NEED&&u(e)&&!i(e,r)&&l(e),e},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},{"./_fails":42,"./_has":45,"./_is-object":53,"./_object-dp":65,"./_uid":93}],63:[function(e,t,n){var r=e("./_global"),o=e("./_task").set,i=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==e("./_cof")(s);t.exports=function(){var e,t,n,c=function(){var r,o;for(u&&(r=s.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(i){throw e?n():t=void 0,i}}t=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(i){var l=!0,f=document.createTextNode("");new i(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(a&&a.resolve){var d=a.resolve();n=function(){d.then(c)}}else n=function(){o.call(r,c)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},{"./_cof":33,"./_global":44,"./_task":86}],64:[function(e,t,n){var r=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),s=e("./_shared-key")("IE_PROTO"),a=function(){},u="prototype",c=function(){var t,n=e("./_dom-create")("iframe"),r=i.length,o="<",s=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),c=t.F;r--;)delete c[u][i[r]];return c()};t.exports=Object.create||function(e,t){var n;return null!==e?(a[u]=r(e),n=new a,a[u]=null,n[s]=e):n=c(),void 0===t?n:o(n,t)}},{"./_an-object":30,"./_dom-create":38,"./_enum-bug-keys":39,"./_html":47,"./_object-dps":66,"./_shared-key":82}],65:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),s=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":30,"./_descriptors":37,"./_ie8-dom-define":48,"./_to-primitive":92}],66:[function(e,t,n){var r=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,s=i(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},{"./_an-object":30,"./_descriptors":37,"./_object-dp":65,"./_object-keys":73}],67:[function(e,t,n){var r=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?c:function(e,t){if(e=i(e),t=s(t,!0),u)try{return c(e,t)}catch(n){}if(a(e,t))return o(!r.f.call(e,t),e[t])}},{"./_descriptors":37,"./_has":45,"./_ie8-dom-define":48,"./_object-pie":74,"./_property-desc":76,"./_to-iobject":89,"./_to-primitive":92}],68:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(t){return s.slice()}};t.exports.f=function(e){return s&&"[object Window]"==i.call(e)?a(e):o(r(e))}},{"./_object-gopn":69,"./_to-iobject":89}],69:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},{"./_enum-bug-keys":39,"./_object-keys-internal":72}],70:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],71:[function(e,t,n){var r=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"./_has":45,"./_shared-key":82,"./_to-object":91}],72:[function(e,t,n){var r=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),s=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,a=o(e),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~i(c,n)||c.push(n));return c}},{"./_array-includes":31,"./_has":45,"./_shared-key":82,"./_to-iobject":89}],73:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":39,"./_object-keys-internal":72}],74:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],75:[function(e,t,n){var r=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",s)}},{"./_core":34,"./_export":41,"./_fails":42}],76:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],77:[function(e,t,n){var r=e("./_hide");t.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},{"./_hide":46}],78:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":46}],79:[function(e,t,n){var r=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(o){n=!0}return function(e,t){return i(e,t),n?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:i}},{"./_an-object":30,"./_ctx":35,"./_is-object":53,"./_object-gopd":67}],80:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_core"),i=e("./_object-dp"),s=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];s&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_core":34,"./_descriptors":37,"./_global":44,"./_object-dp":65,"./_wks":96}],81:[function(e,t,n){var r=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"./_has":45,"./_object-dp":65,"./_wks":96}],82:[function(e,t,n){var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":83,"./_uid":93}],83:[function(e,t,n){var r=e("./_global"),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":44}],84:[function(e,t,n){var r=e("./_an-object"),o=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[i])?t:o(n)}},{"./_a-function":27,"./_an-object":30,"./_wks":96}],85:[function(e,t,n){var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var i,s,a=String(o(t)),u=r(n),c=a.length;return u<0||u>=c?e?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},{"./_defined":36,"./_to-integer":88}],86:[function(e,t,n){var r,o,i,s=e("./_ctx"),a=e("./_invoke"),u=e("./_html"),c=e("./_dom-create"),l=e("./_global"),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,y=0,g={},m="onreadystatechange",_=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){_.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++y]=function(){a("function"==typeof e?e:Function(e),t)},r(y),y},p=function(e){delete g[e]},"process"==e("./_cof")(f)?r=function(e){f.nextTick(s(_,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=b,r=s(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r=m in c("script")?function(e){u.appendChild(c("script"))[m]=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(s(_,e,1),0)}),t.exports={set:d,clear:p}},{"./_cof":33,"./_ctx":35,"./_dom-create":38,"./_global":44,"./_html":47,"./_invoke":49}],87:[function(e,t,n){var r=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":88}],88:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],89:[function(e,t,n){var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":36,"./_iobject":50}],90:[function(e,t,n){var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":88}],91:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":36}],92:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":53}],93:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],94:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_library"),s=e("./_wks-ext"),a=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},{"./_core":34,"./_global":44,"./_library":61,"./_object-dp":65,"./_wks-ext":95}],95:[function(e,t,n){n.f=e("./_wks")},{"./_wks":96}],96:[function(e,t,n){var r=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,s="function"==typeof i,a=t.exports=function(e){return r[e]||(r[e]=s&&i[e]||(s?i:o)("Symbol."+e))};a.store=r},{"./_global":44,"./_shared":83,"./_uid":93}],97:[function(e,t,n){var r=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)];
}},{"./_classof":32,"./_core":34,"./_iterators":59,"./_wks":96}],98:[function(e,t,n){var r=e("./_an-object"),o=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},{"./_an-object":30,"./_core":34,"./core.get-iterator-method":97}],99:[function(e,t,n){var r=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(r(t))}},{"./_classof":32,"./_core":34,"./_iterators":59,"./_wks":96}],100:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),s=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":28,"./_iter-define":56,"./_iter-step":58,"./_iterators":59,"./_to-iobject":89}],101:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":41,"./_object-create":64}],102:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":37,"./_export":41,"./_object-dp":65}],103:[function(e,t,n){var r=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(r(e))}})},{"./_object-gpo":71,"./_object-sap":75,"./_to-object":91}],104:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":41,"./_set-proto":79}],105:[function(e,t,n){},{}],106:[function(e,t,n){"use strict";var r,o,i,s=e("./_library"),a=e("./_global"),u=e("./_ctx"),c=e("./_classof"),l=e("./_export"),f=e("./_is-object"),d=e("./_a-function"),p=e("./_an-instance"),h=e("./_for-of"),y=e("./_species-constructor"),g=e("./_task").set,m=e("./_microtask")(),_="Promise",b=a.TypeError,v=a.process,w=a[_],v=a.process,k="process"==c(v),j=function(){},x=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[e("./_wks")("species")]=function(e){e(j,j)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(j)instanceof n}catch(r){}}(),O=function(e,t){return e===t||e===w&&t===i},E=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return O(w,e)?new S(e):new o(e)},S=o=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},C=function(e){try{e()}catch(t){return{error:t}}},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,o=1==e._s,i=0,s=function(t){var n,i,s=o?t.ok:t.fail,a=t.resolve,u=t.reject,c=t.domain;try{s?(o||(2==e._h&&T(e),e._h=1),s===!0?n=r:(c&&c.enter(),n=s(r),c&&c.exit()),n===t.promise?u(b("Promise-chain cycle")):(i=E(n))?i.call(n,a,u):a(n)):u(r)}catch(l){u(l)}};n.length>i;)s(n[i++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(a,function(){var t,n,r,o=e._v;if(R(e)&&(t=C(function(){k?v.emit("unhandledRejection",o,e):(n=a.onunhandledrejection)?n({promise:e,reason:o}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=k||R(e)?2:1),e._a=void 0,t)throw t.error})},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!R(t.promise))return!1;return!0},T=function(e){g.call(a,function(){var t;k?v.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=E(e))?m(function(){var r={_w:n,_d:!1};try{t.call(e,u(N,r,1),u(A,r,1))}catch(o){A.call(r,o)}}):(n._v=e,n._s=1,M(n,!1))}catch(r){A.call({_w:n,_d:!1},r)}}};x||(w=function(e){p(this,w,_,"_h"),d(e),r.call(this);try{e(u(N,this,1),u(A,this,1))}catch(t){A.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e("./_redefine-all")(w.prototype,{then:function(e,t){var n=P(y(this,w));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?v.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),S=function(){var e=new r;this.promise=e,this.resolve=u(N,e,1),this.reject=u(A,e,1)}),l(l.G+l.W+l.F*!x,{Promise:w}),e("./_set-to-string-tag")(w,_),e("./_set-species")(_),i=e("./_core")[_],l(l.S+l.F*!x,_,{reject:function(e){var t=P(this),n=t.reject;return n(e),t.promise}}),l(l.S+l.F*(s||!x),_,{resolve:function(e){if(e instanceof w&&O(e.constructor,this))return e;var t=P(this),n=t.resolve;return n(e),t.promise}}),l(l.S+l.F*!(x&&e("./_iter-detect")(function(e){w.all(e)["catch"](j)})),_,{all:function(e){var t=this,n=P(t),r=n.resolve,o=n.reject,i=C(function(){var n=[],i=0,s=1;h(e,!1,function(e){var a=i++,u=!1;n.push(void 0),s++,t.resolve(e).then(function(e){u||(u=!0,n[a]=e,--s||r(n))},o)}),--s||r(n)});return i&&o(i.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,o=C(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},{"./_a-function":27,"./_an-instance":29,"./_classof":32,"./_core":34,"./_ctx":35,"./_export":41,"./_for-of":43,"./_global":44,"./_is-object":53,"./_iter-detect":57,"./_library":61,"./_microtask":63,"./_redefine-all":77,"./_set-species":80,"./_set-to-string-tag":81,"./_species-constructor":84,"./_task":86,"./_wks":96}],107:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":56,"./_string-at":85}],108:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_has"),i=e("./_descriptors"),s=e("./_export"),a=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),d=e("./_uid"),p=e("./_wks"),h=e("./_wks-ext"),y=e("./_wks-define"),g=e("./_keyof"),m=e("./_enum-keys"),_=e("./_is-array"),b=e("./_an-object"),v=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),j=e("./_object-create"),x=e("./_object-gopn-ext"),O=e("./_object-gopd"),E=e("./_object-dp"),P=e("./_object-keys"),S=O.f,C=E.f,M=x.f,I=r.Symbol,R=r.JSON,T=R&&R.stringify,A="prototype",N=p("_hidden"),D=p("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),L=l("symbols"),G=l("op-symbols"),B=Object[A],$="function"==typeof I,z=r.QObject,H=!z||!z[A]||!z[A].findChild,V=i&&c(function(){return 7!=j(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=S(B,t);r&&delete B[t],C(e,t,n),r&&e!==B&&C(B,t,r)}:C,q=function(e){var t=L[e]=j(I[A]);return t._k=e,t},K=$&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},W=function(e,t,n){return e===B&&W(G,t,n),b(e),t=w(t,!0),b(n),o(L,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=j(n,{enumerable:k(0,!1)})):(o(e,N)||C(e,N,k(1,{})),e[N][t]=!0),V(e,t,n)):C(e,t,n)},Q=function(e,t){b(e);for(var n,r=m(t=v(t)),o=0,i=r.length;i>o;)W(e,n=r[o++],t[n]);return e},Y=function(e,t){return void 0===t?j(e):Q(j(e),t)},J=function(e){var t=U.call(this,e=w(e,!0));return!(this===B&&o(L,e)&&!o(G,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,N)&&this[N][e])||t)},Z=function(e,t){if(e=v(e),t=w(t,!0),e!==B||!o(L,t)||o(G,t)){var n=S(e,t);return!n||!o(L,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=M(v(e)),r=[],i=0;n.length>i;)o(L,t=n[i++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===B,r=M(n?G:v(e)),i=[],s=0;r.length>s;)!o(L,t=r[s++])||n&&!o(B,t)||i.push(L[t]);return i};$||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(G,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),V(this,e,k(1,n))};return i&&H&&V(B,e,{configurable:!0,set:t}),q(e)},a(I[A],"toString",function(){return this._k}),O.f=Z,E.f=W,e("./_object-gopn").f=x.f=X,e("./_object-pie").f=J,e("./_object-gops").f=ee,i&&!e("./_library")&&a(B,"propertyIsEnumerable",J,!0),h.f=function(e){return q(p(e))}),s(s.G+s.W+s.F*!$,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var te=P(p.store),ne=0;te.length>ne;)y(te[ne++]);s(s.S+s.F*!$,"Symbol",{"for":function(e){return o(F,e+="")?F[e]:F[e]=I(e)},keyFor:function(e){if(K(e))return g(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!$,"Object",{create:Y,defineProperty:W,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:ee}),R&&s(s.S+s.F*(!$||c(function(){var e=I();return"[null]"!=T([e])||"{}"!=T({a:e})||"{}"!=T(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!K(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&_(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,T.apply(R,r)}}}),I[A][D]||e("./_hide")(I[A],D,I[A].valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},{"./_an-object":30,"./_descriptors":37,"./_enum-keys":40,"./_export":41,"./_fails":42,"./_global":44,"./_has":45,"./_hide":46,"./_is-array":52,"./_keyof":60,"./_library":61,"./_meta":62,"./_object-create":64,"./_object-dp":65,"./_object-gopd":67,"./_object-gopn":69,"./_object-gopn-ext":68,"./_object-gops":70,"./_object-keys":73,"./_object-pie":74,"./_property-desc":76,"./_redefine":78,"./_set-to-string-tag":81,"./_shared":83,"./_to-iobject":89,"./_to-primitive":92,"./_uid":93,"./_wks":96,"./_wks-define":94,"./_wks-ext":95}],109:[function(e,t,n){e("./_wks-define")("asyncIterator")},{"./_wks-define":94}],110:[function(e,t,n){e("./_wks-define")("observable")},{"./_wks-define":94}],111:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),o=e("./_hide"),i=e("./_iterators"),s=e("./_wks")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=r[c],f=l&&l.prototype;f&&!f[s]&&o(f,s,c),i[c]=i.Array}},{"./_global":44,"./_hide":46,"./_iterators":59,"./_wks":96,"./es6.array.iterator":100}],112:[function(e,n,r){!function(e,r){"function"==typeof t&&t.amd?t([],r):"undefined"!=typeof n&&n.exports?n.exports=r():e.tv4=r()}(this,function(){function e(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function t(t){var n="";d[t.charAt(0)]&&(n=t.charAt(0),t=t.substring(1));var r="",o="",i=!0,s=!1,a=!1;"+"===n?i=!1:"."===n?(o=".",r="."):"/"===n?(o="/",r="/"):"#"===n?(o="#",i=!1):";"===n?(o=";",r=";",s=!0,a=!0):"?"===n?(o="?",r="&",s=!0):"&"===n&&(o="&",r="&",s=!0);for(var u=[],c=t.split(","),l=[],f={},h=0;h<c.length;h++){var y=c[h],g=null;if(y.indexOf(":")!==-1){var m=y.split(":");y=m[0],g=parseInt(m[1],10)}for(var _={};p[y.charAt(y.length-1)];)_[y.charAt(y.length-1)]=!0,y=y.substring(0,y.length-1);var b={truncate:g,name:y,suffices:_};l.push(b),f[y]=b,u.push(y)}var v=function(t){for(var n="",u=0,c=0;c<l.length;c++){var f=l[c],d=t(f.name);if(null===d||void 0===d||Array.isArray(d)&&0===d.length||"object"==typeof d&&0===Object.keys(d).length)u++;else if(n+=c===u?o:r||",",Array.isArray(d)){s&&(n+=f.name+"=");for(var p=0;p<d.length;p++)p>0&&(n+=f.suffices["*"]?r||",":",",f.suffices["*"]&&s&&(n+=f.name+"=")),n+=i?encodeURIComponent(d[p]).replace(/!/g,"%21"):e(d[p])}else if("object"==typeof d){s&&!f.suffices["*"]&&(n+=f.name+"=");var h=!0;for(var y in d)h||(n+=f.suffices["*"]?r||",":","),h=!1,n+=i?encodeURIComponent(y).replace(/!/g,"%21"):e(y),n+=f.suffices["*"]?"=":",",n+=i?encodeURIComponent(d[y]).replace(/!/g,"%21"):e(d[y])}else s&&(n+=f.name,a&&""===d||(n+="=")),null!=f.truncate&&(d=d.substring(0,f.truncate)),n+=i?encodeURIComponent(d).replace(/!/g,"%21"):e(d)}return n};return v.varNames=u,{prefix:o,substitution:v}}function n(e){if(!(this instanceof n))return new n(e);for(var r=e.split("{"),o=[r.shift()],i=[],s=[],a=[];r.length>0;){var u=r.shift(),c=u.split("}")[0],l=u.substring(c.length+1),f=t(c);s.push(f.substitution),i.push(f.prefix),o.push(l),a=a.concat(f.substitution.varNames)}this.fill=function(e){for(var t=o[0],n=0;n<s.length;n++){var r=s[n];t+=r(e),t+=o[n+1]}return t},this.varNames=a,this.template=e}function r(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else{var o;for(o in e)if(void 0===t[o]&&void 0!==e[o])return!1;for(o in t)if(void 0===e[o]&&void 0!==t[o])return!1;for(o in e)if(!r(e[o],t[o]))return!1}return!0}return!1}function o(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function i(e,t){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return t=o(t||""),e=o(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+n(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function s(e){return e.split("#")[0]}function a(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=i(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)a(e[n],t);else{"string"==typeof e.$ref&&(e.$ref=i(t,e.$ref));for(var r in e)"enum"!==r&&a(e[r],t)}}function u(e){e=e||"en";var t=w[e];return function(e){var n=t[e.code]||v[e.code];if("string"!=typeof n)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var r=e.params;return n.replace(/\{([^{}]*)\}/g,function(e,t){var n=r[t];return"string"==typeof n||"number"==typeof n?n:e})}}function c(e,t,n,r,o){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+r);this.message="",this.params=t,this.code=e,this.dataPath=n||"",this.schemaPath=r||"",this.subErrors=o||null;var i=new Error(this.message);if(this.stack=i.stack||i.stacktrace,!this.stack)try{throw i}catch(i){this.stack=i.stack||i.stacktrace}}function l(e,t){if(t.substring(0,e.length)===e){var n=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===n.charAt(0)||"?"===n.charAt(0))return!0}return!1}function f(e){var t,n,r=new h,o={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){r.addFormat.apply(r,arguments)},language:function(e){return e?(w[e]||(e=e.split("-")[0]),!!w[e]&&(t=e,e)):t},addLanguage:function(e,t){var n;for(n in m)t[n]&&!t[m[n]]&&(t[m[n]]=t[n]);var r=e.split("-")[0];if(w[r]){w[e]=Object.create(w[r]);for(n in t)"undefined"==typeof w[r][n]&&(w[r][n]=t[n]),w[e][n]=t[n]}else w[e]=t,w[r]=t;return this},freshApi:function(e){var t=f();return e&&t.language(e),t},validate:function(e,o,i,s){var a=u(t),c=n?function(e,t,r){return n(e,t,r)||a(e,t,r)}:a,l=new h(r,(!1),c,i,s);"string"==typeof o&&(o={$ref:o}),l.addSchema("",o);var f=l.validateAll(e,o,null,null,"");return!f&&s&&(f=l.banUnknownProperties(e,o)),this.error=f,this.missing=l.missing,this.valid=null===f,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,o,i,s){var a=u(t),c=n?function(e,t,r){return n(e,t,r)||a(e,t,r)}:a,l=new h(r,(!0),c,i,s);"string"==typeof o&&(o={$ref:o}),l.addSchema("",o),l.validateAll(e,o,null,null,""),s&&l.banUnknownProperties(e,o);var f={};return f.errors=l.errors,f.missing=l.missing,f.valid=0===f.errors.length,f},addSchema:function(){return r.addSchema.apply(r,arguments)},getSchema:function(){return r.getSchema.apply(r,arguments)},getSchemaMap:function(){return r.getSchemaMap.apply(r,arguments)},getSchemaUris:function(){return r.getSchemaUris.apply(r,arguments)},getMissingUris:function(){return r.getMissingUris.apply(r,arguments)},dropSchemas:function(){r.dropSchemas.apply(r,arguments)},defineKeyword:function(){r.defineKeyword.apply(r,arguments)},defineError:function(e,t,n){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||t<1e4)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof m[e])throw new Error("Error already defined: "+e+" as "+m[e]);if("undefined"!=typeof _[t])throw new Error("Error code already used: "+_[t]+" as "+t);m[e]=t,_[t]=e,v[e]=v[t]=n;for(var r in w){var o=w[r];o[e]&&(o[t]=o[t]||o[e])}},reset:function(){r.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:a,resolveUrl:i,getDocumentUri:s,errorCodes:m};return o.language(e||"en"),o}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var i=[];for(var s in o)e.call(o,s)&&i.push(s);if(t)for(var a=0;a<r;a++)e.call(o,n[a])&&i.push(n[a]);return i}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var o=r>=0?r:Math.max(n-Math.abs(r),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(n){return!0}});var d={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},p={"*":!0};n.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var h=function(e,t,n,r,o){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,r&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),o&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=n||u("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var i in e.definedKeywords)this.definedKeywords[i]=e.definedKeywords[i].slice(0)};h.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},h.prototype.createError=function(e,t,n,r,o,i,s){var a=new c(e,t,n,r,o);return a.message=this.errorReporter(a,i,s),a},h.prototype.returnError=function(e){return e},h.prototype.collectError=function(e){return e&&this.errors.push(e),null},h.prototype.prefixErrors=function(e,t,n){for(var r=e;r<this.errors.length;r++)this.errors[r]=this.errors[r].prefixWith(t,n);return this},h.prototype.banUnknownProperties=function(e,t){for(var n in this.unknownPropertyPaths){var r=this.createError(m.UNKNOWN_PROPERTY,{path:n},n,"",null,e,t),o=this.handleError(r);if(o)return o}return null},h.prototype.addFormat=function(e,t){if("object"==typeof e){for(var n in e)this.addFormat(n,e[n]);return this}this.formatValidators[e]=t},h.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(m.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},h.prototype.getSchema=function(e,t){var n;if(void 0!==this.schemas[e])return n=this.schemas[e],this.resolveRefs(n,t);var r=e,o="";if(e.indexOf("#")!==-1&&(o=e.substring(e.indexOf("#")+1),r=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[r]){n=this.schemas[r];var i=decodeURIComponent(o);if(""===i)return this.resolveRefs(n,t);if("/"!==i.charAt(0))return;for(var s=i.split("/").slice(1),a=0;a<s.length;a++){var u=s[a].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===n[u]){n=void 0;break}n=n[u]}if(void 0!==n)return this.resolveRefs(n,t)}void 0===this.missing[r]&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},h.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.searchSchemas(e[n],t);else if(e&&"object"==typeof e){"string"==typeof e.id&&l(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){var o=s(e[r]);o&&void 0===this.schemas[o]&&void 0===this.missingMap[o]&&(this.missingMap[o]=o)}}},h.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}e===s(e)+"#"&&(e=s(e)),this.schemas[e]=t,delete this.missingMap[e],a(t,e),this.searchSchemas(t,e)},h.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},h.prototype.getSchemaUris=function(e){var t=[];for(var n in this.schemas)e&&!e.test(n)||t.push(n);return t},h.prototype.getMissingUris=function(e){var t=[];for(var n in this.missingMap)e&&!e.test(n)||t.push(n);return t},h.prototype.dropSchemas=function(){this.schemas={},this.reset()},h.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},h.prototype.validateAll=function(e,t,n,r,o){var i;if(t=this.resolveRefs(t),!t)return null;if(t instanceof c)return this.errors.push(t),t;var s,a=this.errors.length,u=null,l=null;if(this.checkRecursive&&e&&"object"==typeof e){if(i=!this.scanned.length,e[this.validatedSchemasKey]){var f=e[this.validatedSchemasKey].indexOf(t);if(f!==-1)return this.errors=this.errors.concat(e[this.validationErrorsKey][f]),null}if(Object.isFrozen(e)&&(s=this.scannedFrozen.indexOf(e),s!==-1)){var d=this.scannedFrozenSchemas[s].indexOf(t);if(d!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][d]),null}if(this.scanned.push(e),Object.isFrozen(e))s===-1&&(s=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),u=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][u]=t,this.scannedFrozenValidationErrors[s][u]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(p){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}l=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][l]=t,e[this.validationErrorsKey][l]=[]}}var h=this.errors.length,y=this.validateBasic(e,t,o)||this.validateNumeric(e,t,o)||this.validateString(e,t,o)||this.validateArray(e,t,o)||this.validateObject(e,t,o)||this.validateCombinations(e,t,o)||this.validateHypermedia(e,t,o)||this.validateFormat(e,t,o)||this.validateDefinedKeywords(e,t,o)||null;if(i){for(;this.scanned.length;){var g=this.scanned.pop();delete g[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(y||h!==this.errors.length)for(;n&&n.length||r&&r.length;){var m=n&&n.length?""+n.pop():null,_=r&&r.length?""+r.pop():null;y&&(y=y.prefixWith(m,_)),this.prefixErrors(h,m,_)}return null!==u?this.scannedFrozenValidationErrors[s][u]=this.errors.slice(a):null!==l&&(e[this.validationErrorsKey][l]=this.errors.slice(a)),this.handleError(y)},h.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var n=this.formatValidators[t.format].call(null,e,t);return"string"==typeof n||"number"==typeof n?this.createError(m.FORMAT_CUSTOM,{message:n},"","/format",null,e,t):n&&"object"==typeof n?this.createError(m.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||"",n.schemaPath||"/format",null,e,t):null},h.prototype.validateDefinedKeywords=function(e,t,n){for(var r in this.definedKeywords)if("undefined"!=typeof t[r])for(var o=this.definedKeywords[r],i=0;i<o.length;i++){var s=o[i],a=s(e,t[r],t,n);if("string"==typeof a||"number"==typeof a)return this.createError(m.KEYWORD_CUSTOM,{key:r,message:a},"","",null,e,t).prefixWith(null,r);if(a&&"object"==typeof a){var u=a.code;if("string"==typeof u){if(!m[u])throw new Error("Undefined error code (use defineError): "+u);u=m[u]}else"number"!=typeof u&&(u=m.KEYWORD_CUSTOM);var c="object"==typeof a.message?a.message:{key:r,message:a.message||"?"},l=a.schemaPath||"/"+r.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(u,c,a.dataPath||null,l,null,e,t)}}return null},h.prototype.validateBasic=function(e,t,n){var r;return(r=this.validateType(e,t,n))?r.prefixWith(null,"type"):(r=this.validateEnum(e,t,n))?r.prefixWith(null,"type"):null},h.prototype.validateType=function(e,t){if(void 0===t.type)return null;var n=typeof e;null===e?n="null":Array.isArray(e)&&(n="array");var r=t.type;Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var i=r[o];if(i===n||"integer"===i&&"number"===n&&e%1===0)return null}return this.createError(m.INVALID_TYPE,{type:n,expected:r.join("/")},"","",null,e,t)},h.prototype.validateEnum=function(e,t){if(void 0===t["enum"])return null;for(var n=0;n<t["enum"].length;n++){var o=t["enum"][n];if(r(e,o))return null}return this.createError(m.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},h.prototype.validateNumeric=function(e,t,n){return this.validateMultipleOf(e,t,n)||this.validateMinMax(e,t,n)||this.validateNaN(e,t,n)||null};var y=Math.pow(2,-51),g=1-y;h.prototype.validateMultipleOf=function(e,t){var n=t.multipleOf||t.divisibleBy;if(void 0===n)return null;if("number"==typeof e){var r=e/n%1;if(r>=y&&r<g)return this.createError(m.NUMBER_MULTIPLE_OF,{value:e,multipleOf:n},"","",null,e,t)}return null},h.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(m.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(m.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(m.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(m.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},h.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:isNaN(e)===!0||e===1/0||e===-(1/0)?this.createError(m.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},h.prototype.validateString=function(e,t,n){return this.validateStringLength(e,t,n)||this.validateStringPattern(e,t,n)||null},h.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(m.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(m.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},h.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var n;if(t.pattern instanceof RegExp)n=t.pattern;else{var r,o="",i=t.pattern.match(/^\/(.+)\/([img]*)$/);i?(r=i[1],o=i[2]):r=t.pattern,n=new RegExp(r,o)}return n.test(e)?null:this.createError(m.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},h.prototype.validateArray=function(e,t,n){return Array.isArray(e)?this.validateArrayLength(e,t,n)||this.validateArrayUniqueItems(e,t,n)||this.validateArrayItems(e,t,n)||null:null},h.prototype.validateArrayLength=function(e,t){var n;return void 0!==t.minItems&&e.length<t.minItems&&(n=this.createError(m.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(n))?n:void 0!==t.maxItems&&e.length>t.maxItems&&(n=this.createError(m.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(n))?n:null},h.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var n=0;n<e.length;n++)for(var o=n+1;o<e.length;o++)if(r(e[n],e[o])){var i=this.createError(m.ARRAY_UNIQUE,{match1:n,match2:o},"","/uniqueItems",null,e,t);if(this.handleError(i))return i}return null},h.prototype.validateArrayItems=function(e,t,n){if(void 0===t.items)return null;var r,o;if(Array.isArray(t.items)){for(o=0;o<e.length;o++)if(o<t.items.length){if(r=this.validateAll(e[o],t.items[o],[o],["items",o],n+"/"+o))return r}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(r=this.createError(m.ARRAY_ADDITIONAL_ITEMS,{},"/"+o,"/additionalItems",null,e,t),this.handleError(r)))return r}else if(r=this.validateAll(e[o],t.additionalItems,[o],["additionalItems"],n+"/"+o))return r}else for(o=0;o<e.length;o++)if(r=this.validateAll(e[o],t.items,[o],["items"],n+"/"+o))return r;return null},h.prototype.validateObject=function(e,t,n){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,n)||this.validateObjectRequiredProperties(e,t,n)||this.validateObjectProperties(e,t,n)||this.validateObjectDependencies(e,t,n)||null},h.prototype.validateObjectMinMaxProperties=function(e,t){var n,r=Object.keys(e);return void 0!==t.minProperties&&r.length<t.minProperties&&(n=this.createError(m.OBJECT_PROPERTIES_MINIMUM,{propertyCount:r.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(n))?n:void 0!==t.maxProperties&&r.length>t.maxProperties&&(n=this.createError(m.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:r.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(n))?n:null},h.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var n=0;n<t.required.length;n++){var r=t.required[n];if(void 0===e[r]){var o=this.createError(m.OBJECT_REQUIRED,{key:r},"","/required/"+n,null,e,t);if(this.handleError(o))return o}}return null},h.prototype.validateObjectProperties=function(e,t,n){var r;for(var o in e){var i=n+"/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),s=!1;if(void 0!==t.properties&&void 0!==t.properties[o]&&(s=!0,r=this.validateAll(e[o],t.properties[o],[o],["properties",o],i)))return r;if(void 0!==t.patternProperties)for(var a in t.patternProperties){var u=new RegExp(a);if(u.test(o)&&(s=!0,r=this.validateAll(e[o],t.patternProperties[a],[o],["patternProperties",a],i)))return r}if(s)this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,
delete this.unknownPropertyPaths[i]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(r=this.createError(m.OBJECT_ADDITIONAL_PROPERTIES,{key:o},"","/additionalProperties",null,e,t).prefixWith(o,null),this.handleError(r)))return r}else if(r=this.validateAll(e[o],t.additionalProperties,[o],["additionalProperties"],i))return r}else this.trackUnknownProperties&&!this.knownPropertyPaths[i]&&(this.unknownPropertyPaths[i]=!0)}return null},h.prototype.validateObjectDependencies=function(e,t,n){var r;if(void 0!==t.dependencies)for(var o in t.dependencies)if(void 0!==e[o]){var i=t.dependencies[o];if("string"==typeof i){if(void 0===e[i]&&(r=this.createError(m.OBJECT_DEPENDENCY_KEY,{key:o,missing:i},"","",null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(Array.isArray(i))for(var s=0;s<i.length;s++){var a=i[s];if(void 0===e[a]&&(r=this.createError(m.OBJECT_DEPENDENCY_KEY,{key:o,missing:a},"","/"+s,null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(r=this.validateAll(e,i,[],["dependencies",o],n))return r}return null},h.prototype.validateCombinations=function(e,t,n){return this.validateAllOf(e,t,n)||this.validateAnyOf(e,t,n)||this.validateOneOf(e,t,n)||this.validateNot(e,t,n)||null},h.prototype.validateAllOf=function(e,t,n){if(void 0===t.allOf)return null;for(var r,o=0;o<t.allOf.length;o++){var i=t.allOf[o];if(r=this.validateAll(e,i,[],["allOf",o],n))return r}return null},h.prototype.validateAnyOf=function(e,t,n){if(void 0===t.anyOf)return null;var r,o,i=[],s=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var a=!0,u=0;u<t.anyOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.anyOf[u],l=this.errors.length,f=this.validateAll(e,c,[],["anyOf",u],n);if(null===f&&l===this.errors.length){if(this.errors=this.errors.slice(0,s),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete r[d];for(var p in this.unknownPropertyPaths)o[p]||(r[p]=!0);a=!1;continue}return null}f&&i.push(f.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=o),a?(i=i.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(m.ANY_OF_MISSING,{},"","/anyOf",i,e,t)):void 0},h.prototype.validateOneOf=function(e,t,n){if(void 0===t.oneOf)return null;var r,o,i=null,s=[],a=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var u=0;u<t.oneOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.oneOf[u],l=this.errors.length,f=this.validateAll(e,c,[],["oneOf",u],n);if(null===f&&l===this.errors.length){if(null!==i)return this.errors=this.errors.slice(0,a),this.createError(m.ONE_OF_MULTIPLE,{index1:i,index2:u},"","/oneOf",null,e,t);if(i=u,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete r[d];for(var p in this.unknownPropertyPaths)o[p]||(r[p]=!0)}}else f&&s.push(f)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=o),null===i?(s=s.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(m.ONE_OF_MISSING,{},"","/oneOf",s,e,t)):(this.errors=this.errors.slice(0,a),null)},h.prototype.validateNot=function(e,t,n){if(void 0===t.not)return null;var r,o,i=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,o=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var s=this.validateAll(e,t.not,null,null,n),a=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=o),null===s&&0===a.length?this.createError(m.NOT_PASSED,{},"","/not",null,e,t):null},h.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var o,i=0;i<t.links.length;i++){var s=t.links[i];if("describedby"===s.rel){for(var a=new n(s.href),u=!0,c=0;c<a.varNames.length;c++)if(!(a.varNames[c]in e)){u=!1;break}if(u){var l=a.fillFromObject(e),f={$ref:l};if(o=this.validateAll(e,f,[],["links",i],r))return o}}}};var m={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},_={};for(var b in m)_[m[b]]=b;var v={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="ValidationError",c.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(e,t);return this};var w={},k=f();return k.addLanguage("en-gb",v),k.tv4=k,k})},{}],113:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.RuntimeCatalogue=void 0;var o=e("./runtime-catalogue/RuntimeCatalogue"),i=r(o);n.RuntimeCatalogue=i["default"]},{"./runtime-catalogue/RuntimeCatalogue":123}],114:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.DataObjectSourceLanguage=n.CatalogueObjectType=void 0;var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(l),d=e("babel-runtime/helpers/inherits"),p=r(d),h=e("../reTHINKObject/RethinkObject"),y=r(h),g=function(e){function t(e,n,r,o,s,u,c){(0,a["default"])(this,t);var l=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this));return l._guid=e,l._type=n,l._version=r,l._objectName=o,l._description=s,l._language=u,l._sourcePackageURL=c,l._signature=null,l._sourcePackage=null,l}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"guid",get:function(){return this._guid},set:function(e){e&&(this._guid=e)}},{key:"type",get:function(){return this._type},set:function(e){e&&(this._type=e)}},{key:"version",get:function(){return this._version},set:function(e){e&&(this._version=e)}},{key:"objectName",get:function(){return this._objectName},set:function(e){e&&(this._objectName=e)}},{key:"description",get:function(){return this._description},set:function(e){e&&(this._description=e)}},{key:"language",get:function(){return this._language},set:function(e){e&&(this._language=e)}},{key:"signature",get:function(){return this._signature},set:function(e){e&&(this._signature=e)}},{key:"sourcePackage",get:function(){return this._sourcePackage},set:function(e){e&&(this._sourcePackage=e)}},{key:"sourcePackageURL",get:function(){return this._sourcePackageURL},set:function(e){e&&(this._sourcePackageURL=e)}}]),t}(y["default"]);n.CatalogueObjectType={HYPERTY:"hyperty",PROTOSTUB:"protostub",HYPERTY_RUNTIME:"hyperty_runtime",HYPERTY_INTERCEPTOR:"hyperty_inspector",HYPERTY_DATA_OBJECT:"hyperty_data_object"},n.DataObjectSourceLanguage={JAVASCRIPT_ECMA6:"javascript_ecma6",JAVASCRIPT_ECMA5:"javascript_ecma5",JSON_SCHEMA_V4:"json_schema_v4",PYTHON:"python",TYPESCRIPT:"typescript"},n["default"]=g},{"../reTHINKObject/RethinkObject":122,"babel-runtime/core-js/object/get-prototype-of":6,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/possibleConstructorReturn":14}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),s=e("babel-runtime/helpers/createClass"),a=r(s),u=e("./CatalogueDataObject"),c=r(u),l=e("./SourcePackage"),f=r(l),d=e("./HypertyDescriptor"),p=r(d),h=e("./ProtocolStubDescriptor"),y=r(h),g=e("./HypertyRuntimeDescriptor"),m=r(g),_=e("./HypertyInterceptorDescriptor"),b=r(_),v=e("./DataObjectSchema"),w=function(){function e(){(0,i["default"])(this,e)}return(0,a["default"])(e,[{key:"createCatalogueDataObject",value:function(e,t,n,r,o,i,s){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof s)throw new Error("Invalid parameters!");return new c["default"](e,t,n,r,o,i,s)}},{key:"createHypertyDescriptorObject",value:function(e,t,n,r,o,i,s,a){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof s||"undefined"==typeof a)throw new Error("Invalid parameters!");return new p["default"](e,u.CatalogueObjectType.HYPERTY,t,n,r,o,i,s,a)}},{key:"createProtoStubDescriptorObject",value:function(e,t,n,r,o,i,s,a,c,l,f,d,p,h){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof s||"undefined"==typeof a||"undefined"==typeof c)throw new Error("Invalid parameters!");return new y["default"](e,u.CatalogueObjectType.PROTOSTUB,t,n,r,o,i,s,a,c,l,f,d,p,h)}},{key:"createHypertyRuntimeDescriptorObject",value:function(e,t,n,r,o,i,s,a,c,l,f){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof s)throw new Error("Invalid parameters!");return new m["default"](e,u.CatalogueObjectType.HYPERTY_RUNTIME,t,n,r,o,i,s,a,c,l,f)}},{key:"createHypertyInterceptorDescriptorObject",value:function(e,t,n,r,o,i,s,a){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i)throw new Error("Invalid parameters!");return new b["default"](e,u.CatalogueObjectType.HYPERTY_INTERCEPTOR,t,n,r,o,i,s,a)}},{key:"createDataObjectSchema",value:function(e,t,n,r,o,i){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i)throw new Error("Invalid parameters!");return new v.DataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i)}},{key:"createMessageDataObjectSchema",value:function(e,t,n,r,o,i){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i)throw new Error("Invalid parameters!");return new v.DataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i)}},{key:"createHypertyDataObjectSchema",value:function(e,t,n,r,o,i,s,a){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a||"undefined"==typeof s)throw new Error("Invalid parameters!");return a===v.DataUrlScheme.COMM?new v.CommunicationDataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i,a,s):a===v.DataUrlScheme.CONNECTION?new v.ConnectionDataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i,a,s):a===v.DataUrlScheme.CTXT?new v.ContextDataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i,a,s):a===v.DataUrlScheme.IDENTITY?new v.IdentityDataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i,a,s):void 0}},{key:"createSourcePackage",value:function(e,t){if("undefined"==typeof t||"undefined"==typeof e)throw new Error("Invalid parameters!");return new f["default"](e,t)}}]),e}();n["default"]=w,t.exports=n["default"]},{"./CatalogueDataObject":114,"./DataObjectSchema":116,"./HypertyDescriptor":117,"./HypertyInterceptorDescriptor":118,"./HypertyRuntimeDescriptor":119,"./ProtocolStubDescriptor":120,"./SourcePackage":121,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.DataUrlScheme=n.ContextDataObjectSchema=n.IdentityDataObjectSchema=n.ConnectionDataObjectSchema=n.CommunicationDataObjectSchema=n.HypertyDataObjectSchema=n.MessageDataObjectSchema=n.DataObjectSchema=void 0;var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/possibleConstructorReturn"),c=r(u),l=e("babel-runtime/helpers/inherits"),f=r(l),d=e("./CatalogueDataObject"),p=r(d),h=n.DataObjectSchema=function(e){function t(e,n,r,o,s,u,l){return(0,a["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,l))}return(0,f["default"])(t,e),t}(p["default"]),y=(n.MessageDataObjectSchema=function(e){function t(e,n,r,o,s,u,l){return(0,a["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,l))}return(0,f["default"])(t,e),t}(h),n.HypertyDataObjectSchema=function(e){function t(e,n,r,o,s,u,l,f,d){(0,a["default"])(this,t);var p=(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,l));return p._accessControlPolicy=f,p._scheme=d,p}return(0,f["default"])(t,e),t}(h));n.CommunicationDataObjectSchema=function(e){function t(e,n,r,o,s,u,l,f){return(0,a["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,l,f))}return(0,f["default"])(t,e),t}(y),n.ConnectionDataObjectSchema=function(e){function t(e,n,r,o,s,u,l,f){return(0,a["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,l,f))}return(0,f["default"])(t,e),t}(y),n.IdentityDataObjectSchema=function(e){function t(e,n,r,o,s,u,l,f){return(0,a["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,l,f))}return(0,f["default"])(t,e),t}(y),n.ContextDataObjectSchema=function(e){function t(e,n,r,o,s,u,l,f){return(0,a["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,l,f))}return(0,f["default"])(t,e),t}(y),n.DataUrlScheme={COMM:"COMM",CONNECTION:"CONNECTION",CTXT:"CTXT",IDENTITY:"IDENTITY"},n["default"]=h},{"./CatalogueDataObject":114,"babel-runtime/core-js/object/get-prototype-of":6,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/possibleConstructorReturn":14}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.HypertyResourceType=n.HypertyType=n.RuntimeHypertyCapabilityType=void 0;var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(l),d=e("babel-runtime/helpers/inherits"),p=r(d),h=e("./CatalogueDataObject"),y=r(h),g=function(e){function t(e,n,r,o,s,u,c,l,d){(0,a["default"])(this,t);var p=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,c));return p._configuration={},p._constraints={},p._policies={},p._messageSchema=null,p._hypertyType=l,p._dataObjects=d,p}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"hypertyType",get:function(){return this._hypertyType},set:function(e){e&&(this._hypertyType=e)}},{key:"dataObjects",get:function(){return this._dataObjects},set:function(e){e&&(this._dataObjects=e)}},{key:"configuration",get:function(){return this._configuration},set:function(e){e&&(this._configuration=e)}},{key:"constraints",get:function(){return this._constraints},set:function(e){e&&(this._constraints=e)}},{key:"messageSchema",get:function(){return this._messageSchema},set:function(e){e&&(this._messageSchema=e)}},{key:"policies",get:function(){return this._policies},set:function(e){e&&(this._policies=e)}}]),t}(y["default"]);n.RuntimeHypertyCapabilityType={},n.HypertyType={COMMUNICATOR:"communicator",IDENTITY:"identity",CONTEXT:"context"},n.HypertyResourceType={chat:"CHAT",audio:"Audio",video:"Video",av:"AV",screen:"SCREEN",file:"FILe",midi:"MIDI"},n["default"]=g},{"./CatalogueDataObject":114,"babel-runtime/core-js/object/get-prototype-of":6,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/possibleConstructorReturn":14}],118:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(l),d=e("babel-runtime/helpers/inherits"),p=r(d),h=e("./CatalogueDataObject"),y=r(h),g=function(e){function t(e,n,r,o,s,u,c,l,d){(0,a["default"])(this,t);var p=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,c));return p._configuration=l,p._policies=d,p}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"configuration",get:function(){return this._configuration},set:function(e){this._configuration=e}},{key:"policies",get:function(){return this._policies},set:function(e){this._policies=e}}]),t}(y["default"]);n["default"]=g,t.exports=n["default"]},{"./CatalogueDataObject":114,"babel-runtime/core-js/object/get-prototype-of":6,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/possibleConstructorReturn":14}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.RuntimeType=n.RuntimeProtocolCapability=n.RuntimeHypertyCapability=void 0;var o=e("babel-runtime/core-js/json/stringify"),i=r(o),s=e("babel-runtime/core-js/object/get-prototype-of"),a=r(s),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),f=r(l),d=e("babel-runtime/helpers/possibleConstructorReturn"),p=r(d),h=e("babel-runtime/helpers/inherits"),y=r(h),g=e("./CatalogueDataObject"),m=r(g),_=function(e){function t(e,n,r,o,i,s,u,l,f,d,h,y){(0,c["default"])(this,t);var g=(0,p["default"])(this,(t.__proto__||(0,a["default"])(t)).call(this,e,n,r,o,i,s,u));return g._runtimeType=l,f?g._hypertyCapabilities=f:g._hypertyCapabilities=new b((!0),(!1),(!1),(!1),(!1)),d?g._protocolCapabilities=d:g._protocolCapabilities=new v((!0),(!1),(!0),(!1),(!1),(!1)),g._p2pHandlerStub=h,g._p2pRequesterStub=y,g}return(0,y["default"])(t,e),(0,f["default"])(t,[{key:"runtimeType",get:function(){return this._runtimeType},set:function(e){e&&(this._runtimeType=e)}},{key:"hypertyCapabilities",get:function(){return this._hypertyCapabilities},set:function(e){e&&(this._hypertyCapabilities=e)}},{key:"protocolCapabilities",get:function(){return this._hypertyCapabilities},set:function(e){e&&(this._protocolCapabilities=e)}},{key:"p2pHandlerStub",get:function(){return this._p2pHandlerStub},set:function(e){this._p2pHandlerStub=e}},{key:"p2pRequesterStub",get:function(){return this._p2pRequesterStub},set:function(e){this._p2pRequesterStub=e}}]),t}(m["default"]),b=n.RuntimeHypertyCapability=function(){function e(t,n,r,o,i){(0,c["default"])(this,e),this._isWebRTC=t,this._isMic=n,this._isCamera=r,this._isSensor=o,this._isORTC=i}return(0,f["default"])(e,[{key:"getCapabilitySet",value:function(){return(0,i["default"])(this)}},{key:"isMic",get:function(){return this._isMic}},{key:"isCamera",get:function(){return this._isCamera}},{key:"isSensor",get:function(){return this._isSensor}},{key:"isWebRTC",get:function(){return this._isWebRTC}},{key:"isORTCS",get:function(){return this._isORTC}}]),e}(),v=n.RuntimeProtocolCapability=function(){function e(t,n,r,o,i,s){(0,c["default"])(this,e),this._isHttp=t,this._isHttps=n,this._isWS=r,this._isWSS=o,this._isCoap=i,this._isDataChannel=s}return(0,f["default"])(e,[{key:"isHttp",value:function(){return this._isHttp}},{key:"isHttps",value:function(){return this._isHttps}},{key:"isWS",value:function(){return this._isWS}},{key:"isSensorSupported",value:function(){return this._isSensor}},{key:"isWSS",value:function(){return this._isWSS}},{key:"isCoap",value:function(){return this._isCoap}},{key:"isDataChannel",value:function(){return this._isDataChannel}},{key:"getCapabilitySet",value:function(){return(0,i["default"])(this)}}]),e}();n.RuntimeType={BROWSER:"browser",STANDALONE:"standalone",SERVER:"server",GATEWAY:"gateway"},n["default"]=_},{"./CatalogueDataObject":114,"babel-runtime/core-js/json/stringify":3,"babel-runtime/core-js/object/get-prototype-of":6,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/possibleConstructorReturn":14}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(l),d=e("babel-runtime/helpers/inherits"),p=r(d),h=e("./CatalogueDataObject"),y=r(h),g=function(e){function t(e,n,r,o,s,u,c,l,d,p,h,y,g,m,_){(0,a["default"])(this,t);var b=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,s,u,c));return b._messageSchemas=l,d?b._configuration=d:b._configuration={},p?b._constraints=p:b._constraints={},b._hypertyType=h,y?b._dataObjects=y:b._dataObjects=[],b._interworking=g,b._idpProxy=m,b._mutualAuthentication=_,b}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"messageSchemas",get:function(){return this._messageSchemas},set:function(e){e&&(this._messageSchemas=e)}},{key:"constraints",get:function(){return this._constraints},set:function(e){e&&(this._constraints=e)}},{key:"configuration",get:function(){return this._configuration},set:function(e){e&&(this._configuration=e)}},{key:"hypertyType",get:function(){return this._hypertyType},set:function(e){this._hypertyType=e}},{key:"dataObjects",get:function(){return this._dataObjects},set:function(e){this._dataObjects=e}},{key:"interworking",get:function(){return this._interworking},set:function(e){this._interworking=e}},{key:"idpProxy",get:function(){return this._idpProxy},set:function(e){this._idpProxy=e}},{key:"mutualAuthentication",get:function(){return this._mutualAuthentication},set:function(e){this._mutualAuthentication=e}}]),t}(y["default"]);n["default"]=g,t.exports=n["default"]},{"./CatalogueDataObject":114,"babel-runtime/core-js/object/get-prototype-of":6,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/possibleConstructorReturn":14}],121:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),s=e("babel-runtime/helpers/createClass"),a=r(s),u=function(){function e(t,n){(0,i["default"])(this,e),this._sourceCode=n,this._sourceCodeClassname=t,this._encoding=null,this._signature=null}return(0,a["default"])(e,[{key:"sourceCode",get:function(){return this._sourceCode},set:function(e){e&&(this._sourceCode=e)}},{key:"sourceCodeClassname",get:function(){return this._sourceCodeClassname},set:function(e){e&&(this._sourceCodeClassname=e)}},{key:"encoding",get:function(){return this._encoding},set:function(e){e&&(this._encoding=e)}},{key:"signature",get:function(){return this._signature},set:function(e){e&&(this._signature=e)}}]),e}();n["default"]=u,t.exports=n["default"]},{"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12}],122:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.RethinkObject=void 0;var o=e("babel-runtime/core-js/json/stringify"),i=r(o),s=e("babel-runtime/helpers/classCallCheck"),a=r(s),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("tv4"),f=r(l),d=n.RethinkObject=function(){function e(){(0,a["default"])(this,e)}return(0,c["default"])(e,[{key:"validate",value:function(e){f["default"].addSchema(e.id,e);var t=f["default"].validateMultiple(JSON.parse((0,i["default"])(this)),e);return t.errors.forEach(function(e){delete e.stack}),(!t.valid||t.missing.length>0)&&(console.warn("Object validation "+(t.valid?"succeeded, but schema contained references:":"failed:"),(0,i["default"])(t,null,2)),console.log("Object:",(0,i["default"])(this,null,2))),t.valid}}]),e}();n["default"]=d},{"babel-runtime/core-js/json/stringify":3,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12,tv4:112}],123:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/slicedToArray"),i=r(o),s=e("babel-runtime/core-js/promise"),a=r(s),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),f=r(l),d=e("../catalogue-factory/CatalogueDataObjectFactory"),p=r(d),h=function(){function e(t){if((0,c["default"])(this,e),!t)throw Error("The catalogue needs the runtimeFactory");this._factory=new p["default"],this.httpRequest=t.createHttpRequest(),this.atob=t.atob?t.atob:atob,this.storageManager=t.storageManager()}return(0,f["default"])(e,[{key:"getDescriptor",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];console.log("getting descriptor from:",e);var o=!1,s=!1,u=a["default"].all([this.httpRequest.get(e+"/version"),this.httpRequest.get(e+"/cguid")]).then(function(t){var r=(0,i["default"])(t,2),s=r[0],a=r[1];return console.log("got version ("+s+") and cguid ("+a+") for descriptor "+e),n.storageManager.getVersion(a).then(function(t){return t>=s?(console.log("storageManager contains saved version that is the same or newer than requested"),o=!0,n.storageManager.get(a)):(console.log("storageManager does not contain saved version"),n.httpRequest.get(e).then(function(e){if(e=JSON.parse(e),e.ERROR)throw new Error(e);return e}))})})["catch"](function(t){var n="Unable to get descriptor for "+e+": "+t;throw console.error(n),new Error(n)}),c=u;return r&&(console.log("adding promise to attach sourcePackage"),c=u.then(function(e){return e.sourcePackage?(s=!0,e):(s=!1,n.attachRawSourcePackage(e))})),c=c.then(function(e){return(!o||o&&!s&&r)&&n.storageManager.set(e.cguid,e.version,e),t.apply(n,[e])})}},{key:"attachRawSourcePackage",value:function(e){var t=this;return console.log("attaching raw sourcePackage from:",e.sourcePackageURL),new a["default"](function(n){t.httpRequest.get(e.sourcePackageURL).then(function(t){t=JSON.parse(t),e.sourcePackage=t,n(e)})})}},{key:"getHypertyDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getDescriptor(e,this.createHyperty,t)}},{key:"getStubDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getDescriptor(e,this.createStub,t)}},{key:"getRuntimeDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getDescriptor(e,this.createRuntimeDescriptor,t)}},{key:"getDataSchemaDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getDescriptor(e,this.createDataSchema,t)}},{key:"getIdpProxyDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getDescriptor(e,this.createIdpProxy,t)}},{key:"createHyperty",value:function(e){var t=this._factory.createHypertyDescriptorObject(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.type||e.hypertyType,e.dataObjects);t.configuration=e.configuration,t.constraints=e.constraints,t.messageSchema=e.messageSchema,t.policies=e.policies,t.signature=e.signature;var n=e.sourcePackage;return n&&(t.sourcePackage=this.createSourcePackage(n)),t}},{key:"createStub",value:function(e){var t=this._factory.createProtoStubDescriptorObject(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.messageSchemas,e.configuration,e.constraints,e.hypertyType,e.dataObjects,e.interworking,e.idpProxy,e.mutualAuthentication);t.signature=e.signature;var n=e.sourcePackage;return n&&(t.sourcePackage=this.createSourcePackage(n)),t}},{key:"createRuntimeDescriptor",value:function(e){try{e.hypertyCapabilities=JSON.parse(e.hypertyCapabilities),e.protocolCapabilities=JSON.parse(e.protocolCapabilities)}catch(t){}var n=this._factory.createHypertyRuntimeDescriptorObject(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.type||e.runtimeType,e.hypertyCapabilities,e.protocolCapabilities,e.p2pHandlerStub,e.p2pRequesterStub);n.signature=e.signature;var r=e.sourcePackage;return r&&(n.sourcePackage=this.createSourcePackage(r)),n}},{key:"createDataSchema",value:function(e){var t=void 0;t=e.accessControlPolicy&&e.scheme?this._factory.createHypertyDataObjectSchema(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.accessControlPolicy,e.scheme):this._factory.createMessageDataObjectSchema(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL),t.signature=e.signature;var n=e.sourcePackage;if(n){t.sourcePackage=this.createSourcePackage(n);try{t.sourcePackage.sourceCode=JSON.parse(t.sourcePackage.sourceCode)}catch(r){console.log("DataSchema Source code is already parsed")}return t}return t}},{key:"createIdpProxy",value:function(e){
var t=this._factory.createProtoStubDescriptorObject(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.messageSchemas,e.configuration,e.constraints);t.signature=e.signature;var n=e.sourcePackage;return n&&(n=this.createSourcePackage(n),t.sourcePackage=n),t}},{key:"createSourcePackage",value:function(e){"base64"===e.encoding&&(e.sourceCode=this.atob(e.sourceCode));var t=this._factory.createSourcePackage(e.sourceCodeClassname,e.sourceCode);return e.encoding&&(t.encoding=e.encoding),e.signature&&(t.signature=e.signature),t}},{key:"getSourcePackageFromURL",value:function(e){var t=this;return console.log("getting sourcePackage from:",e),new a["default"](function(n,r){t.httpRequest.get(e).then(function(e){if(e.ERROR)r(e);else{e=JSON.parse(e);var o=t.createSourcePackage(e);n(o)}})["catch"](function(e){r(e)})})}},{key:"getSourceCodeFromDescriptor",value:function(e){var t=this;return new a["default"](function(n,r){e.sourcePackage?n(e.sourcePackage.sourceCode):t.storageManager.getVersion(e.sourcePackageURL+"/sourceCode").then(function(o){o>=e.version?(console.log("returning cached version from storageManager"),t.storageManager.get(e.sourcePackageURL+"/sourceCode").then(function(e){n(e)})):t.httpRequest.get(e.sourcePackageURL+"/sourceCode").then(function(o){o.ERROR?r(o):(t.storageManager.set(e.sourcePackageURL+"/sourceCode",e.version,o),n(o))})})})}},{key:"deleteFromPM",value:function(e){return this.storageManager["delete"](e)}},{key:"runtimeURL",set:function(e){this._runtimeURL=e},get:function(){return this._runtimeURL}}]),e}();n["default"]=h,t.exports=n["default"]},{"../catalogue-factory/CatalogueDataObjectFactory":115,"babel-runtime/core-js/promise":8,"babel-runtime/helpers/classCallCheck":11,"babel-runtime/helpers/createClass":12,"babel-runtime/helpers/slicedToArray":15}]},{},[113])(113)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n,r){(function(o){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.StorageManager=e()}}(function(){return function t(n,r,o){function i(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return i(t?t:e)},f,f.exports,t,n,r,o)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":4}],2:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/define-property"),i=r(o);n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":1}],4:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":7,"../../modules/es6.object.define-property":20}],5:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],6:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":16}],7:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],8:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":5}],9:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":12}],10:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":13,"./_is-object":16}],11:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),s=e("./_hide"),a="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,g=e&u.B,m=e&u.W,_=p?o:o[t]||(o[t]={}),b=_[a],v=p?r:h?r[t]:(r[t]||{})[a];p&&(n=t);for(c in n)l=!d&&v&&void 0!==v[c],l&&c in _||(f=l?v[c]:n[c],_[c]=p&&"function"!=typeof v[c]?n[c]:g&&l?i(f,r):m&&v[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((_.virtual||(_.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&s(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":7,"./_ctx":8,"./_global":13,"./_hide":14}],12:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],13:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],14:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":9,"./_object-dp":17,"./_property-desc":18}],15:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":9,"./_dom-create":10,"./_fails":12}],16:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],17:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),s=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":6,"./_descriptors":9,"./_ie8-dom-define":15,"./_to-primitive":19}],18:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],19:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":16}],20:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":9,"./_export":11,"./_object-dp":17}],21:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),s=e("babel-runtime/helpers/createClass"),a=r(s),u=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if((0,i["default"])(this,e),!t)throw Error("The Storage Manager needs the database instance");if(!n)throw Error("The Storage Manager needs the storage name");var o={};o[n]="key,version,value",t.version(r).stores(o),t.open().then(function(e){console.info("Found database name "+e.name+" with version no: "+e.verno)})["catch"](console.error),this.db=t,this.storageName=n}return(0,a["default"])(e,[{key:"_checkKey",value:function(e){return"string"!=typeof e?e.toString():e}},{key:"set",value:function(e,t,n){return console.info("[StorageManager] - set ",e),this.db[this.storageName].put({key:this._checkKey(e),version:t,value:n})}},{key:"get",value:function(e){return console.info("[StorageManager] - get ",e),this.db[this.storageName].where("key").equals(this._checkKey(e)).first().then(function(e){if(e)return e.value})["catch"](function(t){console.info("error getting the key ",e," with error: ",t)})}},{key:"getVersion",value:function(e){return console.info("[StorageManager] - getVersion for key ",e),this.db[this.storageName].where("key").equals(this._checkKey(e)).first().then(function(e){if(e)return e.version})["catch"](function(t){console.info("error getting the version for ",e," with error: ",t)})}},{key:"delete",value:function(e){return this.db[this.storageName].where("key").equals(this._checkKey(e))["delete"]()}}]),e}();n["default"]=u,t.exports=n["default"]},{"babel-runtime/helpers/classCallCheck":2,"babel-runtime/helpers/createClass":3}]},{},[21])(21)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,n,r){!function(e,o){"use strict";"object"==typeof r?n.exports=o():"function"==typeof t&&t.amd?t(o):e.IPv6=o(e)}(this,function(e){"use strict";function t(e){var t=e.toLowerCase(),n=t.split(":"),r=n.length,o=8;""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[r-1]&&""===n[r-2]&&n.pop(),r=n.length,n[r-1].indexOf(".")!==-1&&(o=7);var i;for(i=0;i<r&&""!==n[i];i++);if(i<o)for(n.splice(i,1,"0000");n.length<o;)n.splice(i,0,"0000");for(var s,a=0;a<o;a++){s=n[a].split("");for(var u=0;u<3&&("0"===s[0]&&s.length>1);u++)s.splice(0,1);n[a]=s.join("")}var c=-1,l=0,f=0,d=-1,p=!1;for(a=0;a<o;a++)p?"0"===n[a]?f+=1:(p=!1,f>l&&(c=d,l=f)):"0"===n[a]&&(p=!0,d=a,f=1);f>l&&(c=d,l=f),l>1&&n.splice(c,l,""),r=n.length;var h="";for(""===n[0]&&(h=":"),a=0;a<r&&(h+=n[a],a!==r-1);a++)h+=":";return""===n[r-1]&&(h+=":"),h}function n(){return e.IPv6===this&&(e.IPv6=r),this}var r=e&&e.IPv6;return{best:t,noConflict:n}})},{}],8:[function(e,n,r){!function(e,o){"use strict";"object"==typeof r?n.exports=o():"function"==typeof t&&t.amd?t(o):e.SecondLevelDomains=o(e)}(this,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var r=e.lastIndexOf(".",t-1);if(r<=0||r>=t-1)return!1;var o=n.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(r+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var r=e.lastIndexOf(".",t-1);if(r>=0)return!1;var o=n.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var r=e.lastIndexOf(".",t-1);if(r<=0||r>=t-1)return null;var o=n.list[e.slice(t+1)];return o?o.indexOf(" "+e.slice(r+1,t)+" ")<0?null:e.slice(r+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n})},{}],9:[function(e,n,r){!function(o,i){"use strict";"object"==typeof r?n.exports=i(e("./punycode"),e("./IPv6"),e("./SecondLevelDomains")):"function"==typeof t&&t.amd?t(["./punycode","./IPv6","./SecondLevelDomains"],i):o.URI=i(o.punycode,o.IPv6,o.SecondLevelDomains,o)}(this,function(e,t,n,r){"use strict";function o(e,t){var n=arguments.length>=1,r=arguments.length>=2;if(!(this instanceof o))return n?r?new o(e,t):new o(e):new o;if(void 0===e){if(n)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}return this.href(e),void 0!==t?this.absoluteTo(t):this}function i(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function a(e){return"Array"===s(e)}function u(e,t){var n,r,o={};if("RegExp"===s(t))o=null;else if(a(t))for(n=0,r=t.length;n<r;n++)o[t[n]]=!0;else o[t]=!0;for(n=0,r=e.length;n<r;n++){var i=o&&void 0!==o[e[n]]||!o&&t.test(e[n]);i&&(e.splice(n,1),r--,n--)}return e}function c(e,t){var n,r;if(a(t)){for(n=0,r=t.length;n<r;n++)if(!c(e,t[n]))return!1;return!0}var o=s(t);for(n=0,r=e.length;n<r;n++)if("RegExp"===o){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function l(e,t){if(!a(e)||!a(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function f(e){var t=/^\/+|\/+$/g;return e.replace(t,"")}function d(e){return escape(e)}function p(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}function h(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function y(e,t){return function(n,r){return void 0===n?this._parts[e]||"":(null!==n&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!r),this)}}var g=r&&r.URI;o.version="1.18.2";var m=o.prototype,_=Object.prototype.hasOwnProperty;o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\.-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/},o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return o.domAttributes[t]}},o.encode=p,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=p,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(e,t){var n=o.encode(e+"");return void 0===t&&(t=o.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},o.decodeQuery=function(e,t){e+="",void 0===t&&(t=o.escapeQuerySpace);try{return o.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}};var b,v={encode:"encode",decode:"decode"},w=function(e,t){return function(n){try{return o[t](n+"").replace(o.characters[e][t].expression,function(n){return o.characters[e][t].map[n]})}catch(r){return n}}};for(b in v)o[b+"PathSegment"]=w("pathname",v[b]),o[b+"UrnPathSegment"]=w("urnpath",v[b]);var k=function(e,t,n){return function(r){var i;i=n?function(e){return o[t](o[n](e))}:o[t];for(var s=(r+"").split(e),a=0,u=s.length;a<u;a++)s[a]=i(s[a]);return s.join(e)}};o.decodePath=k("/","decodePathSegment"),o.decodeUrnPath=k(":","decodeUrnPathSegment"),o.recodePath=k("/","encodePathSegment","decode"),o.recodeUrnPath=k(":","encodeUrnPathSegment","decode"),o.encodeReserved=w("reserved","encode"),o.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=o.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(o.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=o.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},o.parseHost=function(e,t){e=e.replace(/\\/g,"/");var n,r,o=e.indexOf("/");if(o===-1&&(o=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,o)||null,"/"===t.port&&(t.port=null);else{var i=e.indexOf(":"),s=e.indexOf("/"),a=e.indexOf(":",i+1);a!==-1&&(s===-1||a<s)?(t.hostname=e.substring(0,o)||null,t.port=null):(r=e.substring(0,o).split(":"),t.hostname=r[0]||null,t.port=r[1]||null)}return t.hostname&&"/"!==e.substring(o).charAt(0)&&(o++,e="/"+e),e.substring(o)||"/"},o.parseAuthority=function(e,t){return e=o.parseUserinfo(e,t),o.parseHost(e,t)},o.parseUserinfo=function(e,t){var n,r=e.indexOf("/"),i=e.lastIndexOf("@",r>-1?r:e.length-1);return i>-1&&(r===-1||i<r)?(n=e.substring(0,i).split(":"),t.username=n[0]?o.decode(n[0]):null,n.shift(),t.password=n[0]?o.decode(n.join(":")):null,e=e.substring(i+1)):(t.username=null,t.password=null),e},o.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var n,r,i,s={},a=e.split("&"),u=a.length,c=0;c<u;c++)n=a[c].split("="),r=o.decodeQuery(n.shift(),t),i=n.length?o.decodeQuery(n.join("="),t):null,_.call(s,r)?("string"!=typeof s[r]&&null!==s[r]||(s[r]=[s[r]]),s[r].push(i)):s[r]=i;return s},o.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=o.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},o.buildHost=function(e){var t="";return e.hostname?(t+=o.ip6_expression.test(e.hostname)?"["+e.hostname+"]":e.hostname,e.port&&(t+=":"+e.port),t):""},o.buildAuthority=function(e){return o.buildUserinfo(e)+o.buildHost(e)},o.buildUserinfo=function(e){var t="";return e.username&&(t+=o.encode(e.username)),e.password&&(t+=":"+o.encode(e.password)),t&&(t+="@"),t},o.buildQuery=function(e,t,n){var r,i,s,u,c="";for(i in e)if(_.call(e,i)&&i)if(a(e[i]))for(r={},s=0,u=e[i].length;s<u;s++)void 0!==e[i][s]&&void 0===r[e[i][s]+""]&&(c+="&"+o.buildQueryParameter(i,e[i][s],n),t!==!0&&(r[e[i][s]+""]=!0));else void 0!==e[i]&&(c+="&"+o.buildQueryParameter(i,e[i],n));return c.substring(1)},o.buildQueryParameter=function(e,t,n){return o.encodeQuery(e,n)+(null!==t?"="+o.encodeQuery(t,n):"")},o.addQuery=function(e,t,n){if("object"==typeof t)for(var r in t)_.call(t,r)&&o.addQuery(e,r,t[r]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),a(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}},o.removeQuery=function(e,t,n){var r,i,c;if(a(t))for(r=0,i=t.length;r<i;r++)e[t[r]]=void 0;else if("RegExp"===s(t))for(c in e)t.test(c)&&(e[c]=void 0);else if("object"==typeof t)for(c in t)_.call(t,c)&&o.removeQuery(e,c,t[c]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===s(n)?!a(e[t])&&n.test(e[t])?e[t]=void 0:e[t]=u(e[t],n):e[t]!==String(n)||a(n)&&1!==n.length?a(e[t])&&(e[t]=u(e[t],n)):e[t]=void 0:e[t]=void 0}},o.hasQuery=function(e,t,n,r){switch(s(t)){case"String":break;case"RegExp":for(var i in e)if(_.call(e,i)&&t.test(i)&&(void 0===n||o.hasQuery(e,i,n)))return!0;return!1;case"Object":for(var u in t)if(_.call(t,u)&&!o.hasQuery(e,u,t[u]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(s(n)){case"Undefined":return t in e;case"Boolean":var f=Boolean(a(e[t])?e[t].length:e[t]);return n===f;case"Function":return!!n(e[t],t,e);case"Array":if(!a(e[t]))return!1;var d=r?c:l;return d(e[t],n);case"RegExp":return a(e[t])?!!r&&c(e[t],n):Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return a(e[t])?!!r&&c(e[t],n):e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var e=[],t=[],n=0,r=0;r<arguments.length;r++){var i=new o(arguments[r]);e.push(i);for(var s=i.segment(),a=0;a<s.length;a++)"string"==typeof s[a]&&t.push(s[a]),s[a]&&n++}if(!t.length||!n)return new o("");var u=new o("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},o.commonPath=function(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return n<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(n)&&"/"===t.charAt(n)||(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},o.withinString=function(e,t,n){n||(n={});var r=n.start||o.findUri.start,i=n.end||o.findUri.end,s=n.trim||o.findUri.trim,a=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var u=r.exec(e);if(!u)break;var c=u.index;if(n.ignoreHtml){var l=e.slice(Math.max(c-3,0),c);if(l&&a.test(l))continue}var f=c+e.slice(c).search(i),d=e.slice(c,f).replace(s,"");if(!n.ignore||!n.ignore.test(d)){f=c+d.length;var p=t(d,c,f,e);void 0!==p?(p=String(p),e=e.slice(0,c)+p+e.slice(f),r.lastIndex=c+p.length):r.lastIndex=f}}return r.lastIndex=0,e},o.ensureValidHostname=function(t){if(t.match(o.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(e.toASCII(t).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}},o.noConflict=function(e){if(e){var t={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(t.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(t.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=r.SecondLevelDomains.noConflict()),t}return r.URI===this&&(r.URI=g),this},m.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},m.clone=function(){return new o(this)},m.valueOf=m.toString=function(){return this.build(!1)._string},m.protocol=h("protocol"),m.username=h("username"),m.password=h("password"),m.hostname=h("hostname"),m.port=h("port"),m.query=y("query","?"),m.fragment=y("fragment","#"),m.search=function(e,t){var n=this.query(e,t);return"string"==typeof n&&n.length?"?"+n:n},m.hash=function(e,t){var n=this.fragment(e,t);return"string"==typeof n&&n.length?"#"+n:n},m.pathname=function(e,t){if(void 0===e||e===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?o.decodeUrnPath:o.decodePath)(n):n}return this._parts.urn?this._parts.path=e?o.recodeUrnPath(e):"":this._parts.path=e?o.recodePath(e):"/",
this.build(!t),this},m.path=m.pathname,m.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=o._parts();var r=e instanceof o,i="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var s=o.getDomAttribute(e);e=e[s]||"",i=!1}if(!r&&i&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=o.parse(String(e),this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var a=r?e._parts:e;for(n in a)_.call(this._parts,n)&&(this._parts[n]=a[n])}return this.build(!t),this},m.is=function(e){var t=!1,r=!1,i=!1,s=!1,a=!1,u=!1,c=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,r=o.ip4_expression.test(this._parts.hostname),i=o.ip6_expression.test(this._parts.hostname),t=r||i,s=!t,a=s&&n&&n.has(this._parts.hostname),u=s&&o.idn_expression.test(this._parts.hostname),c=s&&o.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return s;case"sld":return a;case"ip":return t;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var j=m.protocol,x=m.port,O=m.hostname;m.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(o.protocol_expression)))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return j.call(this,e,t)},m.scheme=m.protocol,m.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError('Port "'+e+'" contains characters other than [0-9]');return x.call(this,e,t)},m.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={},r=o.parseHost(e,n);if("/"!==r)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=n.hostname}return O.call(this,e,t)},m.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=this.protocol(),r=this.authority();return r?(n?n+"://":"")+this.authority():""}var i=o(e);return this.protocol(i.protocol()).authority(i.authority()).build(!t),this},m.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?o.buildHost(this._parts):"";var n=o.parseHost(e,this._parts);if("/"!==n)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},m.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?o.buildAuthority(this._parts):"";var n=o.parseAuthority(e,this._parts);if("/"!==n)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},m.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=o.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==e[e.length-1]&&(e+="@"),o.parseUserinfo(e,this._parts),this.build(!t),this},m.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=o.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},m.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,s=this._parts.hostname.substring(0,r),a=new RegExp("^"+i(s));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&o.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},m.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(t).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!e)throw new TypeError("cannot set domain empty");if(o.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var s=new RegExp(i(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(s,e)}return this.build(!t),this},m.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(r+1);return t!==!0&&n&&n.list[o.toLowerCase()]?n.get(this._parts.hostname)||o:o}var s;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');s=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}return this.build(!t),this},m.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?o.decodePath(r):r}var s=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,s),u=new RegExp("^"+i(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=o.recodePath(e),this._parts.path=this._parts.path.replace(u,e),this.build(!t),this},m.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return e?o.decodePathSegment(r):r}var s=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(s=!0);var a=new RegExp(i(this.filename())+"$");return e=o.recodePath(e),this._parts.path=this._parts.path.replace(a,e),s?this.normalizePath(t):this.build(!t),this},m.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,r,s=this.filename(),a=s.lastIndexOf(".");return a===-1?"":(n=s.substring(a+1),r=/^[a-z0-9%]+$/i.test(n)?n:"",e?o.decodePathSegment(r):r)}"."===e.charAt(0)&&(e=e.substring(1));var u,c=this.suffix();if(c)u=e?new RegExp(i(c)+"$"):new RegExp(i("."+c)+"$");else{if(!e)return this;this._parts.path+="."+o.recodePath(e)}return u&&(e=o.recodePath(e),this._parts.path=this._parts.path.replace(u,e)),this.build(!t),this},m.segment=function(e,t,n){var r=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),s=o.split(r);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(i&&s.shift(),e<0&&(e=Math.max(s.length+e,0)),void 0===t)return void 0===e?s:s[e];if(null===e||void 0===s[e])if(a(t)){s=[];for(var u=0,c=t.length;u<c;u++)(t[u].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(f(t[u])))}else(t||"string"==typeof t)&&(t=f(t),""===s[s.length-1]?s[s.length-1]=t:s.push(t));else t?s[e]=f(t):s.splice(e,1);return i&&s.unshift(""),this.path(s.join(r),n)},m.segmentCoded=function(e,t,n){var r,i,s;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(r=this.segment(e,t,n),a(r))for(i=0,s=r.length;i<s;i++)r[i]=o.decode(r[i]);else r=void 0!==r?o.decode(r):void 0;return r}if(a(t))for(i=0,s=t.length;i<s;i++)t[i]=o.encode(t[i]);else t="string"==typeof t||t instanceof String?o.encode(t):t;return this.segment(e,t,n)};var E=m.query;return m.query=function(e,t){if(e===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=e.call(this,n);return this._parts.query=o.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=o.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):E.call(this,e,t)},m.setQuery=function(e,t,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)r[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in e)_.call(e,i)&&(r[i]=e[i])}return this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},m.addQuery=function(e,t,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(r,e,void 0===t?null:t),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},m.removeQuery=function(e,t,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(r,e,t),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},m.hasQuery=function(e,t,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(r,e,t,n)},m.setSearch=m.setQuery,m.addSearch=m.addQuery,m.removeSearch=m.removeQuery,m.hasSearch=m.hasQuery,m.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},m.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},m.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},m.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},m.normalizePath=function(e){var t=this._parts.path;if(!t)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;t=o.recodePath(t);var n,r,i,s="";for("/"!==t.charAt(0)&&(n=!0,t="/"+t),"/.."!==t.slice(-3)&&"/."!==t.slice(-2)||(t+="/"),t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),n&&(s=t.substring(1).match(/^(\.\.\/)+/)||"",s&&(s=s[0]));;){if(r=t.search(/\/\.\.(\/|$)/),r===-1)break;0!==r?(i=t.substring(0,r).lastIndexOf("/"),i===-1&&(i=r),t=t.substring(0,i)+t.substring(r+3)):t=t.substring(3)}return n&&this.is("relative")&&(t=s+t.substring(1)),this._parts.path=t,this.build(!e),this},m.normalizePathname=m.normalizePath,m.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},m.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},m.normalizeSearch=m.normalizeQuery,m.normalizeHash=m.normalizeFragment,m.iso8859=function(){var e=o.encode,t=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=e,o.decode=t}return this},m.unicode=function(){var e=o.encode,t=o.decode;o.encode=p,o.decode=unescape;try{this.normalize()}finally{o.encode=e,o.decode=t}return this},m.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var r="",i=0,s=t._parts.query.split("&"),a=s.length;i<a;i++){var u=(s[i]||"").split("=");r+="&"+o.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(r+="="+o.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=o.decodeQuery(t.hash(),!0)},m.absoluteTo=function(e){var t,n,r,i=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof o||(e=new o(e)),i._parts.protocol||(i._parts.protocol=e._parts.protocol),this._parts.hostname)return i;for(n=0;r=s[n];n++)i._parts[r]=e._parts[r];return i._parts.path?(".."===i._parts.path.substring(-2)&&(i._parts.path+="/"),"/"!==i.path().charAt(0)&&(t=e.directory(),t=t?t:0===e.path().indexOf("/")?"/":"",i._parts.path=(t?t+"/":"")+i._parts.path,i.normalizePath())):(i._parts.path=e._parts.path,i._parts.query||(i._parts.query=e._parts.query)),i.build(),i},m.relativeTo=function(e){var t,n,r,i,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new o(e).normalize(),t=a._parts,n=e._parts,i=a.path(),s=e.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return a.build();if(null!==t.protocol||null!==t.username||null!==t.password)return a.build();if(t.hostname!==n.hostname||t.port!==n.port)return a.build();if(t.hostname=null,t.port=null,i===s)return t.path="",a.build();if(r=o.commonPath(i,s),!r)return a.build();var u=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=u+t.path.substring(r.length)||"./",a.build()},m.equals=function(e){var t,n,r,i=this.clone(),s=new o(e),u={},c={},f={};if(i.normalize(),s.normalize(),i.toString()===s.toString())return!0;if(t=i.query(),n=s.query(),i.query(""),s.query(""),i.toString()!==s.toString())return!1;if(t.length!==n.length)return!1;u=o.parseQuery(t,this._parts.escapeQuerySpace),c=o.parseQuery(n,this._parts.escapeQuerySpace);for(r in u)if(_.call(u,r)){if(a(u[r])){if(!l(u[r],c[r]))return!1}else if(u[r]!==c[r])return!1;f[r]=!0}for(r in c)if(_.call(c,r)&&!f[r])return!1;return!0},m.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},m.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},o})},{"./IPv6":7,"./SecondLevelDomains":8,"./punycode":10}],10:[function(e,n,r){(function(e){!function(o){function i(e){throw new RangeError(A[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function a(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(T,".");var o=e.split("."),i=s(o,t).join(".");return r+i}function u(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=U(e>>>10&1023|55296),e=56320|1023&e),t+=U(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:j}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?D(e/P):e>>1,e+=D(e/t);e>N*O>>1;r+=j)e=D(e/N);return D(r+(N+1)*e/(e+E))}function p(e){var t,n,r,o,s,a,u,f,p,h,y=[],g=e.length,m=0,_=C,b=S;for(n=e.lastIndexOf(M),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),y.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(s=m,a=1,u=j;o>=g&&i("invalid-input"),f=l(e.charCodeAt(o++)),(f>=j||f>D((k-m)/a))&&i("overflow"),m+=f*a,p=u<=b?x:u>=b+O?O:u-b,!(f<p);u+=j)h=j-p,a>D(k/h)&&i("overflow"),a*=h;t=y.length+1,b=d(m-s,t,0==s),D(m/t)>k-_&&i("overflow"),_+=D(m/t),m%=t,y.splice(m++,0,_)}return c(y)}function h(e){var t,n,r,o,s,a,c,l,p,h,y,g,m,_,b,v=[];for(e=u(e),g=e.length,t=C,n=0,s=S,a=0;a<g;++a)y=e[a],y<128&&v.push(U(y));for(r=o=v.length,o&&v.push(M);r<g;){for(c=k,a=0;a<g;++a)y=e[a],y>=t&&y<c&&(c=y);for(m=r+1,c-t>D((k-n)/m)&&i("overflow"),n+=(c-t)*m,t=c,a=0;a<g;++a)if(y=e[a],y<t&&++n>k&&i("overflow"),y==t){for(l=n,p=j;h=p<=s?x:p>=s+O?O:p-s,!(l<h);p+=j)b=l-h,_=j-h,v.push(U(f(h+b%_,0))),l=D(b/_);v.push(U(f(l,0))),s=d(n,m,r==o),n=0,++r}++n,++t}return v.join("")}function y(e){return a(e,function(e){return I.test(e)?p(e.slice(4).toLowerCase()):e})}function g(e){return a(e,function(e){return R.test(e)?"xn--"+h(e):e})}var m="object"==typeof r&&r&&!r.nodeType&&r,_="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof e&&e;b.global!==b&&b.window!==b&&b.self!==b||(o=b);var v,w,k=2147483647,j=36,x=1,O=26,E=38,P=700,S=72,C=128,M="-",I=/^xn--/,R=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=j-x,D=Math.floor,U=String.fromCharCode;if(v={version:"1.3.2",ucs2:{decode:u,encode:c},decode:p,encode:h,toASCII:g,toUnicode:y},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return v});else if(m&&_)if(n.exports==m)_.exports=v;else for(w in v)v.hasOwnProperty(w)&&(m[w]=v[w]);else o.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={GET:"get",POST:"post",DELETE:"delete",UPDATE:"update"},s=function(){function e(){r(this,e),console.log("Browser Request");var t=this;Object.keys(i).forEach(function(e){t[i[e]]=function(n){return new Promise(function(r,o){t._makeLocalRequest(i[e],n).then(function(e){r(e)})["catch"](function(e){o(e)})})}})}return o(e,[{key:"_makeLocalRequest",value:function(e,t){return console.log(e,t),new Promise(function(e,n){var r={"localhost://":"https://","undefined://":"https://","hyperty-catalogue://":"https://","https://":"https://","http://":"http://"},o=void 0,i=!1;for(var s in r)if(t.slice(0,s.length)===s){t=r[s]+t.slice(s.length,t.length),o=r[s],i=!0;break}if(!i)return void n("Invalid protocol of url: "+t);var a=new XMLHttpRequest;a.open("GET",t,!0),a.onreadystatechange=function(t){var r=t.currentTarget;4===r.readyState&&(200===r.status?e(r.responseText):n(r.responseText))},a.send()})}}]),e}();n["default"]=s},{}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("service-framework/dist/PersistenceManager"),i=r(o),s=e("./SandboxWorker"),a=r(s),u=e("./SandboxApp"),c=r(u),l=e("./Request"),f=r(l),d=e("service-framework/dist/StorageManager"),p=r(d),h=e("dexie"),y=r(h),g=e("service-framework/dist/RuntimeCatalogue"),m=Object.create({createSandbox:function(){return new a["default"]("./context-service.js")},createAppSandbox:function(){return new c["default"]},createHttpRequest:function(){var e=new f["default"];return e},createRuntimeCatalogue:function(){return this.catalogue||(this.catalogue=new g.RuntimeCatalogue(this)),this.catalogue},atob:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return atob(e)}),persistenceManager:function(){var e=window.localStorage;return new i["default"](e)},storageManager:function(){var e=new y["default"]("cache"),t="objects";return new p["default"](e,t)}});n["default"]=m},{"./Request":11,"./SandboxApp":13,"./SandboxWorker":14,dexie:1,"service-framework/dist/PersistenceManager":4,"service-framework/dist/RuntimeCatalogue":5,"service-framework/dist/StorageManager":6}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("runtime-core/dist/sandbox"),c=e("runtime-core/dist/minibus"),l=(r(c),function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=u.SandboxType.NORMAL,window.addEventListener("message",function(e){this.origin||(this.origin=e.source),e.data.hasOwnProperty("to")&&e.data.to.startsWith("core:")||this._onMessage(JSON.parse(JSON.stringify(e.data)))}.bind(e)),window.addEventListener("error",function(e){throw console.error("[SANDBOX APP] - Error",e),e}.bind(e)),e}return s(t,e),a(t,[{key:"_onPostMessage",value:function(e){this.origin.postMessage(JSON.parse(JSON.stringify(e)),"*")}}]),t}(u.Sandbox));n["default"]=l},{"runtime-core/dist/minibus":2,"runtime-core/dist/sandbox":3}],14:[function(t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t("runtime-core/dist/sandbox"),l=t("runtime-core/dist/minibus"),f=(o(l),function(t){function n(t){i(this,n);var r=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));if(r.type=c.SandboxType.NORMAL,!Worker)throw new Error("Your environment does not support worker \n",e);return r._worker=new Worker(t),r._worker.addEventListener("message",function(e){this._onMessage(JSON.parse(JSON.stringify(e.data)))}.bind(r)),r._worker.addEventListener("error",function(e){throw console.log("[Sandbox Worker] - Error: ",e),JSON.stringify(e)}.bind(r)),r._worker.postMessage(""),r}return a(n,t),u(n,[{key:"_onPostMessage",value:function(e){this._worker.postMessage(JSON.parse(JSON.stringify(e)))}}]),n}(c.Sandbox));r["default"]=f},{"runtime-core/dist/minibus":2,"runtime-core/dist/sandbox":3}],15:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){if(r(this,e),!t)throw Error("Identity Module not set!");var n=this,o=t._runtimeURL+"/identity-gui";n._guiURL=o,n.identityModule=t,n._messageBus=t.messageBus,n.identityModule.deployGUI(),n.resultURL=void 0,n._messageBus.addListener(o,function(e){var t=(e.body.value,void 0);document.getElementsByTagName("body")[0].style="background-color:white;",parent.postMessage({body:{method:"showAdminPage"},to:"runtime:gui-manager"},"*"),$(".admin-page").removeClass("hide"),n.showIdentitiesGUI(e.body.value).then(function(r){var o=void 0;switch(parent.postMessage({body:{method:"hideAdminPage"},to:"runtime:gui-manager"},"*"),$(".admin-page").addClass("hide"),document.getElementsByTagName("body")[0].style="background-color:transparent",$(".identities-section").addClass("hide"),$(".policies-section").addClass("hide"),r.type){case"idp":t={type:"idp",value:r.value,code:200},o={id:e.id,type:"response",to:e.from,from:e.to,body:t},n._messageBus.postMessage(o);break;case"identity":t={type:"identity",value:r.value,code:200},o={id:e.id,type:"response",to:e.from,from:e.to,body:t},n._messageBus.postMessage(o);break;default:t={type:"error",value:"Error on identity GUI",code:400},o={id:e.id,type:"response",to:e.from,from:e.to,body:t},n._messageBus.postMessage(o)}})}),$(".identities-page-show").on("click",function(){n.showIdentitiesGUI()})}return o(e,[{key:"showIdentitiesGUI",value:function(e){var t=this;return new Promise(function(n,r){var o=void 0,i=void 0;e?(o=e,i=!1):(i=!0,o=t.identityModule.getIdentitiesToChoose()),$(".policies-section").addClass("hide"),$(".graphConnector-section").addClass("hide"),$(".identities-section").removeClass("hide"),t.showMyIdentities(o.identities,i).then(function(e){console.log("chosen identity: ",e),n({type:"identity",value:e})});var s=function(e){console.log("chosen identity: ",e),n({type:"identity",value:e})},a=o.idps;$("#idproviders").html(t._getList(a)),$("#idproviders").off(),$("#idproviders").on("click",function(e){return t.obtainNewIdentity(s,i)}),$(".identities-reset").off(),$(".identities-reset").on("click",function(e){return t._resetIdentities(s)})})}},{key:"showMyIdentities",value:function(e,t){var n=this;return new Promise(function(r,o){var i=[];for(var s in e){var a=e[s].split("@");i.push({email:e[s],domain:a[1]})}var u=document.getElementById("my-ids");u.innerHTML="";for(var c=n.createTable(),l=document.createElement("tbody"),f=i.length,d=0;d<f;d++){var p=n.createTableRow(i[d],t);l.appendChild(p)}c.appendChild(l),u.appendChild(c);var h=function(e){r(e)};t||$(".clickable-cell").on("click",function(e){return n.changeID(h)}),$(".remove-id").on("click",function(t){return n.removeID(e)})})}},{key:"createTable",value:function(){var e=document.createElement("table");e.className="centered";var t=document.createElement("thead"),n=document.createElement("tr"),r=document.createElement("th");return r.textContent="Email",n.appendChild(r),t.appendChild(n),e.appendChild(t),e}},{key:"createTableRow",value:function(e,t){var n=document.createElement("tr"),r=document.createElement("td");if(r.textContent=e.email,r.className="clickable-cell",r.style="cursor: pointer",n.appendChild(r),r=document.createElement("td"),t){var o=document.createElement("button");o.textContent="Remove",o.className="remove-id waves-effect waves-light btn",r.appendChild(o)}return n.appendChild(r),n}},{key:"changeID",value:function(e){var t=event.target.innerText;if("settings"!==t)return e(t),t}},{key:"removeID",value:function(e){var t=this,n=event.target.parentNode.parentNode,r=n.children[0].textContent;n.children[1].textContent;t.identityModule.unregisterIdentity(r);for(var o=e.length,i=0;i<o;i++)if(e[i].email===r){e.splice(i,1);break}t.showMyIdentities(e,!0)}},{key:"obtainNewIdentity",value:function(e,t){var n=this,r=event.target.textContent;event.target.text;n.identityModule.crypto.generateRSAKeyPair().then(function(t){var o=btoa(t["public"]);n.identityModule.sendGenerateMessage(o,"origin",void 0,r).then(function(i){console.log("receivedURL: "+i.loginUrl.substring(0,20)+"...");var s=i.loginUrl,a=void 0;if(s.indexOf("redirect_uri")!==-1){var u=s.substring(0,s.indexOf("redirect_uri")),c=s.substring(s.indexOf("redirect_uri"),s.length),l=c.substring(c.indexOf("&"),s.length);a=l.indexOf("&")!==-1?u+"redirect_uri="+location.origin+l:u+"redirect_uri="+location.origin}n.resultURL=a||s,$(".login-idp").html("<p>Chosen IDP: "+r+"</p>"),$(".login").removeClass("hide"),$(".login-btn").off(),$(".login-btn").on("click",function(s){$(".login").addClass("hide"),n._authenticateUser(t,o,i,"origin",r).then(function(t){e(t),n.showIdentitiesGUI()})})})})}},{key:"_getList",value:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+='<li class="divider"></li>',t+='<li><a class="center-align">'+e[r]+"</a></li>";return t}},{key:"_authenticateUser",value:function(e,t,n,r,o){var i=this,s=i.resultURL;return new Promise(function(n,a){i.identityModule.openPopup(s).then(function(s){i.identityModule.sendGenerateMessage(t,r,s,o).then(function(t){t?i.identityModule.storeIdentity(t,e).then(function(e){n(e.userProfile.username)},function(e){a(e)}):a("error on obtaining identity information")})},function(e){a(e)})})}},{key:"_resetIdentities",value:function(){console.log("_resetIdentities")}}]),e}();n["default"]=i},{}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./PoliciesManager"),a=r(s),u=function(){function e(t){if(o(this,e),!t)throw Error("Policy Engine is not set!");this.policiesManager=new a["default"](t),this.elements=this._setElements(),this._setListeners()}return i(e,[{key:"_addMember",value:function(){var e=this,t=event.target.id;$(".member-new-intro").html('<h5>Add a member to a group</h5><p>Insert a user email below to add to the "'+t+'" group.</p>'),$(".member-new-modal").openModal(),$(".member-new-ok").off(),$(".member-new-ok").on("click",function(n){var r=$("#member-new").val();$("#member-new").val(""),e.policiesManager.addToGroup(t,r),$(".member-new-modal").closeModal(),e._manageGroups()})}},{key:"_createGroup",value:function(){var e=this;$("#group-new-name").val(""),$(".group-new-modal").openModal(),$(".group-new-ok").on("click",function(t){var n=$("#group-new-name").val();e.policiesManager.createGroup(n),e._manageGroups()})}},{key:"_addPolicy",value:function(){var e=this;$("#policy-new-title").val(""),$(".combining").html("");var t=["Block overrides","Allow overrides","First applicable"];$(".combining").append(this._getOptions("comb-algorithm","Choose a combining algorithm",t)),$(".policy-new").openModal(),$(".policy-new-ok").off(),$(".policy-new-ok").on("click",function(t){var n=$("#policy-new-title").val();if(n){var r=$("#comb-algorithm").val();e.policiesManager.addPolicy(n,r),$(".help-menu").addClass("hide"),$(".policy-new").closeModal(),e._goHome()}else Materialize.toast("Invalid policy title",4e3)}),$(".help-btn").off(),$(".help-btn").on("click",function(e){$(".help-menu").removeClass("hide")})}},{key:"_decreaseRulePriority",value:function(){var e=event.target.closest("tr").id,t=e.split(":"),n=parseInt(t[t.length-1]);t.pop();var r=t.join(":"),o=this.policiesManager.getPolicy(r).getLastPriority();
if(o!=n){var i=parseInt(n+1);this.policiesManager.decreaseRulePriority(r,n,i),this._goHome()}}},{key:"_deleteMember",value:function(){var e=event.target.closest("tr").id,t=e.split("::"),n=t[t.length-1];t.pop();var r=t.join("::");this.policiesManager.removeFromGroup(r,n),this._manageGroups()}},{key:"_deleteGroup",value:function(){var e=event.target.closest("tr").children[0].id;this.policiesManager.deleteGroup(e),this._manageGroups()}},{key:"_deletePolicy",value:function(){var e=event.target.closest("tr").id;this.policiesManager.deletePolicy(e),this._goHome()}},{key:"_deleteRule",value:function(){var e=event.target.closest("tr").id,t=e.split(":"),n=t[t.length-1];t.pop();var r=t.join(":"),o=this.policiesManager.getRuleOfPolicy(r,n);this.policiesManager.deleteRule(r,o),this._goHome()}},{key:"_getActivePolicy",value:function(){var e=this;$(".policy-active").html("");var t=this.policiesManager.getActivePolicy(),n=this.policiesManager.getPoliciesTitles();n.push("Deactivate all policies"),$(".policy-active").append(this._getOptions("policies-list","Click to activate a policy",n,t)),$("#policies-list").on("click",function(t){var n=$("#policies-list").find(":selected")[0].textContent;"Deactivate all policies"===n&&(n=void 0),e.policiesManager.updateActivePolicy(n)})}},{key:"_getGroupOptions",value:function(e,t,n,r){var o="<option disabled selected>"+e+"</option>";for(var i in t){o+="<optgroup label="+t[i]+">";for(var s in r[i])o+='<option id="'+n[i]+'">'+r[i][s]+"</option>"}return o}},{key:"_getInfo",value:function(e){var t=void 0;switch(e){case"Date":if(t=$(".config").find("input").val(),t.indexOf(",")!==-1){var n=t.split(" ");n[1]=n[1].substring(0,n[1].length-1);var r=["January","February","March","April","May","June","July","August","September","October","November","December"];t=n[0]+"/"+(r.indexOf(n[1])+1)+"/"+n[2]}else{var o=t.split("-");t=o[2]+"/"+o[1]+"/"+o[0]}break;case"Group of users":t=$("#group").find(":selected").text();break;case"Subscription preferences":(t=void 0!==$("input[name='rule-new-subscription']:checked")[0])&&(t=$("input[name='rule-new-subscription']:checked")[0].id);break;case"Weekday":t=$("#weekday").find(":selected").text();break;default:t=$(".config").find("input").val()}return t}},{key:"_getList",value:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+='<li class="divider"></li>',t+='<li><a class="center-align">'+e[r]+"</a></li>";return t}},{key:"_getOptions",value:function(e,t,n,r){var o='<select id="'+e+'" class="browser-default"><option disabled selected>'+t+"</option>";for(var i in n)o+=void 0!==r&r===n[i]?'<option selected id="'+e+'">'+n[i]+"</option>":'<option id="'+e+'">'+n[i]+"</option>";return o+="</select>"}},{key:"_getPoliciesTable",value:function(){var e=this;$(".policies-no").addClass("hide"),$(".policies-current").html("");var t=this.policiesManager.getFormattedPolicies(),n=[],r=[],o=[];for(var i in t)n.push(t[i].title),r.push(t[i].rulesTitles),o.push(t[i].ids);var s="<table>",a=0===n.length;for(var u in n){s+='<thead><tr id="'+n[u]+'"><td></td><td></td><th class="center-align">'+n[u]+'</th><td><i class="material-icons clickable-cell policy-delete" style="cursor: pointer; vertical-align: middle">delete_forever</i></td></tr></thead><tbody>';for(var c in r[u])s+='<tr id="'+o[u][c]+'" ><td><i class="material-icons clickable-cell rule-priority-increase" style="cursor: pointer; vertical-align: middle">arrow_upward</i></td><td><i class="material-icons clickable-cell rule-priority-decrease" style="cursor: pointer; vertical-align: middle">arrow_downward</i></td><td class="rule-show clickable-cell" style="cursor: pointer">'+r[u][c]+'</td><td><i class="material-icons clickable-cell rule-delete" style="cursor: pointer; vertical-align: middle">clear</i></td></tr>';s+='<tr id="'+n[u]+'"></td><td></td><td></td><td style="text-align:center"><i class="material-icons clickable-cell center-align rule-add" style="cursor: pointer">add_circle</i></td></tr>'}a?$(".policies-no").removeClass("hide"):(s+="</tbody></table>",$(".policies-current").append(s)),$(".rule-add").on("click",function(t){e._showVariablesTypes()}),$(".rule-delete").on("click",function(t){e._deleteRule()}),$(".rule-show").on("click",function(t){e._showRule()}),$(".rule-priority-increase").on("click",function(t){e._increaseRulePriority()}),$(".rule-priority-decrease").on("click",function(t){e._decreaseRulePriority()}),$(".policy-add").off(),$(".policy-add").on("click",function(t){e._addPolicy()}),$(".policy-delete").on("click",function(t){e._deletePolicy()})}},{key:"_goHome",value:function(){this._getActivePolicy(),this._getPoliciesTable()}},{key:"_increaseRulePriority",value:function(){var e=event.target.closest("tr").id,t=e.split(":"),n=parseInt(t[t.length-1]);if(0!==n){t.pop();var r=t.join(":"),o=n-1;this.policiesManager.increaseRulePriority(r,n,o),this._goHome()}}},{key:"_manageGroups",value:function(){var e=this;$(".groups-current").html("");var t=this.policiesManager.getGroups(),n=t.groupsNames,r=t.members,o=t.ids,i="<table>",s=0===n.length;for(var a in n){i+='<thead><tr><th id="'+n[a]+'">'+n[a]+'</th><td style="text-align:right"><i class="material-icons clickable-cell group-delete" style="cursor: pointer; vertical-align: middle">delete_forever</i></td></tr></thead><tbody>';for(var u in r[a])i+='<tr id="'+o[a][u]+'" ><td style="cursor: pointer">'+r[a][u]+'</td><td style="text-align:right"><i class="material-icons clickable-cell member-delete" style="cursor: pointer; vertical-align: middle">clear</i></td></tr>';i+='<tr id="'+n[a]+'"><td><i class="material-icons clickable-cell member-add" id="'+n[a]+'" style="cursor: pointer">add_circle</i></td></tr>'}s?$(".groups-current").append("<p>There are no groups set.</p>"):(i+="</tbody></table>",$(".groups-current").append(i)),$(".member-add").off(),$(".member-add").on("click",function(t){e._addMember()}),$(".member-delete").on("click",function(t){e._deleteMember()}),$(".group-add").off(),$(".group-add").on("click",function(t){e._createGroup()}),$(".group-delete").on("click",function(t){e._deleteGroup()})}},{key:"_parseFileContent",value:function(e){var t=JSON.parse(e);for(var n in t)this.policiesManager.addPolicy(n,void 0,t[n]);$(".policy-new").closeModal()}},{key:"_setElements",value:function(){var e=this;return{date:function(e){return'<input type="date" class="datepicker">'},select:function(t){return e._getOptions(t[0],t[1],t[2])},form:function(e){return'<form><input type="text" placeholder="'+e+'"></input></form>'}}}},{key:"_showNewConfigurationPanel",value:function(e){var t=event.target.text;$(".variable").html(this._getNewConfiguration(e,t)),$(".scopes").empty().html("");var n=["Email","Hyperty","All"],r=["identity","hyperty","global"],o=[];o.push(this.policiesManager.getMyEmails()),o.push(this.policiesManager.getMyHyperties()),o.push(["All identities and hyperties"]),$(".scopes").append(this._getGroupOptions("Apply this configuration to:",n,r,o)),$(".variable").removeClass("hide")}},{key:"_showVariablesTypes",value:function(){var e=this,t=event.target.closest("tr").id;$("#variables-types").empty().html("");var n=this.policiesManager.getVariables();$("#variables-types").append(this._getList(n)),$(".variable").addClass("hide"),$(".rule-new").openModal(),$("#variables-types").off(),$("#variables-types").on("click",function(n){e._showNewConfigurationPanel(t)})}},{key:"_getNewConfiguration",value:function(e,t){var n=this,r=this.policiesManager.getVariableInfo(t);if($(".rule-new-title").html(r.title),$(".description").html(r.description),$(".config").html(""),"Subscription preferences"===t)$(".subscription-type").removeClass("hide");else{$(".subscription-type").addClass("hide");var o=r.input;for(var i in o)"Group of users"===t&&o[i][1].push(this.policiesManager.getGroupsNames()),$(".config").append(this.elements[o[i][0]](o[i][1])),"Group of users"===t&&o[i][1].pop();"date"===t&&$(".datepicker").pickadate({selectMonths:!0,selectYears:15})}document.getElementById("allow").checked=!1,document.getElementById("block").checked=!1,$(".ok-btn").off(),$(".ok-btn").on("click",function(r){if(void 0===$("input[name='rule-new-decision']:checked")[0])throw Error("INFORMATION MISSING: please specify an authorisation decision.");var o=n._getInfo(t),i=$("input[name='rule-new-decision']:checked")[0].id;i="allow"===i;var s=$(".scopes").find(":selected")[0].id,a=$(".scopes").find(":selected")[0].textContent;a="All identities and hyperties"===a?"global":a,n.policiesManager.setInfo(t,e,o,i,s,a),$(".rule-new").closeModal(),n._goHome()})}},{key:"_deleteInfo",value:function(e){var t=event.target.closest("tr").id,n=t.split(":"),r=n[0];n.shift();var o=n.join(""),i=event.target.closest("tr").children[0].id;this.policiesManager.deleteInfo(e,r,o,i),this._goHome()}},{key:"_setListeners",value:function(){var e=this;$(".settings-btn").on("click",function(e){parent.postMessage({body:{method:"showAdminPage"},to:"runtime:gui-manager"},"*"),$(".admin-page").removeClass("hide"),document.getElementsByTagName("body")[0].style="background-color:white;"}),$(".policies-page-show").on("click",function(t){$(".policies-section").removeClass("hide"),$(".identities-section").addClass("hide"),$(".graphConnector-section").addClass("hide"),e._goHome(),e._manageGroups()}),$(".admin-page-exit").on("click",function(e){parent.postMessage({body:{method:"hideAdminPage"},to:"runtime:gui-manager"},"*"),$(".admin-page").addClass("hide"),document.getElementsByTagName("body")[0].style="background-color:transparent;"}),$(".exit-btn").on("click",function(e){$(".subscription-type").addClass("hide"),$(".help-menu").addClass("hide")}),$("#policy-file").on("change",function(t){var n=t.target.files[0],r=new FileReader;r.readAsText(n,"UTF-8"),r.onload=function(t){e._parseFileContent(t.target.result),e._goHome()},r.onerror=function(e){throw Error("Error reading the file")}})}},{key:"_showRule",value:function(){var e=this,t=event.target.textContent,n=event.target.closest("tr").id,r=n.split(":"),o=r[r.length-1];r.pop();var i=r.join(":"),s=this.policiesManager.getRuleOfPolicy(i,o);if("subscription"===s.condition.attribute&&"preauthorised"===s.condition.params)$(".authorise-btns").addClass("hide");else{var a=void 0;a=s.decision?document.getElementById("btn-allow"):document.getElementById("btn-block"),a.checked=!0,$(".authorise-btns").removeClass("hide")}$(".member-add").addClass("hide"),$(".member-new-btn").addClass("hide"),$(".rule-details").openModal(),$(".rule-title").html("<h5><b>"+t+"</b></h5>"),"subscription"===s.condition.attribute&&$(".subscription-type").removeClass("hide"),$(".subscription-decision").on("click",function(t){e._updateRule("subscription",i,s)}),$(".decision").off(),$(".decision").on("click",function(t){e._updateRule("authorisation",i,s)})}},{key:"_updateRule",value:function(e,t,n){var r=$(".rule-title").text(),o=r.split(" "),i=o.indexOf("is");switch(i===-1&&(i=o.indexOf("are")),e){case"authorisation":var s=$("input[name='rule-update-decision']:checked")[0].id;"btn-allow"===s?(o[i+1]="allowed",s=!0):(o[i+1]="blocked",s=!1),r=o.join(" "),$(".rule-title").html("<h5><b>"+r+"</b></h5>"),this.policiesManager.updatePolicy(t,n,s);break;case"subscription":var a=event.target.labels[0].textContent;o[i+1];o=r.split("hyperties are"),"All subscribers"===a?($(".authorise-btns").removeClass("hide"),s=n.decision,a="*",r="Subscriptions from all hyperties are"+o[1]):($(".authorise-btns").addClass("hide"),s=!0,a="preauthorised",r="Subscriptions from previously authorised hyperties are"+o[1]),$(".rule-title").html("<h5><b>"+r+"</b></h5>"),this.policiesManager.updatePolicy(t,n,s,a)}this._goHome()}}]),e}();n["default"]=u},{"./PoliciesManager":17}],17:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.policyEngine=t,this.policies=this.policyEngine.context.userPolicies,this.variables=this.setVariables(),this.addition=this.setAdditionMethods(),this.validation=this.setValidationMethods()}return o(e,[{key:"addToGroup",value:function(e,t){this.policyEngine.context.addToGroup(e,t)}},{key:"createGroup",value:function(e){this.policyEngine.context.createGroup(e)}},{key:"addPolicy",value:function(e,t,n){if(void 0===n)switch(t){case"Block overrides":t="blockOverrides";break;case"Allow overrides":t="allowOverrides";break;case"First applicable":t="firstApplicable";break;default:t=void 0}this.policyEngine.addPolicy("USER",e,n,t)}},{key:"decreaseRulePriority",value:function(e,t,n){this.getRuleOfPolicy(e,n).priority=t,this.getRuleOfPolicy(e,t).priority=n,this.policyEngine.context.savePolicies("USER")}},{key:"deleteGroup",value:function(e){this.policyEngine.context.deleteGroup(e)}},{key:"deletePolicy",value:function(e){this.policyEngine.removePolicy("USER",e)}},{key:"deleteRule",value:function(e,t){var n=this.policyEngine.context.userPolicies;n[e].deleteRule(t),this.policyEngine.context.savePolicies("USER")}},{key:"getActivePolicy",value:function(){return this.policyEngine.context.activeUserPolicy}},{key:"getPolicy",value:function(e){return this.policyEngine.context.userPolicies[e]}},{key:"getPoliciesTitles",value:function(){var e=this.policyEngine.context.userPolicies,t=[];for(var n in e)t.push(n);return t}},{key:"getTargets",value:function(e){var t=[];for(var n in this.policies[e])t.indexOf(n)===-1&&t.push(n);return t}},{key:"increaseRulePriority",value:function(e,t,n){this.getRuleOfPolicy(e,t).priority=n,this.getRuleOfPolicy(e,n).priority=t,this.policyEngine.context.savePolicies("USER")}},{key:"setVariables",value:function(){return{Date:{title:"<br><h5>Updating date related configurations</h5><p>Incoming communications in the introduced date will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",description:"<p>Date:</p>",input:[["date",[]]]},Domain:{title:"<br><h5>Updating domain configurations</h5><p>Incoming communications from a user whose identity is from the introduced domain allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",description:"<p>Domain:</p>",input:[["form",[]]]},"Group of users":{title:"<br><h5>Updating groups configurations</h5><p>Incoming communications from a user whose identity is in the introduced group will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",description:"<p>Group name:</p>",input:[["select",["group","Select a group:"]]]},"Subscription preferences":{title:"<br><h5>Updating subscriptions configurations</h5><p>The acceptance of subscriptions to your hyperties will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",input:[]},"Time of the day":{title:'<br><h5>Updating time configurations</h5><p>Incoming communications in the introduced timeslot will be blocked, but this can be changed in the preferences page.</p><p>Please introduce a new timeslot in the following format:</p><p class="center-align">&lt;START-HOUR&gt;:&lt;START-MINUTES&gt; to &lt;END-HOUR&gt;:&lt;END-MINUTES&gt;</p><br>',description:"<p>Timeslot:</p>",input:[["form",[]]]},Weekday:{title:"<br><h5>Updating weekday configurations</h5><p>Incoming communications in the introduced weekday will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",description:"<p>Weekday:</p>",input:[["select",["weekday","Select a weekday:",["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"]]]]}}}},{key:"setAdditionMethods",value:function(){var e=this;return{Date:function(t){var n=t[0],r=e.policyEngine.context.userPolicies;r[n].createRule(t[4],{attribute:"date",operator:"equals",params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},Domain:function(t){var n=t[0],r=e.policyEngine.context.userPolicies;r[n].createRule(t[4],{attribute:"domain",operator:"equals",params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},"Group of users":function(t){var n=t[0],r=e.policyEngine.context.userPolicies;r[n].createRule(t[4],{attribute:"source",operator:"in",params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},"Subscription preferences":function(t){var n=t[0],r=e.policyEngine.context.userPolicies,o="equals";"preauthorised"===t[3]&&(o="in"),r[n].createRule(t[4],{attribute:"subscription",operator:thisOperator,params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},"Time of the day":function(t){var n=t[0],r=e.policyEngine.context.userPolicies;t[3]=t[3].split(" to ");var o=t[3][0].split(":");o=o.join("");var i=t[3][1].split(":");i=i.join(""),r[n].createRule(t[4],{attribute:"time",operator:"between",params:[o,i]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},Weekday:function(t){var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];t[3]=n.indexOf(t[3]);var r=t[0],o=e.policyEngine.context.userPolicies;o[r].createRule(t[4],{attribute:"weekday",operator:"equals",params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")}}}},{key:"setValidationMethods",value:function(){var e=this;return{Date:function(t,n){return e.isValidDate(n)&e.isValidScope(t)},"Group of users":function(t,n){return e.isValidString(n)&e.isValidScope(t)},Domain:function(t,n){return e.isValidDomain(n)&e.isValidScope(t)},Weekday:function(t,n){return!0&e.isValidScope(t)},"Subscription preferences":function(t,n){return e.isValidSubscriptionType(n)&e.isValidScope(t)},"Time of the day":function(t,n){return e.isValidTimeslot(n)&e.isValidScope(t)}}}},{key:"updateActivePolicy",value:function(e){this.policyEngine.context.activeUserPolicy=e,this.policyEngine.context.saveActivePolicy()}},{key:"isValidEmail",value:function(e){var t=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/;return t.test(e)}},{key:"isValidDomain",value:function(e){var t=/[a-z0-9.-]+\.[a-z]{2,3}$/;return t.test(e)}},{key:"isValidString",value:function(e){var t=/[a-z0-9.-]$/;return t.test(e)}},{key:"isValidSubscriptionType",value:function(e){return!0}},{key:"isValidDate",value:function(e){var t=e.split("/"),n=parseInt(t[0]),r=parseInt(t[1]),o=parseInt(t[2]),i=new Date(o,r-1,n),s=i.getFullYear()===o&&i.getMonth()+1===r&&i.getDate()===n,a=(i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear(),new Date),u=(a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear(),!1);return i.getFullYear()>a.getFullYear()?u=!0:i.getFullYear()==a.getFullYear()&&(i.getMonth()+1>a.getMonth()+1?u=!0:i.getMonth()+1==a.getMonth()+1&&i.getDate()>=a.getDate()&&(u=!0)),s&&u}},{key:"isValidScope",value:function(e){return""!==e}},{key:"isValidTimeslot",value:function(e){if(!e)return!1;var t=e.split(" to "),n=2===t.length;if(!n)return!1;var r=t[0].split(":"),o=t[1].split(":");if(2!==r.length||2!==o.length)return!1;var i=2===r[0].length&&2===r[1].length&&2===o[0].length&&2===o[1].length,s=r[0]==parseInt(r[0],10)&&r[1]==parseInt(r[1],10)&&o[0]==parseInt(o[0],10)&&o[1]==parseInt(o[1],10);return n&&i&&s}},{key:"getFormattedPolicies",value:function(){var e=this.policyEngine.context.userPolicies,t=[];for(var n in e){var r={title:e[n].key,rulesTitles:[],ids:[]};if(0!==e[n].rules.length){e[n].rules=e[n].sortRules();for(var o in e[n].rules){var i=this._getTitle(e[n].rules[o]);r.rulesTitles.push(i),r.ids.push(r.title+":"+e[n].rules[o].priority)}}t.push(r)}return t}},{key:"getRuleOfPolicy",value:function(e,t){var n=this.policyEngine.context.userPolicies,r=n[e];return r.getRuleByPriority(t)}},{key:"_getTitle",value:function(e){var t=e.condition,n=e.decision?"allowed":"blocked",r="global"===e.target?"All identities and hyperties":e.target,o=t.attribute;switch(o){case"date":return"Date "+t.params+" is "+n+" ("+r+")";case"domain":return'Domain "'+t.params+'" is '+n+" ("+r+")";case"source":if("in"===t.operator)return'Group "'+t.params+'" is '+n+" ("+r+")";if("equals"===t.operator)return"User "+t.params+" is "+n+" ("+r+")";case"subscription":if("*"===t.params)return"Subscriptions from all hyperties are "+n+" ("+r+")";if("preauthorised"===t.params)return"Subscriptions from previously authorised hyperties are allowed ("+r+")";case"time":var i=t.params[0][0]+t.params[0][1]+":"+t.params[0][2]+t.params[0][3],s=t.params[1][0]+t.params[1][1]+":"+t.params[1][2]+t.params[1][3];return"Timeslot from "+i+" to "+s+" is "+n+" ("+r+")";case"weekday":var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=t.params;return'Weekday "'+a[u]+'" is '+n+" ("+r+")";default:return"Rule "+e.priority+" is "+n+" ("+r+")"}}},{key:"getVariables",value:function(){var e=[];for(var t in this.variables)e.push(t);return e}},{key:"getVariableInfo",value:function(e){return this.variables[e]}},{key:"getMyEmails",value:function(){return this.policyEngine.context.getMyEmails()}},{key:"getMyHyperties",value:function(){return this.policyEngine.context.getMyHyperties()}},{key:"setInfo",value:function(e,t,n,r,o,i){if(!this.validation[e](o,n))throw Error("Invalid configuration");this.addition[e]([t,o,i,n,r])}},{key:"getInfo",value:function(e,t){var n=this.policies[e],r={};for(var o in n)n[o].condition===t&&(r=n[o]);if(r!=={}){var i=r.condition.split(" ");return this.policyEngine.getList(e,i[2])}throw Error("Policy <"+t+"> not found!")}},{key:"deleteInfo",value:function(e,t,n,r){var o=[t,n,r];if("member"===e){var i=r.split(" "),s=i[2];o=[t,s,r]}this.deletion[e](o)}},{key:"getGroup",value:function(e,t,n){return this.policyEngine.context.getGroup(e,t,n)}},{key:"getGroups",value:function(){var e=this.policyEngine.context.groups,t={groupsNames:[],members:[],ids:[]};for(var n in e){t.groupsNames.push(n),t.members.push(e[n]);var r=[];for(var o in e[n])r.push(n+"::"+e[n][o]);t.ids.push(r)}return t}},{key:"getGroupsNames",value:function(){return this.policyEngine.context.getGroupsNames()}},{key:"removeFromGroup",value:function(e,t){this.policyEngine.context.removeFromGroup(e,t)}},{key:"updatePolicy",value:function(e,t,n,r){var o=this.policyEngine.context.userPolicies;if(o[e].deleteRule(t),r){var i="*"===r?"equals":"in";o[e].createRule(n,[{attribute:"subscription",opeator:i,params:r}],t.scope,t.target,t.priority)}else o[e].createRule(n,t.condition,t.scope,t.target,t.priority);this.policyEngine.context.savePolicies("USER")}}]),e}();n["default"]=i},{}],18:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function i(e){if(r(this,i),!e)throw Error("graph Connector is not set!");return $(".graphConnector-page-show").on("click",function(e){$(".policies-section").addClass("hide"),$(".identities-section").addClass("hide"),$(".graphConnector-section").removeClass("hide")}),new Promise(function(t,n){$(".generateGuid").off(),$(".generateGuid").on("click",function(t){console.info(e.generateGUID()),console.info(e.addUserID("facebook.com/felix","google.com")),console.info(e.removeUserID("facebook.com/felix","google.com")),console.info(e.addContact("budc8fucd8cdsc98dc899dc","reThinkUser","Test")),console.info(e.getContact("reThinkUser")),console.info(e.checkGUID("budc8fucd8cdsc98dc899dc")),console.info(e.removeContact("budc8fucd8cdsc98dc899dc")),console.info(e.addContact("budc8fucd8cdsc98dc899dc","reThinkUser","Test")),console.info(e.checkGUID("budc8fucd8cdsc98dc899dc")),console.info(e.calculateBloomFilter1Hop()),console.info(e.setBloomFilter1HopContact("budc8fucd8cdsc98dc899dc","bloomFilter")),console.info(e.signGlobalRegistryRecord()),console.info(e.addContact("jdfjhdskfkdshfbdkfkjff989e","TestingNew","runtime")),console.info(e.editContact("jdfjhdskfkdshfbdkfkjff989e","TestingNew","runtime","hfjdsbsjfhdiusfbuidshfcudss87cv7ds8c7d",!0)),console.info(e.addContact("123456","john","snow")),console.info(e.addContact("1234","Joey","Landwunder")),console.info(e.addGroupName("123456","Winterfell")),console.info(e.addGroupName("1234","Winterfell")),console.info(e.getGroup("Winterfell")),console.info(e.removeGroupName("123456","Winterfell")),console.info(e.getAllContacts()),console.info(e.setLocation("123456","Berlin")),console.info(e.removeLocation("123456")),console.info(e.setDefaults("a","b","c"))}),$(".useGUID").off(),$(".useGUID").on("click",function(t){console.info(e.useGUID("grey climb demon snap shove fruit grasp hum self grey climb demon snap shove fruit grasp"))}),$(".sendGlobalRegistryRecord").off(),$(".sendGlobalRegistryRecord").on("click",function(t){console.info(e.sendGlobalRegistryRecord("eyJhbGciOiJFUzI1NiJ9.eyJkYXRhIjoiZXlKelkyaGxiV0ZXWlhKemFXOXVJam94TENKbmRXbGtJam9pZWt0Qk4zbzNhSEJUV2tNelpIRlplRkZaVW1Jd1oya3haMDF4U0hNMmJHaFBiR3M0TXpBMlZURmtPQ0lzSW5OaGJIUWlPaUo2UjNBemFFRlVjVlpZTW14V1JERTRkV2hVTTFWRVJHUkNjRGxYZVVGeU1rdDNNU3RIUlVOb0x6SmpQU0lzSW5WelpYSkpSSE1pT2x0ZExDSnNZWE4wVlhCa1lYUmxJam9pTWpBeE5pMHhNUzB4T0ZReE16b3hNam94TVM0d05qZGFJaXdpZEdsdFpXOTFkQ0k2SWpJd01qWXRNVEV0TVRoVU1UTTZNVEk2TVRFdU1EWTNXaUlzSW5CMVlteHBZMHRsZVNJNklpMHRMUzB0UWtWSFNVNGdVRlZDVEVsRElFdEZXUzB0TFMwdFRVWlpkMFZCV1VoTGIxcEplbW93UTBGUldVWkxORVZGUVVGdlJGRm5RVVY2UlVaWWJrZDZPRXcxVG1VMFpuRTBUV2N2VkdsS1MyRjBRV0k1T0hwSFRESjZjMncwY1Roc2RXMUVLMFJOU0VkeVRFVkNZVkJDYkdsS2NtY3lNRE5YVFZaTVNsSjJRMlpMVGtkM1pXSjBhazg1U1VKSlFUMDlMUzB0TFMxRlRrUWdVRlZDVEVsRElFdEZXUzB0TFMwdElpd2lZV04wYVhabElqb3hMQ0p5WlhadmEyVmtJam93TENKa1pXWmhkV3gwY3lJNmUzMTkifQ.MEUCIQDbb-Rxr_XsYAa-PBD7d-Hpg-MiGf_S8YsyUAKB0Wf-0AIgH1eYipeLeZbZ-xXeBBn8BjfMHYO-IbPYeDwWFheiAms="))}),$(".queryGlobalRegistry").off(),$(".queryGlobalRegistry").on("click",function(t){console.info(e.queryGlobalRegistry("WaaRS9ZRswDNUIYtqF-j0nHQZmQVRLJ-mvqIGIYMz50"))})})};n["default"]=o},{}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e.postMessage({to:"runtime:loadedHyperty",body:t},"*")}function i(e,t){for(var n=void 0,r=0;!n&&r<e.registry.hypertiesList.length;)e.registry.hypertiesList[r].descriptor===t&&(n=e.registry.hypertiesList[r]),r++;return n}var s=e("urijs"),a=r(s),u=e("./admin/IdentitiesGUI"),c=r(u),l=e("./admin/PoliciesGUI"),f=r(l),d=e("./RuntimeFactory"),p=r(d),h=e("./admin/graphConnectorGUI"),y=r(h);try{window.cordova=void 0!==parent.cordova,window.cordova&&(window.open=function(e){return parent.cordova.InAppBrowser.open(e,"_blank","location=no,toolbar=no")})}catch(g){console.log("cordova not supported")}var m=new a["default"](window.location).search(!0),_=m.runtime,b="true"===m.development,v=p["default"].createRuntimeCatalogue(b);v.getRuntimeDescriptor(_).then(function(e){var t=e.sourcePackageURL;return"/sourcePackage"===t?e.sourcePackage:v.getSourcePackageFromURL(t)}).then(function(e){eval.apply(window,[e.sourceCode]);var t=new Runtime(p["default"],window.location.host);new f["default"](t.policyEngine),new y["default"](t.graphConnector);new c["default"](t.identityModule);window.addEventListener("message",function(e){if("core:loadHyperty"===e.data.to){var n=e.data.body.descriptor,r=i(t,n);r?o(e.source,{runtimeHypertyURL:r.hypertyURL}):t.loadHyperty(n).then(o.bind(null,e.source))}else if("graph:getAllContacts"===e.data.to){console.log("##Inside core: returning all contacts");var s=t.graphConnector.getAllContacts();if(0!=s.length){console.log("List of all contacts: ");for(var a=0;a<s.length;a++)console.log("First Name: "+s[a].firstName+" Last Name: "+s[a].lastName);parent.postMessage({to:"runtime:getAllContacts",body:{success:!0,result:s}},"*")}else console.log("!!!! Error : No contacts in the contact list, Please add contacts"),parent.postMessage({to:"runtime:getAllContacts",body:{success:!1,result:s}},"*")}else if("graph:removeLocation"===e.data.to){var u=e.data.body.guid;console.log("##Inside core: removing location from the "+u);var c=t.graphConnector.removeLocation(u);c?(console.log("Location successfully removed"),parent.postMessage({to:"runtime:removeLocation",body:{success:c}},"*")):(console.log("Location has not been removed "),parent.postMessage({to:"runtime:removeLocation",body:{success:c}},"*"))}else if("graph:setLocation"===e.data.to){var l=e.data.body.guid,f=e.data.body.locationName;console.log("##Inside core: setting location- "+f+"  + for: "+l);var d=t.graphConnector.setLocation(l,f);console.log("User found? - "+d),d?(console.log('Location "'+f+'"" has been successfully set for the contact with GUID '+l),parent.postMessage({to:"runtime:setLocation",body:{success:d}},"*")):(console.log('Location "'+f+'"" has not been set for the contact with GUID '+l),parent.postMessage({to:"runtime:setLocation",body:{success:d}},"*"))}else if("graph:getGroup"===e.data.to){var p=e.data.body.groupName;console.log("##Inside core: getting members of the: "+p);var h=t.graphConnector.getGroup(p);if(0!=h.length){console.log("!!!!Group members are: ");for(var a=0;a<h.length;a++)console.log(a+". "+h[a].firstName);parent.postMessage({to:"runtime:getGroup",body:{found:!0,result:h}},"*")}else console.log('!!!!No group members for groupname "'+p+'"'),parent.postMessage({to:"runtime:getGroup",body:{found:!1,result:h}},"*")}else if("graph:getGroupNames"===e.data.to){console.log("##Inside core: getting all group names");var y=t.graphConnector.getGroupNames();if(0!=y.length){for(var a=0;a<y.length;a++)console.log(y[a]);parent.postMessage({to:"runtime:getGroupNames",body:{found:!0,result:y}},"*")}else console.log("!!!!Error: No group names Yet. Tip: Please add contacts and add group names!!!!"),parent.postMessage({to:"runtime:getGroupNames",body:{found:!1,result:y}},"*")}else if("graph:addGroupName"===e.data.to){var g=e.data.body.guid,m=e.data.body.groupName;console.log("##Inside core: adding a groupName: "+m+" to "+g);var _=t.graphConnector.addGroupName(g,m);_?console.log('!!!!Added "'+m+'" successfully to "'+g+'"!!!!'):console.log('!!!!Error: Guid "'+g+'" does not exist or groupName "'+m+'" already exists'),parent.postMessage({to:"runtime:addGroupName",body:{result:_}},"*")}else if("graph:removeGroupName"===e.data.to){var b=e.data.body.guid,v=e.data.body.groupName;console.log("##Inside core: Removing a groupName: "+v+" to "+b);var w=t.graphConnector.removeGroupName(b,v);w?console.log('!!!!Removed "'+v+'" successfully from "'+b+'"!!!!'):console.log('!!!!Error: Guid "'+b+'" does not exist or groupName "'+v+'" does not exist'),parent.postMessage({to:"runtime:removeGroupName",body:{result:w}},"*")}else if("core:loadStub"===e.data.to)t.loadStub(e.data.body.domain);else if("graph:generateGUID"===e.data.to){console.log("##try generating GUID");var k=t.graphConnector.generateGUID();null!=k?(parent.postMessage({to:"runtime:generateGUID",body:{success:!0,guid:k}},"*"),console.log("## GUID generated! ")):(console.log("##Could not generate GUID!"),parent.postMessage({to:"runtime:generateGUID",body:{success:!1,guid:k}},"*"))}else if("graph:addUserID"===e.data.to){console.log("##Inside core: Adding userID with uid: "+e.data.body.uid+" and domain "+e.data.body.domain);var j=t.graphConnector.addUserID(e.data.body.uid,e.data.body.domain);j?console.log('!!!!Added "'+e.data.body.uid+", "+e.data.body.domain+'" successfully!!!!'):console.log('!!!Error: "'+e.data.body.uid+", "+e.data.body.domain+'" already exists!!!'),parent.postMessage({to:"runtime:addUserID",body:{result:j}},"*")}else if("graph:removeUserID"===e.data.to){var x=e.data.body.uid,O=e.data.body.domain;console.log("##Inside core: Removing userID: "+x+","+O);var E=t.graphConnector.removeUserID(x,O);E?console.log('!!!!Removed "'+e.data.body.uid+","+e.data.body.domain+'" successfully!!!!'):console.log('!!!!Error: "'+e.data.body.uid+","+e.data.body.domain+'" does not exist!!!!'),parent.postMessage({to:"runtime:removeUserID",body:{result:E}},"*")}else if("graph:setDefaults"===e.data.to){var P=e.data.body.voice,S=e.data.body.chat,C=e.data.body.video;console.log("##Inside core: set User Defaults : "+P+","+S+","+C);var M=t.graphConnector.setDefaults(P,S,C);
M?console.log('!!!!set "'+e.data.body.voice+","+e.data.body.chat+","+e.data.body.video+'" successfully!!!!'):console.log('!!!!Error: "'+e.data.body.voice+","+e.data.body.chat+","+e.data.body.video+'" does not exist!!!!'),parent.postMessage({to:"runtime:setDefaults",body:{result:M}},"*")}else if("graph:setContactUserIDs"===e.data.to){var I=e.data.body.guid,R=e.data.body.uid,T=e.data.body.domain;console.log('##Inside core: Adding userID: "'+R+","+T+'" for the contact with guid: "'+I+'"');var A=t.graphConnector.setContactUserIDs(I,R,T);A?console.log('!!!!Added userID: "'+R+","+T+'" for the contact with guid: "'+I+'" successfully!!!!'):console.log('!!!!Error: "'+R+","+T+'" already exist or contact with guid: '+I+" does not exist!!!!"),parent.postMessage({to:"runtime:setContactUserIDs",body:{result:A}},"*")}else if("graph:getContactUserIDs"===e.data.to){var N=e.data.body.guid;console.log('##Inside core: Getting all the userIDS for the contact with guid: "'+N+'"');var D=t.graphConnector.getContactUserIDs(N);D!==!1?(console.log('!!!!Found userIDs for the contact with guid: "'+N+'" successfully!!!!'),console.info(D)):console.log("!!!!Error: Contact with guid: "+N+" does not exist!!!!"),parent.postMessage({to:"runtime:getContactUserIDs",body:{result:D}},"*")}else if("graph:addContact"===e.data.to){var U=e.data.body.guid,F=e.data.body.fname,L=e.data.body.lname;console.log("##Inside Core: Adding a new contact with firstname: "+F+" "+L+" GUDI: "+U);var G=t.graphConnector.addContact(U,F,L);G?console.log('successfully Added contact with guid:"'+U+'"'):console.log('Contact with guid:"'+U+'" was not added successfully'),parent.postMessage({to:"runtime:addContact",body:{result:G}},"*")}else if("graph:getContact"===e.data.to){var B=e.data.body.username;console.log("##Inside core: finding user with username: "+B);var $=t.graphConnector.getContact(B);if("undefined"!=typeof $)if(0==$.length)console.log('!!!!Contact with name "'+B+'" not found!!!!'),parent.postMessage({to:"runtime:getContact",body:{found:!1}},"*");else if($.length>=1){console.log("!!!!Found matching users: ");for(var a=0;a<$.length;a++)console.log("First Name: "+$[a].firstName+" Last Name: "+$[a].lastName);parent.postMessage({to:"runtime:getContact",body:{found:!0,userList:$}},"*")}}else if("graph:checkGUID"===e.data.to){var z=e.data.body.guid;console.log("##Inside core: looking conctacts of user with GUID: "+z);var H=t.graphConnector.checkGUID(z);console.info(H);var V=H[0],q=H[1];0!==V.length?(console.log("Direct Friend found from given GUID: \n FirstName "+V[0].firstName+"\n LastName "+V[0].lastName+"\n GUID "+V[0].guid),parent.postMessage({to:"runtime:checkGUID",body:{found:!0,GUID:z,result:H}},"*")):0!==q.length?(console.log("Mutual Friend found from given GUID: \n FirstName "+q[0].firstName+"\n LastName "+q[0].lastName+"\n GUID "+q[0].guid),parent.postMessage({to:"runtime:checkGUID",body:{found:!0,GUID:z,result:H}},"*")):(console.log("##This user does not have any contacts stored!!"),parent.postMessage({to:"runtime:checkGUID",body:{found:!1,GUID:z,result:H}},"*"))}else if("graph:removeContact"===e.data.to){var K=e.data.body.guid;console.log("##Inside core: Deleting user with GUID: "+K);var W=t.graphConnector.removeContact(K);W?console.log('!!!!Contact with "'+K+'" has been deleted successfully!!!!'):console.log('!!!!Contact with "'+K+'" does not exist!!!!'),parent.postMessage({to:"runtime:removeContact",body:{result:W}},"*")}else if("graph:useGUID"===e.data.to){var Q=e.data.body.seed;console.log("##Inside core: generating keys using seed: "+Q);var Y=t.graphConnector.useGUID(Q).then(function(e){return e})["catch"](function(e){return e});console.info(Y),parent.postMessage({to:"runtime:useGUID",body:{record:Y}},"*"),console.log("##Seed is created")}else if("graph:sendGlobalRegistryRecord"===e.data.to){var J=e.data.body.jwt;console.log("##Inside core: Sending JWT with value: "+J);var Z=t.graphConnector.sendGlobalRegistryRecord(J).then(function(e){return e})["catch"](function(e){return e});console.log("global resgistry is "),console.info(Z),parent.postMessage({to:"runtime:sendGlobalRegistryRecord",body:{record:Z}},"*")}else if("graph:queryGlobalRegistry"===e.data.to){var X=e.data.body.guid;console.log("##Inside core: Querying with GUID: "+X);t.graphConnector.queryGlobalRegistry(X).then(function(e){return parent.postMessage({to:"runtime:queryGlobalRegistry",body:{queriedContact:e}},"*"),console.log("Queried Contact is "+e),e})["catch"](function(e){return parent.postMessage({to:"runtime:queryGlobalRegistry",body:{queriedContact:e}},"*"),console.log("!!!!Error: "+e),e})}else if("graph:calculateBloomFilter1Hop"===e.data.to)console.log("##Inside bloom filter"),console.log("##Calculating Bloom filter : "+t.graphConnector.calculateBloomFilter1Hop());else if("graph:setBloomFilter1HopContact"===e.data.to){console.log("##Inside set bloom filter");var ee=e.data.body.guid,te=e.data.body.bloomFilter,ne=t.graphConnector.setBloomFilter1HopContact(ee,te);console.log("##setting the bloom filter for a contact status: "+ne),parent.postMessage({to:"runtime:setBloomFilter1HopContact",body:{success:ne}},"*")}else if("graph:getOwner"===e.data.to){console.log("##Inside core: get Owner Details");var re=t.graphConnector.getOwner();null==re?parent.postMessage({to:"runtime:getOwner",body:{success:!1,owner:re}},"*"):(console.log("!!!!Owner is: \nFirstname "+re.firstName+"\nLast Name "+re.lastName+"\nGUID "+re.guid+"\nNo of groups "+re.groups.length+"\nResidence Location "+re.residenceLocation+"\nBloom filter "+re.contactsBloomFilter1Hop+"\nLast Calculations bloom filter "+re.lastCalculationBloomFilter1Hop),parent.postMessage({to:"runtime:getOwner",body:{success:!0,owner:re}},"*"))}else if("graph:setOwnerName"===e.data.to){console.log("##Inside core: set Owner Details");var oe=e.data.body.firstName,ie=e.data.body.lastName,se=t.graphConnector.setOwnerName(oe,ie);se?(console.log("!!!! Successfully set owners firstName "+oe+" and last name as "+ie),parent.postMessage({to:"runtime:setOwner",body:{success:se}},"*")):(console.log("!!!! Error: Setting of owners firstName as "+oe+" and last name as "+ie+" was unsuccessful"),parent.postMessage({to:"runtime:setOwner",body:{success:se}},"*"))}else if("graph:signGlobalRegistryRecord"===e.data.to){console.log("##Inside signing");var ae=t.graphConnector.signGlobalRegistryRecord();console.log("##Signing and the returned JWT is : "+ae),parent.postMessage({to:"runtime:signGlobalRegistryRecord",body:{jwt:ae}},"*")}else if("graph:editContact"===e.data.to){console.log("##Inside Core: Edit Contact function to change guid, fname, lname and privacy");var ue=e.data.body.guidOld,ce=e.data.body.fname,le=e.data.body.lname,fe=e.data.body.privStatus,de=e.data.body.guidNew,pe=t.graphConnector.editContact(ue,ce,le,de,fe);console.log("##Old GUID is : "+ue+"\nNew Guid is : "+pe[0].guid+"\nFirst Name is : "+pe[0].firstName+"\nLast Name is : "+pe[0].lastName+"\nPrivacy is : "+pe[0].privateContact),0!=pe.length?parent.postMessage({to:"runtime:editContact",body:{success:!0,contact:pe}},"*"):parent.postMessage({to:"runtime:editContact",body:{success:!1,contact:pe}},"*")}else"core:loadStub"===e.data.to?t.loadStub(e.data.body.domain).then(function(e){console.log("Stub Loaded: ",e)})["catch"](function(e){console.error("Stub error:",e)}):"core:close"===e.data.to&&t.close().then(e.source.postMessage({to:"runtime:runtimeClosed",body:!0},"*"))["catch"](e.source.postMessage({to:"runtime:runtimeClosed",body:!1},"*"))},!1),window.addEventListener("beforeunload",function(e){t.close()}),parent.postMessage({to:"runtime:installed",body:{}},"*")})},{"./RuntimeFactory":12,"./admin/IdentitiesGUI":15,"./admin/PoliciesGUI":16,"./admin/graphConnectorGUI":18,urijs:9}]},{},[19])(19)});
//# sourceMappingURL=core.js.map
